(self.webpackChunkzxuqian_cn=self.webpackChunkzxuqian_cn||[]).push([[3092],{2122:function(e,n,t){"use strict";function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}t.d(n,{Z:function(){return r}})},9756:function(e,n,t){"use strict";function r(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}t.d(n,{Z:function(){return r}})},3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return u},kt:function(){return d}});var r=t(7294);function o(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function a(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function c(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?a(Object(t),!0).forEach((function(n){o(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):a(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,o=function(e,n){if(null==e)return{};var t,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||(o[t]=e[t]);return o}(e,n);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)t=a[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(o[t]=e[t])}return o}var l=r.createContext({}),s=function(e){var n=r.useContext(l),t=n;return e&&(t="function"==typeof e?e(n):c(c({},n),e)),t},u=function(e){var n=s(e.components);return r.createElement(l.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},p=r.forwardRef((function(e,n){var t=e.components,o=e.mdxType,a=e.originalType,l=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),p=s(t),d=o,y=p["".concat(l,".").concat(d)]||p[d]||m[d]||a;return t?r.createElement(y,c(c({ref:n},u),{},{components:t})):r.createElement(y,c({ref:n},u))}));function d(e,n){var t=arguments,o=n&&n.mdxType;if("string"==typeof e||o){var a=t.length,c=new Array(a);c[0]=p;var i={};for(var l in n)hasOwnProperty.call(n,l)&&(i[l]=n[l]);i.originalType=e,i.mdxType="string"==typeof e?e:o,c[1]=i;for(var s=2;s<a;s++)c[s]=t[s];return r.createElement.apply(null,c)}return r.createElement.apply(null,t)}p.displayName="MDXCreateElement"},4861:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return c},contentTitle:function(){return i},metadata:function(){return l},toc:function(){return s},default:function(){return m}});var r=t(2122),o=t(9756),a=(t(7294),t(3905)),c={title:"React createContext \u4e0a\u4e0b\u6587",date:new Date("2021-04-09T00:00:00.000Z"),sidebar:"auto",tags:["react","createContext"]},i="React createContext \u4e0a\u4e0b\u6587",l={unversionedId:"skill/react/react09",id:"skill/react/react09",isDocsHomePage:!1,title:"React createContext \u4e0a\u4e0b\u6587",description:"\u7ec4\u4ef6\u95f4\u8de8\u5c42\u7ea7\u4f20\u503c\uff08class\u548c\u51fd\u6570\u7ec4\u4ef6\u90fd\u53ef\u4ee5\uff09",source:"@site/docs/skill/react/react09.md",sourceDirName:"skill/react",slug:"/skill/react/react09",permalink:"/docs/skill/react/react09",version:"current",frontMatter:{title:"React createContext \u4e0a\u4e0b\u6587",date:"2021-04-09T00:00:00.000Z",sidebar:"auto",tags:["react","createContext"]},sidebar:"skill",previous:{title:"React class\u7684\u751f\u547d\u5468\u671f",permalink:"/docs/skill/react/react08"},next:{title:"React propTypes/\u9ad8\u9636\u7ec4\u4ef6",permalink:"/docs/skill/react/react10"}},s=[{value:"\u6848\u4f8b",id:"\u6848\u4f8b",children:[]}],u={toc:s};function m(e){var n=e.components,t=(0,o.Z)(e,["components"]);return(0,a.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"react-createcontext-\u4e0a\u4e0b\u6587"},"React createContext \u4e0a\u4e0b\u6587"),(0,a.kt)("p",null,"\u7ec4\u4ef6\u95f4\u8de8\u5c42\u7ea7\u4f20\u503c\uff08",(0,a.kt)("inlineCode",{parentName:"p"},"class"),"\u548c\u51fd\u6570\u7ec4\u4ef6\u90fd\u53ef\u4ee5\uff09\n\u4f7f\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"createContext"),"\u4e2d\u7684\u4e24\u4e2a\u6a21\u5757 ",(0,a.kt)("inlineCode",{parentName:"p"},"Provide"),"\uff08\u63d0\u4f9b\u8005\uff09 ",(0,a.kt)("inlineCode",{parentName:"p"},"Consumer"),"\uff08\u6d88\u8d39\u8005\uff09"),(0,a.kt)("ol",null,(0,a.kt)("li",{parentName:"ol"},"\u521b\u5efa\u4e0a\u4e0b\u6587\u5bf9\u8c61 ",(0,a.kt)("inlineCode",{parentName:"li"},"createContext()"))),(0,a.kt)("p",null,"\u5728\u7ec4\u4ef6\u5916\u9762\u521d\u59cb\u5316"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"const ThemContext = React.createContext() //\u521d\u59cb\u5316\u4e0a\u4e0b\u6587\u5bf9\u8c61\n// ThemContext \u5b9a\u4e49\u4e0a\u4e0b\u6587\u7684\u5bf9\u8c61(\u81ea\u5b9a\u4e49\u540d\u79f0)\n")),(0,a.kt)("ol",{start:2},(0,a.kt)("li",{parentName:"ol"},"\u4f7f\u7528")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"2.1 \u53d1\u9001")),(0,a.kt)("p",null,"\u7956\u5148\u7ea7\u7ec4\u4ef6\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"<ThemContext.Rrovide></ThemContext.Rrovide>"),"(",(0,a.kt)("inlineCode",{parentName:"p"},"XXX.Provider"),")\u5305\u88f9\uff0c\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},"value"),"\u5c5e\u6027\u8fdb\u884c\u6570\u636e\u4f20\u9012\u3002\u8981\u4f20\u9012\u7684\u6570\u636e\u548c\u65b9\u6cd5\u90fd\u7528",(0,a.kt)("inlineCode",{parentName:"p"},"value={}"),"\u4e2d\u7684",(0,a.kt)("inlineCode",{parentName:"p"},"{}"),"\u5305\u8d77\u6765\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"// \u5728A\u7ec4\u4ef6\u91cc\u5411\u5916\u4f20\u9012\u6570\u636e\u548c\u65b9\u6cd5\nclass App extends React.Component {\n    render() {\n        return <ThemContext.Provider value={{ money: this.state.money, consumMoney: this.consumMoney }} >\n        {/* \u7528 XXX.Provider \u5305\u88f9 \u7ec4\u4ef6\u540d\u8fdb\u884c\u4f20\u9012 \uff1a\u9700\u8981\u4f20\u9012\u7ed9\u8c01\uff0c\u5c31\u5199\u8c01 */}\n            <Crondson/>  {/* \u7ec4\u4ef6\u540d */}\n        </ThemContext.Provider>\n    }\n}\n")),(0,a.kt)("span",null,"\n    ",(0,a.kt)("ins",{parentName:"span",className:"adsbygoogle",style:{display:"block",textAlign:"center"},"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-3487507367729662","data-ad-slot":"3539166782"}),"\n  ",(0,a.kt)("script",{parentName:"span"},"\n     (adsbygoogle = window.adsbygoogle || []).push({});\n  ")),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},"2.2 \u63a5\u6536(\u5e76\u4f7f\u7528)")),(0,a.kt)("p",null,(0,a.kt)("inlineCode",{parentName:"p"},"static contextType = ThemContext")),(0,a.kt)("p",null,"\u63a5\u6536\u6570\u636e\u7684\u7ec4\u4ef6 \u901a\u8fc7\u5b9a\u4e49 ",(0,a.kt)("inlineCode",{parentName:"p"},"static contextType")," = ",(0,a.kt)("inlineCode",{parentName:"p"},"\u5b9a\u4e49\u7684\u4e0a\u4e0b\u6587\u5bf9\u8c61")," \u672c\u7ec4\u5c31\u4f1a\u63a5\u6536\u4f20\u9012\u7684\u6570\u636e\u548c\u65b9\u6cd5\uff0c\u4f20\u9012\u7684\u5c5e\u6027\u65b9\u6cd5\u4f1a\u6302\u8f7d\u5230",(0,a.kt)("inlineCode",{parentName:"p"},"this.context"),"\u4e0a\u9762\uff0c\u901a\u8fc7",(0,a.kt)("inlineCode",{parentName:"p"},"this.context"),"\u4f7f\u7528\u6570\u636e\u548c\u65b9\u6cd5\u3002"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"class Crondson extends React.Component {\n    // \u63a5\u6536\u4e0a\u4e0b\u6587\u5bf9\u8c61\n    static contextType = ThemContext\n    render() {\n        console.log(this.context);\n        console.log(ThemContext);\n        return <div >\n            {this.context.money}\n            \u5b59\u5b50\u7ec4\u4ef6\n            <button onClick={() => this.context.consumMoney(10)}>\u82b1\u94b1</button>\n        </div>\n    }\n}\n")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"import React from 'react'\nimport { render } from 'react-dom'\nconst ThemContext = React.createContext() //\u521d\u59cb\u5316\u4e0a\u4e0b\u6587\u5bf9\u8c61\nclass App extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            money: 100\n        }\n    }\n    consumMoney = (money) => {\n        this.setState({\n            money: this.state.money - money\n        })\n    }\n    render() {\n        // \u628a\u4f20\u9012\u6570\u636e\u7684\u7ec4\u4ef6\u7528Rrovide\u5305\u88f9\uff0c\u901a\u8fc7value \u5c5e\u6027\u8fdb\u884c\u6570\u636e\u4f20\u9012\u3002\n        return <ThemContext.Provider value={{ money: this.state.money, consumMoney: this.consumMoney }} >\n            \u4e0a\u4e0b\u6587\n            <Children />\n        </ThemContext.Provider>\n    }\n}\nclass Children extends React.Component {\n\n    render() {\n        return <div >\n            \u5b50\u7ec4\u4ef6\n            <Crondson />\n        </div>\n    }\n}\n//  \u7b2c\u4e00\u79cd\u65b9\u6cd5 static contextType = ThemContext\nclass Crondson extends React.Component {\n    // \u63a5\u6536\u4e0a\u4e0b\u6587\u5bf9\u8c61\n    static contextType = ThemContext\n    render() {\n        console.log(this.context);\n        console.log(ThemContext);\n        return <div >\n            {this.context.money}\n            \u5b59\u5b50\u7ec4\u4ef6\n            <button onClick={() => this.context.consumMoney(10)}>\u82b1\u94b1</button>\n        </div>\n    }\n}\n\n//  \u7b2c\u4e8c\u79cd\u65b9\u6cd5 \u5b50\u7ec4\u4ef6\u63a5\u6536\u65f6\u4e5f\u53ef\u7528<theme.Consumer></theme.Consumer>\nclass Crondson extends React.Component {\n    render() {\n        return(<theme.Consumer>\n            {(value) => {\n                return <>\u4e8c\u5b59\u5b50{value.money}<button onClick={() => value.consumMoney(10)}>\u82b1\u94b1</button></>\n            }}\n        </theme.Consumer>)\n    }\n}\nrender(<App />, document.getElementById('root'))\n")),(0,a.kt)("h2",{id:"\u6848\u4f8b"},"\u6848\u4f8b"),(0,a.kt)("p",null,"\u6848\u4f8b \u4e0a\u4e0b\u6587\u4f20\u9012\u6570\u636e"),(0,a.kt)("span",null,"\n    ",(0,a.kt)("ins",{parentName:"span",className:"adsbygoogle",style:{display:"block",textAlign:"center"},"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-3487507367729662","data-ad-slot":"1964508460"}),"\n  ",(0,a.kt)("script",{parentName:"span"},"\n     (adsbygoogle = window.adsbygoogle || []).push({});\n  ")),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-jsx"},"// \u8de8\u5c42\u7ea7\u901a\u4fe1\nimport React from 'react'\nimport { render } from 'react-dom'\n// \u5b9a\u4e49\u4e0a\u4e0b\u6587\u5bf9\u8c61 theme\nlet theme = React.createContext()\n//\u8fd9\u4e2a\u65b9\u6cd5\u91cc\u6709\u4e24\u4e2a\u53c2\u6570 { Provider ,Consumer }\n// \u4e00\u4e2a\u7236\u7ec4\u4ef6 \u4e09\u4e2a\u5b59\u7ec4\u4ef6\nclass App extends React.Component {\n    constructor() {\n        super()\n        this.state = {\n            money: 100\n        }\n    }\n    Sum = (item) => {\n        if (this.state.money !== 0) {\n            this.setState({\n                money: this.state.money - item\n            })\n        }\n    }\n    render() {\n        // \u4e0a\u5c42\u7ec4\u4ef6\u901a\u8fc7Provider \u7ec4\u4ef6\u7684value \u7ed9\u4e0b\u7ea7\u63d0\u4f9b\u6570\u636e\u548c\u65b9\u6cd5\n        return <>\n            <theme.Provider value={{ money: this.state.money, Sum: this.Sum }}  >\n                \u7237\u7237\n                <br />\n                <Children />\n            </theme.Provider>\n        </>\n    }\n}\n\nclass Children extends React.Component {\n    render() {\n        return <>\u513f\u5b50\n            <br />\n            <Grandson1 />\n            <br />\n            <Grandson2 />\n            <br />\n            <Grandson3 />\n        </>\n    }\n}\n\n// \u4e0b\u7ea7\u7ec4\u4ef6\u901a\u8fc7 static contextType = [\u4e0a\u4e0b\u6587\u5bf9\u8c61] \uff0c\u8fd9\u6837\u5c31\u80fd\u8ba9 this.context \u62ff\u5230 \u4e0a\u4e0b\u6587\u5bf9\u8c61\u4f20\u9012\u8fc7\u6765\u7684\u503c\nclass Grandson1 extends React.Component {\n    static contextType = theme\n    render() {\n        return <>\u5927\u5b59\u5b50{this.context.money}<button onClick={() => this.context.Sum(10)}>\u82b1\u94b1</button></>\n    }\n}\nclass Grandson2 extends React.Component {\n    render() {\n        return (<theme.Consumer>\n            {(value) => {\n                return <>\u4e8c\u5b59\u5b50{value.money}<button onClick={() => value.Sum(10)}>\u82b1\u94b1</button></>\n            }}\n        </theme.Consumer>)\n    }\n}\nfunction Grandson3() {\n    return (<theme.Consumer>\n        {(value) => {\n            return <>\u5c0f\u5b59\u5b50{value.money}<button onClick={() => value.Sum(10)}>\u82b1\u94b1</button></>\n        }}\n    </theme.Consumer>)\n}\nrender(<App />, document.getElementById('root'))\n")))}m.isMDXComponent=!0}}]);