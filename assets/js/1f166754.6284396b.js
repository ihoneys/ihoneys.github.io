(self.webpackChunkzxuqian_cn=self.webpackChunkzxuqian_cn||[]).push([[3047],{2122:function(e,n,t){"use strict";function r(){return(r=Object.assign||function(e){for(var n=1;n<arguments.length;n++){var t=arguments[n];for(var r in t)Object.prototype.hasOwnProperty.call(t,r)&&(e[r]=t[r])}return e}).apply(this,arguments)}t.d(n,{Z:function(){return r}})},9756:function(e,n,t){"use strict";function r(e,n){if(null==e)return{};var t,r,a={},p=Object.keys(e);for(r=0;r<p.length;r++)t=p[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}t.d(n,{Z:function(){return r}})},3905:function(e,n,t){"use strict";t.d(n,{Zo:function(){return u},kt:function(){return d}});var r=t(7294);function a(e,n,t){return n in e?Object.defineProperty(e,n,{value:t,enumerable:!0,configurable:!0,writable:!0}):e[n]=t,e}function p(e,n){var t=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);n&&(r=r.filter((function(n){return Object.getOwnPropertyDescriptor(e,n).enumerable}))),t.push.apply(t,r)}return t}function l(e){for(var n=1;n<arguments.length;n++){var t=null!=arguments[n]?arguments[n]:{};n%2?p(Object(t),!0).forEach((function(n){a(e,n,t[n])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):p(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))}))}return e}function i(e,n){if(null==e)return{};var t,r,a=function(e,n){if(null==e)return{};var t,r,a={},p=Object.keys(e);for(r=0;r<p.length;r++)t=p[r],n.indexOf(t)>=0||(a[t]=e[t]);return a}(e,n);if(Object.getOwnPropertySymbols){var p=Object.getOwnPropertySymbols(e);for(r=0;r<p.length;r++)t=p[r],n.indexOf(t)>=0||Object.prototype.propertyIsEnumerable.call(e,t)&&(a[t]=e[t])}return a}var o=r.createContext({}),s=function(e){var n=r.useContext(o),t=n;return e&&(t="function"==typeof e?e(n):l(l({},n),e)),t},u=function(e){var n=s(e.components);return r.createElement(o.Provider,{value:n},e.children)},m={inlineCode:"code",wrapper:function(e){var n=e.children;return r.createElement(r.Fragment,{},n)}},c=r.forwardRef((function(e,n){var t=e.components,a=e.mdxType,p=e.originalType,o=e.parentName,u=i(e,["components","mdxType","originalType","parentName"]),c=s(t),d=a,k=c["".concat(o,".").concat(d)]||c[d]||m[d]||p;return t?r.createElement(k,l(l({ref:n},u),{},{components:t})):r.createElement(k,l({ref:n},u))}));function d(e,n){var t=arguments,a=n&&n.mdxType;if("string"==typeof e||a){var p=t.length,l=new Array(p);l[0]=c;var i={};for(var o in n)hasOwnProperty.call(n,o)&&(i[o]=n[o]);i.originalType=e,i.mdxType="string"==typeof e?e:a,l[1]=i;for(var s=2;s<p;s++)l[s]=t[s];return r.createElement.apply(null,l)}return r.createElement.apply(null,t)}c.displayName="MDXCreateElement"},7029:function(e,n,t){"use strict";t.r(n),t.d(n,{frontMatter:function(){return l},contentTitle:function(){return i},metadata:function(){return o},toc:function(){return s},default:function(){return m}});var r=t(2122),a=t(9756),p=(t(7294),t(3905)),l={title:"TypeScript \u90a3\u4e9b\u5e38\u89c1\u7c7b\u578b\u8868\u8fbe\u5f0f\u5173\u952e\u5b57",date:new Date("2020-12-31T00:00:00.000Z"),sidebar:"auto",categories:["\u524d\u7aef\u57fa\u7840"],tags:["TypeScript"],publish:!0,showSponsor:!0},i=void 0,o={unversionedId:"skill/ts/ts2",id:"skill/ts/ts2",isDocsHomePage:!1,title:"TypeScript \u90a3\u4e9b\u5e38\u89c1\u7c7b\u578b\u8868\u8fbe\u5f0f\u5173\u952e\u5b57",description:"\u524d\u8a00",source:"@site/docs/skill/ts/ts2.md",sourceDirName:"skill/ts",slug:"/skill/ts/ts2",permalink:"/docs/skill/ts/ts2",version:"current",frontMatter:{title:"TypeScript \u90a3\u4e9b\u5e38\u89c1\u7c7b\u578b\u8868\u8fbe\u5f0f\u5173\u952e\u5b57",date:"2020-12-31T00:00:00.000Z",sidebar:"auto",categories:["\u524d\u7aef\u57fa\u7840"],tags:["TypeScript"],publish:!0,showSponsor:!0},sidebar:"skill",previous:{title:"TypeScript \u57fa\u7840",permalink:"/docs/skill/ts/ts1"},next:{title:"\u8fd9\u51e0\u4e2a TypeScript \u9ad8\u7ea7\u5de5\u5177\u7c7b\u578b\u7684\u7528\u6cd5\u53ca\u5b9e\u73b0\u539f\u7406",permalink:"/docs/skill/ts/ts3"}},s=[{value:"\u524d\u8a00",id:"\u524d\u8a00",children:[]},{value:"\u5173\u952e\u5b57",id:"\u5173\u952e\u5b57",children:[{value:"extends",id:"extends",children:[]},{value:"in",id:"in",children:[]},{value:"is",id:"is",children:[]},{value:"infer",id:"infer",children:[]},{value:"typeof",id:"typeof",children:[]},{value:"instance",id:"instance",children:[]},{value:"keyof",id:"keyof",children:[]},{value:"\u7d22\u5f15\u8bbf\u95ee\u64cd\u4f5c\u7b26\u53f7 TK",id:"\u7d22\u5f15\u8bbf\u95ee\u64cd\u4f5c\u7b26\u53f7-tk",children:[]}]},{value:"\u6700\u540e",id:"\u6700\u540e",children:[]}],u={toc:s};function m(e){var n=e.components,t=(0,a.Z)(e,["components"]);return(0,p.kt)("wrapper",(0,r.Z)({},u,t,{components:n,mdxType:"MDXLayout"}),(0,p.kt)("h2",{id:"\u524d\u8a00"},"\u524d\u8a00"),(0,p.kt)("p",null,"\u9664\u4e86\u5b9a\u4e49\u4e00\u4e9b\u57fa\u672c\u7c7b\u578b\uff0c\u67d0\u4e9b\u60c5\u51b5\u4e0d\u80fd\u7528\u57fa\u672c\u7c7b\u578b\u786e\u5b9a\uff0c\u4e5f\u5c31\u662f\u8981\u5b9a\u4e49\u4e00\u4e2a\u590d\u6742\u7c7b\u578b\u7684\u65f6\u5019\uff0cTS\u7684\u4e00\u4e9b\u64cd\u4f5c\u7b26\u80fd\u591f\u5e2e\u52a9\u6211\u4eec\u89e3\u51b3\u8fd9\u4e00\u95ee\u9898\uff0c\u4e0b\u9762\u4f1a\u7ed3\u5408\u5b9e\u4f8b\u8bb2\u8ff0 TS \u4e2d\u4e00\u4e9b\u5e38\u89c1\u7684\u9ad8\u7ea7\u64cd\u4f5c\u7b26\uff0c\u4e5f\u6b22\u8fce\u5927\u5bb6\u8865\u5145\u3002"),(0,p.kt)("h2",{id:"\u5173\u952e\u5b57"},"\u5173\u952e\u5b57"),(0,p.kt)("h3",{id:"extends"},"extends"),(0,p.kt)("p",null,"\u8bed\u6cd5\uff1a",(0,p.kt)("inlineCode",{parentName:"p"},"T extends K")),(0,p.kt)("p",null,"\u8fd9\u91cc\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"extends"),"\u4e0d\u662f\u7c7b\uff0c\u63a5\u53e3\u7ee7\u627f\u7684\u610f\u601d\uff0c\u800c\u662f\u8d77\u5230\u9650\u5b9a\u4e0e\u7ea6\u675f\u4f5c\u7528\uff0c\u610f\u601d\u662f \u5224\u65ad ",(0,p.kt)("inlineCode",{parentName:"p"},"T")," \u80fd\u5426\u8d4b\u503c\u7ed9 ",(0,p.kt)("inlineCode",{parentName:"p"},"K")),(0,p.kt)("p",null,"\u6709\u65f6\u5019\u5b9a\u4e49\u7684\u6cdb\u578b\u7c7b\u578b\u4e0d\u60f3\u4ec0\u4e48\u7c7b\u578b\u90fd\u53ef\u4ee5\uff0c\u60f3\u7ee7\u627f\u67d0\u4e9b\u7c7b\uff0c\u53ef\u4ee5\u901a\u8fc7 ",(0,p.kt)("inlineCode",{parentName:"p"},"extends"),"\u5173\u952e\u5b57\u6dfb\u52a0\u6cdb\u578b\u7ea6\u675f\u3002"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"const useCopyKeys = <T extends U, U>(target: T, source: U) => {\n    for (let key in source) {\n        target[key] = (source as T)[key];\n    }\n    return target;\n};\n\nconst obj = { a: 1, b: 2, c: 3, d: 4 };\nuseCopyKeys(obj, { b: 10, c: 20 });\n\n")),(0,p.kt)("p",null,"\u4e0a\u9762\u7ea6\u675f\u4e86\u6cdb\u578b ",(0,p.kt)("inlineCode",{parentName:"p"},"T")," \u5fc5\u987b\u5305\u542b ",(0,p.kt)("inlineCode",{parentName:"p"},"U")," \uff0c \u5982\u679c\u6cdb\u578b ",(0,p.kt)("inlineCode",{parentName:"p"},"T")," \u4e2d\u6ca1\u6709 ",(0,p.kt)("inlineCode",{parentName:"p"},"U")," \u5b57\u6bb5\u90a3\u4e48\u5c31\u4f1a\u51fa\u73b0\u9519\u8bef\uff0c\u7b80\u5355\u6765\u8bf4\u5c31\u662f\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"T")," \u53ef\u4ee5\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"U")," \u7684\u7236\u7c7b\uff0c\u4f46\u662f\u4e0d\u80fd\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"U")," \u7684\u5b50\u7c7b\u3002"),(0,p.kt)("span",null,"\n    ",(0,p.kt)("ins",{parentName:"span",className:"adsbygoogle",style:{display:"block",textAlign:"center"},"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-3487507367729662","data-ad-slot":"3539166782"}),"\n  ",(0,p.kt)("script",{parentName:"span"},"\n     (adsbygoogle = window.adsbygoogle || []).push({});\n  ")),(0,p.kt)("p",null,"\u4e5f\u53ef\u4ee5\u7528\u4e8e\u6761\u4ef6\u5224\u65ad"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"extends \u6761\u4ef6\u5206\u53d1")),(0,p.kt)("p",null,"\u4f8b\u5982\uff0c\u5b9e\u4f8b\u5316",(0,p.kt)("inlineCode",{parentName:"p"},"T extends U ? X : Y"),"\uff0c\u4f1a\u5b58\u5728\u4e00\u4e2a\u7279\u6027\uff0c\u5f53",(0,p.kt)("inlineCode",{parentName:"p"},"T"),"\u7684\u7c7b\u578b\u4e3a",(0,p.kt)("inlineCode",{parentName:"p"},"A | B | C"),"\u4e5f\u5c31\u662f\u8054\u5408\u7c7b\u578b\u65f6\uff0c\u4f1a\u8fdb\u884c\u6761\u4ef6\u5206\u53d1\uff0c\u88ab\u89e3\u6790\u4e3a",(0,p.kt)("inlineCode",{parentName:"p"},"(A extends U ? X : Y) | (B extends U ? X : Y) | (C extends U ? X : Y)"),"\uff0c"),(0,p.kt)("p",null,"\u4e0b\u9762",(0,p.kt)("inlineCode",{parentName:"p"},"Exclude"),"\u5de5\u5177\u7c7b\u578b\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"U")," \u5728 ",(0,p.kt)("inlineCode",{parentName:"p"},"T")," \u4e2d\u6709\u7684\u90fd\u6392\u9664"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"type Exclude<T, U> = T extends U ? never : T;\n\ntype E0= Exclude<string | number, number>; // string\n\n")),(0,p.kt)("p",null,"\u4e0a\u9762\u5217\u5b50\u4f1a\u88ab\u5206\u53d1\u4e3a",(0,p.kt)("inlineCode",{parentName:"p"},"string extends number ? never : string"),"| ",(0,p.kt)("inlineCode",{parentName:"p"},"number extends number ? never : number"),"\uff0c\u56e0\u6b64\u5f97\u5230",(0,p.kt)("inlineCode",{parentName:"p"},"string"),"\u3002"),(0,p.kt)("h3",{id:"in"},"in"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"in"),"\u5173\u952e\u5b57\u7528\u6765\u679a\u4e3e\u7c7b\u578b\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"type Keys = 'status' | 'code';\ntype Response = {\n  [p in Keys]: any;\n};\n\n// \u7b49\u540c\u4e8e\uff1a\ntype Response = {\n  status: any;\n  code: any;\n};\n\n")),(0,p.kt)("p",null,"\u6ce8\u610f\u7684\u662f\uff1a"),(0,p.kt)("p",null,"\u5982\u679c\u4f7f\u7528 ",(0,p.kt)("inlineCode",{parentName:"p"},"[ P in number ]"),"\u751f\u6210\u4ee5\u6570\u5b57\u4e3a\u7d22\u5f15\u7684\u7c7b\u578b\u7684\u8bdd\uff0c\u4ed6\u4e5f\u53ef\u4ee5\u662f\u4e00\u4e2a\u6570\u7ec4\uff1a"),(0,p.kt)("p",null,"\u4ee5 TypeScript \u5185\u7f6e\u5de5\u5177\u65b9\u6cd5 ",(0,p.kt)("inlineCode",{parentName:"p"},"Record"),"\u65b9\u6cd5\u4e3a\u5217\u5b50\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"// Record \u5b9e\u73b0\u65b9\u6cd5\ntype Record<K extends keyof any, T> = {\n    [P in K]: T;\n};\n\ninterface Customer {\n  name: string;\n  age: number;\n}\n\ntype Result = Record<number, Customer>; // type Result = { [x: number]: Customer; }\n\nconst varible: Result = [{ name: 'jac', age: 111 }]; // OK\n\n")),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"[x: number]"),"\u53ef\u4ee5\u4ee3\u8868\u5b83\u7684\u7d22\u5f15\u56e0\u6b64\u503c\u4e3a",(0,p.kt)("inlineCode",{parentName:"p"},"[{ name: 'jac', age: 111 }]"),"\u662f\u6210\u529f\u7684\uff0c\u76f8\u5f53\u4e8e ",(0,p.kt)("inlineCode",{parentName:"p"},"[ 0 : { name: 'jac', age: 111 }]"),"\u7701\u7565\u4e86 0\uff0c"),(0,p.kt)("p",null,"\u4f46\u662f\u5982\u679c\u662f",(0,p.kt)("strong",{parentName:"p"},"\u5b57\u7b26\u4e32\u7d22\u5f15"),"\u7684\u8bdd\uff0c\u5c31\u4e0d\u80fd\u8fd9\u6837"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"type Result = Record<string, Customer>; // type Result = { [x: number]: Customer; }\n\nconst varible: Result = [{ name: 'jac', age: 111 }]; // Error\n\nconst varible: Result = { info: { name: 'jac', age: 111 } }; // OK\n\n")),(0,p.kt)("h3",{id:"is"},"is"),(0,p.kt)("p",null,"\u8bed\u6cd5\uff1a",(0,p.kt)("inlineCode",{parentName:"p"},"prop is Type")),(0,p.kt)("p",null,"\u5224\u65ad prop \u662f\u5426\u662f Type \u7c7b\u578b"),(0,p.kt)("p",null,"is \u5173\u952e\u5b57\u4e00\u822c\u7528\u4e8e\u51fd\u6570\u8fd4\u56de\u503c\u7c7b\u578b\u4e2d\uff0c\u5224\u65ad\u53c2\u6570\u662f\u5426\u5c5e\u6027\u67d0\u4e00\u7c7b\u578b\uff0c\u5e76\u6839\u636e\u7ed3\u679c\u8fd4\u56de\u5bf9\u5e94\u7684\u5e03\u5c14\u7c7b\u578b\u3002"),(0,p.kt)("p",null,"\u4e0b\u9762\u5224\u65ad isError \u51fd\u6570\u4f20\u5165\u7684\u53c2\u6570 ",(0,p.kt)("inlineCode",{parentName:"p"},"value")," \u662f\u5426\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"Error")," \u7c7b\u578b"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},'export const ErrorBox = ({ error }: { error: unknown }) => {\n  if (error?.message) {\n    return <Typography.Text type={"danger"}>{error?.message}</Typography.Text>;\n  }\n  return null;\n}\n\n')),(0,p.kt)("p",null,"\u4e0a\u9762 ErrorBox \u7ec4\u4ef6 \u6839\u636e props \u4f20\u9012 error \u5bf9\u8c61\uff0c ",(0,p.kt)("inlineCode",{parentName:"p"},"error")," \u56e0\u4e3a\u6709\u53ef\u80fd\u662f null \u4e5f\u6709\u53ef\u80fd\u6709\u503c\uff0c\u4e0d\u80fd\u786e\u5b9a\uff0c\u6240\u4ee5\u5b9a\u4e49 ",(0,p.kt)("inlineCode",{parentName:"p"},"unkown")," \u7c7b\u578b\uff0c\u60f3\u6839\u636e ",(0,p.kt)("inlineCode",{parentName:"p"},"error?.message"),"\u5224\u65ad\u662f\u5426\u6709\u503c\uff0c\u6709\u7684\u8bdd\u5c31\u663e\u793a\u81ea\u5df1\u7684\u9519\u8bef\u4fe1\u606f\u7ec4\u4ef6\u3002\u4f46\u662f error \u63d0\u793a '\u5bf9\u8c61\u7684\u7c7b\u578b\u4e3a \"unknown\"\u3002'\uff0c\u4f46\u662f\u7531\u4e8e\u51fd\u6570\u5d4c\u5957 TypeScript \u4e0d\u80fd\u8fdb\u884c\u6b63\u786e\u7684\u7c7b\u578b\u5224\u65ad\uff0c\u8fd9\u65f6\u5019\u53ef\u4ee5\u4f7f\u7528 is \u51c6\u786e\u8303\u56f4\u3002"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},'// \u7c7b\u578b\u5b88\u536b\uff0c\u5c06 value \u7684\u7c7b\u578b\u7f29\u5c0f\u4e3a Error\nconst isError = (value: any): value is Error => value?.message;\n\nexport const ErrorBox = ({ error }: { error: unknown }) => {\n  if (isError(error)) {\n    return <Typography.Text type={"danger"}>{error?.message}</Typography.Text>;\n  }\n  return null;\n}\n\n')),(0,p.kt)("p",null,"\u4e5f\u53ef\u4ee5\u770b\u8fd9\u91cc ",(0,p.kt)("a",{parentName:"p",href:"http://www.imooc.com/wiki/typescriptlesson/is.html"},"TypeScript \u5173\u952e\u5b57"),"\u3002"),(0,p.kt)("h3",{id:"infer"},"infer"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"infer"),"\u63a8\u65ad\u7684\u53d8\u91cf\u7c7b\u578b\u662f\u6839\u636e\u80fd\u591f\u5339\u914d\u6700\u63a5\u8fd1 extends \u5de6\u8fb9\u80fd\u591f\u63a5\u6536\u7684\u7c7b\u578b\u4ece\u800c\u63a8\u65ad\u7684\u7c7b\u578b\uff0c\u4f1a\u5c1d\u8bd5\u5339\u914d\u6700\u9760\u8fd1\u7684\u7c7b\u578b\u3002"),(0,p.kt)("p",null,"infer \u5360\u4f4d\u7b26\u5173\u952e\u5b57\u51fa\u73b0\u7684\u4f4d\u7f6e\uff1a\u901a\u5e38\u51fa\u73b0\u5728\u4ee5\u4e0b\u4e09\u4e2a\u4f4d\u7f6e\u3002"),(0,p.kt)("ul",null,(0,p.kt)("li",{parentName:"ul"},"infer \u51fa\u73b0\u5728 extends \u6761\u4ef6\u8bed\u53e5\u540e\u7684\u51fd\u6570\u7c7b\u578b\u7684\u53c2\u6570\u7c7b\u578b\u4f4d\u7f6e\u4e0a\u3002"),(0,p.kt)("li",{parentName:"ul"},"infer \u51fa\u73b0\u5728 extends \u6761\u4ef6\u8bed\u53e5\u540e\u7684\u51fd\u6570\u7c7b\u578b\u7684\u8fd4\u56de\u503c\u7c7b\u578b\u4e0a\u3002"),(0,p.kt)("li",{parentName:"ul"},"infer \u4f1a\u51fa\u73b0\u5728\u7c7b\u578b\u7684\u6cdb\u578b\u5177\u4f53\u5316\u7c7b\u578b\u4e0a\u3002")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"\u6ce8\u610f\uff1ainfer \u53ea\u80fd\u51fa\u73b0\u5728 extends \u6761\u4ef6\u8bed\u53e5\u4e2d\u3002")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"infer P \u4e2d\u7684 P \u53ef\u4ee5\u63a5\u6536\u4efb\u4f55\u7c7b\u578b")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"\u4e3e\u4f8b\uff1a")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"type InferParamType<T> = T extends (param: infer P) => any ? P : T;\n\n")),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"infer P"),"\u5c31\u662f\u5728\u6761\u4ef6\u5224\u65ad\u4e2d\u7533\u660e\u7684\u65b0\u7684\u6cdb\u578b\uff0c\u5b83\u4f1a\u6839\u636e\u5b9e\u9645\u4f20\u5165\u7684\u6cdb\u578b\u7c7b\u578b\u63a8\u65ad\u51fa\u8be5\u6cdb\u578b\u7684\u5177\u4f53\u7c7b\u578b"),(0,p.kt)("p",null,"\u4e0a\u9762\u5de5\u5177\u7c7b\u578b ",(0,p.kt)("inlineCode",{parentName:"p"},"InferParmaType"),"\u7684\u4f5c\u7528\u662f\u62ff\u5230\u51fd\u6570\u7c7b\u578b\u7684\u53c2\u6570\u7c7b\u578b\uff0c\u4e0b\u9762\u6211\u4eec\u6765\u4f7f\u7528\u5b83\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"// \u5de5\u5177\u7c7b\u578b InferType\ntype InferParamType<T> = T extends (param: infer P) => any ? P : T;\n\ninterface Customer {\n  custname: string;\n  buymoney: number;\n}\n\ntype FuncType = (param: Customer) => string;\n\ntype InferResultType = InferParamType<FuncType>;\n\n")),(0,p.kt)("p",null,"\u6700\u7ec8 ",(0,p.kt)("inlineCode",{parentName:"p"},"InferResultType"),"\u63a5\u6536\u5230\u7684\u7c7b\u578b\u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"Customer"),"\uff1a"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/57978dd90afe4125bbf520533c329cda~tplv-k3u1fbpfcp-zoom-1.image",alt:null})),(0,p.kt)("p",null,"\u4e3a\u4ec0\u4e48\u5462\uff1f"),(0,p.kt)("p",null,"\u5f53\u6267\u884c\u5de5\u5177\u7c7b\u578b ",(0,p.kt)("inlineCode",{parentName:"p"},"InferParamType<FuncType>"),"\u76f8\u5f53\u4e8e\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"// type FuncType = (param: Customer) => string;\n\ntype InferParamType<FuncType> = FuncType extends (param: infer P) => any ? P : FuncType;\n\n")),(0,p.kt)("p",null,"\u610f\u601d\u662f\uff1a",(0,p.kt)("inlineCode",{parentName:"p"},"FuncType"),"\u7c7b\u578b\u662f\u5426\u6ee1\u8db3 ",(0,p.kt)("inlineCode",{parentName:"p"},"(param: infer P) => any")," \u5982\u679c\u6ee1\u8db3 \u5219\u8fd4\u56de ",(0,p.kt)("inlineCode",{parentName:"p"},"infer")," \u5b9a\u4e49\u7684\u53d8\u91cf ",(0,p.kt)("inlineCode",{parentName:"p"},"P"),"\uff0c\u5426\u8005\u8fd4\u56de ",(0,p.kt)("inlineCode",{parentName:"p"},"FuncType"),"\uff0c\u9996\u5148\u770b\u8fd4\u56de\u7c7b\u578b ",(0,p.kt)("inlineCode",{parentName:"p"},"any"),"\u6ee1\u8db3 ",(0,p.kt)("inlineCode",{parentName:"p"},"FuncType"),"\u7684\u8fd4\u56de\u7c7b\u578b ",(0,p.kt)("inlineCode",{parentName:"p"},"string"),"\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"infer"),"\u5b9a\u4e49\u7684\u53d8\u91cf\u7c7b\u578b ",(0,p.kt)("inlineCode",{parentName:"p"},"P"),"\u5b83\u662f\u53ef\u4ee5\u63a5\u6536\u4efb\u4f55\u7c7b\u578b\u4e5f\u5c31\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"infer")," \u63a8\u5bfc\u51fa\u7684\u7c7b\u578b\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"param"),"\u7684\u7c7b\u578b\u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"Customer"),"\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"P"),"\u5e76\u63a5\u6536\u5230\u4f1a\u88ab\u5b9a\u4e49\u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"Customer"),"\uff0c\u56e0\u6b64 ",(0,p.kt)("inlineCode",{parentName:"p"},"FuncType"),"\u7c7b\u578b\u80fd\u591f\u6ee1\u8db3\u7ea6\u675f\u6761\u4ef6\uff0c\u6240\u4ee5\u8fd4\u56de",(0,p.kt)("inlineCode",{parentName:"p"},"P"),"\u4e5f\u5c31\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"Customer"),"\u7c7b\u578b\u3002"),(0,p.kt)("p",null,"\u518d\u4e3e\u4e2a\u4e0d\u6210\u7acb\u7684\u4f8b\u5b50\uff1a"),(0,p.kt)("p",null,"\u8fd9\u91cc\u4ece\u65b0\u5b9a\u4e49",(0,p.kt)("inlineCode",{parentName:"p"},"FuncType"),"\u7684\u7c7b\u578b\uff0c\u589e\u52a0\u4e00\u4e2a nums \u53c2\u6570\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"// \u5de5\u5177\u7c7b\u578b InferType\n// type InferParamType<T> = T extends (param: infer P) => any ? P : T;\n\ntype FuncType = (param: Customer,nums: number) => string;\n\ntype InferResultType = InferParamType<FuncType>;\n\n")),(0,p.kt)("p",null,"\u6b64\u65f6 ",(0,p.kt)("inlineCode",{parentName:"p"},"InferResultType"),"\u5f97\u5230\u7684\u7c7b\u578b\u5c31\u662f \u4f20\u5165\u7684\u7c7b\u578b ",(0,p.kt)("inlineCode",{parentName:"p"},"FuncType"),"\uff1a"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fadbf16e58434a5886e1a4c9520c94eb~tplv-k3u1fbpfcp-zoom-1.image",alt:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fadbf16e58434a5886e1a4c9520c94eb~tplv-k3u1fbpfcp-zoom-1.image"})),(0,p.kt)("p",null,"\u56e0\u4e3a\u591a\u4e2a\u53c2\u6570\u51fd\u6570\u7c7b\u578b\uff0c\u4e0d\u6ee1\u8db3\u6bd4\u4ed6\u5c11\u7684\u53c2\u6570\u51fd\u6570\u7c7b\u578b\uff0c\u6240\u4ee5\u8fd4\u56de\u4e86 ",(0,p.kt)("inlineCode",{parentName:"p"},"FuncType"),"\u3002"),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"\u52a0\u5f3a\u7406\u89e3\u9898\uff08TS \u9762\u8bd5\u9898\u76ee\uff09\uff1a")),(0,p.kt)("p",null,"\u5b9e\u73b0\u4e00\u4e2a",(0,p.kt)("inlineCode",{parentName:"p"},"LeftTrim"),"\u5b57\u7b26\u4e32\u7c7b\u578b\u53bb\u5de6\u4fa7\u7a7a\u683c"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"type A = ' Hello World! ';\ntype B = LeftTrim<A>;\n\n")),(0,p.kt)("p",null,"\u7b54\u6848\uff1a"),(0,p.kt)("p",null,"\u4f7f\u7528 infer\uff0c\u4ee5\u53ca\u9012\u5f52\u3002"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"type LeftTrim<T extends string> = T extends ` ${infer R}` ? LeftTrim<R> : T\n\n")),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"infer"),"\u63a8\u5bfc\u51fa\u7684\u53d8\u91cf\u7c7b\u578b\u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"Hello World!")," \uff08Hello World! \u662f\u4e00\u4e2a\u5b57\u9762\u91cf\u7c7b\u578b\u5e76\u4e14\u6ca1\u6709\u7a7a\u683c\u7684\uff09\u6765 ",(0,p.kt)("inlineCode",{parentName:"p"},"R")," \u4fdd\u5b58\uff0c\u56e0\u4e3a\u6a21\u677f\u5b57\u7b26\u4e32\u4e2d\u524d\u9762\u53c8\u4e00\u4e2a\u7a7a\u683c\u4e86\uff0c\u7b2c\u4e00\u6b21\u4f1a\u6ee1\u8db3\u6761\u4ef6\uff0c\u6240\u4ee5\u4f1a\u9012\u5f52\u5c06\u53d8\u91cf R(Hello World! )\u518d\u6b21\u7ed9 ",(0,p.kt)("inlineCode",{parentName:"p"},"LeftTrim"),"\uff0c\u7b2c\u4e8c\u6b21\u8fdb\u5165 \u6b64\u65f6 ",(0,p.kt)("inlineCode",{parentName:"p"},"T")," \u7684\u7c7b\u578b\u662fHello World! \uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"extends")," \u540e\u9762\u7684\u7c7b\u578b\u4f1a\u53d8\u4e3a Hello World!\u8fd9\u4e2a\u6709\u7a7a\u683c\uff0c\u6b64\u65f6 ",(0,p.kt)("inlineCode",{parentName:"p"},"T")," \u7c7b\u578b\u662f\u6ca1\u6709\u7a7a\u683c\u4e86\u7684\uff0c\u6240\u4ee5\u4e0d\u6ee1\u8db3\u7ea6\u675f\u6761\u4ef6\uff0c\u8fd4\u56de ",(0,p.kt)("inlineCode",{parentName:"p"},"T"),",\u56e0\u6b64\u5f97\u5230\u7684\u662f\uff1a"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/297218fba2c849ff8eba0cb86bad2b00~tplv-k3u1fbpfcp-zoom-1.image",alt:null})),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"\u90a3\u4e48\u53bb\u6389\u53f3\u8fb9\u7684\u7a7a\u683c\u5c31\u662f\uff1a")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"type LeftTrim<T extends string> = T extends `${infer R} ` ? LeftTrim<R> : T\n\n")),(0,p.kt)("h3",{id:"typeof"},"typeof"),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"typeof"),"\u64cd\u4f5c\u7b26\u53ef\u4ee5\u7528\u6765\u5224\u65ad\u6570\u636e\u7684\u7c7b \u578b\u662f\u5426\u662f\u67d0\u4e2a\u539f\u59cb\u7c7b\u578b\uff08",(0,p.kt)("inlineCode",{parentName:"p"},"number"),"\u3001",(0,p.kt)("inlineCode",{parentName:"p"},"string"),"\u3001",(0,p.kt)("inlineCode",{parentName:"p"},"boolean"),",...\uff09\u548c\u5bf9\u8c61\u7c7b\u578b\u3002"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"interface User {\n    name: string;\n    useId: number;\n}\n\nconst obj: User = { name: 'ssn', useId: 888000 }\ntype TUser = typeof obj\n// type TUser = User\n\n")),(0,p.kt)("p",null,(0,p.kt)("strong",{parentName:"p"},"typeof \u7c7b\u578b\u4fdd\u62a4")),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"function greet(person: string | string[]): string | string[] {\n    if (typeof person === 'string') {\n        return `Hello, ${person}!`;\n    } else if (Array.isArray(person)) {\n        return person.map(name => `Hello, ${name}!`);\n    }\n    throw new Error('Unable to greet');\n}\ngreet('World');          // 'Hello, World!'\ngreet(['Jane', 'Joe']); // ['Hello, Jane!', 'Hello, Joe!']\n\n")),(0,p.kt)("p",null,(0,p.kt)("inlineCode",{parentName:"p"},"greet")," \u5185\u90e8\u4f1a ",(0,p.kt)("inlineCode",{parentName:"p"},"typeof")," \u5224\u65ad\u4f20\u9012\u7684\u53c2\u6570\u7684\u7c7b\u578b\uff0c\u6765\u505a\u5bf9\u5e94\u903b\u8f91\u662f\u8f93\u51fa\u5b57\u7b26\u4e32\uff0c\u8fd8\u662f\u5b57\u7b26\u4e32\u6570\u7ec4\u3002"),(0,p.kt)("h3",{id:"instance"},"instance"),(0,p.kt)("p",null,"\u4e0e",(0,p.kt)("inlineCode",{parentName:"p"},"typeof"),"\u7c7b\u4f3c\uff0c\u4f46\u662f\u4f5c\u7528\u65b9\u5f0f\u4e0d\u540c\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"instanceof"),"\u7c7b\u578b\u4fdd\u62a4\u662f\u901a\u8fc7\u6784\u9020\u51fd\u6570\u6765\u7ec6\u5316\u7c7b\u578b\u7684\u4e00\u79cd\u65b9\u5f0f\u3002"),(0,p.kt)("p",null,"instanceof \u7684\u53f3\u4fa7\u8981\u6c42\u662f\u4e00\u4e2a\u6784\u9020\u51fd\u6570\u3002"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"class Song {\n  constructor(public title: string, public duration: number) {}\n}\n\nclass Playlist {\n  constructor(public name: string, public songs: Song[]) {}\n}\n\nfunction getItemName(item: Song | Playlist) {\n  if(item instanceof Song) {\n    return item.title;\n  }\n  return item.name;\n}\n\nconst songName = getItemName(new Song('Wonderful Wonderful', 300000));\nconsole.log('Song name:', songName) // Song name: Wonderful Wonderful\n\nconst playlistName = getItemName(\nnew Playlist('The Best Songs', [new Song('The Man', 300000)])\n);\nconsole.log('Playlist name:', playlistName); // Playlist name: The Best Songs\n\n")),(0,p.kt)("p",null,"\u4e0a\u9762\u4ee3\u7801\uff0c",(0,p.kt)("inlineCode",{parentName:"p"},"getItemName")," \u51fd\u6570\u4e2d\u4f7f\u7528 ",(0,p.kt)("inlineCode",{parentName:"p"},"instanceof"),"\u64cd\u4f5c\u7b26\u6765\u63a8\u65ad\u4f20\u5165\u7684 ",(0,p.kt)("inlineCode",{parentName:"p"},"item")," \u53c2\u6570\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"Song")," \u7c7b\u578b\u8fd8\u662f Playlist ",(0,p.kt)("inlineCode",{parentName:"p"},"\u7c7b\u578b"),"\u6267\u884c\u5bf9\u5e94\u7684\u64cd\u4f5c\u3002"),(0,p.kt)("h3",{id:"keyof"},"keyof"),(0,p.kt)("p",null,"\u8bed\u6cd5\uff1a ",(0,p.kt)("inlineCode",{parentName:"p"},"keyof T")),(0,p.kt)("p",null,"\u8be5\u64cd\u4f5c\u7b26\u53ef\u4ee5\u7528\u4e8e\u83b7\u53d6 ",(0,p.kt)("inlineCode",{parentName:"p"},"T")," \u7c7b\u578b\u7684\u6240\u6709\u5df2\u77e5",(0,p.kt)("strong",{parentName:"p"},"\u516c\u5171\u5c5e\u6027\u952e"),"\uff0c\u5176\u8fd4\u56de\u7c7b\u578b\u662f\u8054\u5408\u7c7b\u578b\u3002"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"interface User {\n    name: string;\n    useId: number;\n}\ntype UserKeys = keyof User; // type UserKeys = 'name' | 'useId'\n\n")),(0,p.kt)("p",null,"\u5982\u679c\u5c5e\u6027\u88ab\u5b9a\u4e49\u4e3a\u79c1\u6709\u5c5e\u6027\uff1a"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"interface User {\n    name: string;\n    private useId: number;\n}\ntype UserKeys = keyof User; // type UserKeys = 'useId'\n\n")),(0,p.kt)("p",null,"\u5728 TypeScript \u89c4\u5b9a\u4e2d\uff0c\u5982\u679c\u8bf4\u662f ",(0,p.kt)("inlineCode",{parentName:"p"},"keyof any"),"\u90a3\u4e48\u6b64\u65f6",(0,p.kt)("inlineCode",{parentName:"p"},"any"),"\u5305\u542b\u7684\u7c7b\u578b\u4e3a ",(0,p.kt)("inlineCode",{parentName:"p"},"string | number | symbol"),"\u3002"),(0,p.kt)("p",null,(0,p.kt)("img",{parentName:"p",src:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/46e44180f5dc4e62b8437fcfe88d9f56~tplv-k3u1fbpfcp-zoom-1.image",alt:"https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/46e44180f5dc4e62b8437fcfe88d9f56~tplv-k3u1fbpfcp-zoom-1.image"})),(0,p.kt)("h3",{id:"\u7d22\u5f15\u8bbf\u95ee\u64cd\u4f5c\u7b26\u53f7-tk"},"\u7d22\u5f15\u8bbf\u95ee\u64cd\u4f5c\u7b26\u53f7 T","[K]"),(0,p.kt)("p",null,"\u8bed\u6cd5\uff1a ",(0,p.kt)("inlineCode",{parentName:"p"},"T[K]")),(0,p.kt)("p",null,"\u7c7b\u4f3c\u4e8e JS \u4e2d\u4f7f\u7528\u5bf9\u8c61\u7d22\u5f15\u7684\u65b9\u5f0f\uff0c\u53ea\u4e0d\u8fc7js \u4e2d\u662f\u8fd4\u56de\u5bf9\u8c61\u5c5e\u6027\u7684\u503c\uff0c\u800c\u5728 TypeScript \u4e2d\u8fd4\u56de\u7684\u662f T"),(0,p.kt)("p",null,"\u5bf9\u5e94\u5c5e\u6027 K \u7684\u7c7b\u578b\u3002"),(0,p.kt)("pre",null,(0,p.kt)("code",{parentName:"pre",className:"language-ts"},"interface User {\n    name: string;\n    useId: number;\n}\n\ntype UserNmaeType = User['name'] // string\n\n")),(0,p.kt)("h2",{id:"\u6700\u540e"},"\u6700\u540e"),(0,p.kt)("p",null,"\u5982\u679c\u5bf9\u4e0a\u8ff0\u6709\u4e0d\u660e\u767d\uff0c\u6216\u8005\u63cf\u8ff0\u6709\u8bef\uff0c\u6b22\u8fce\u8bc4\u8bba\u533a\u6307\u51fa~\n\u60f3\u8bd5\u8bd5\u81ea\u5df1\u5b66\u5f97\u600e\u4e48\u6837\u4e86\uff0c\u53ef\u4ee5\u505a\u505a\u8fd948\u9053TS\u7ec3\u4e60\u9898\uff0c\u4e0b\u9762\u8fd9\u7bc7\u6587\u7ae0\u91cc\uff0c\u4e5f\u9644\u6709\u7b54\u6848\u52a0\u89e3\u6790\u3002"),(0,p.kt)("span",null,"\n    ",(0,p.kt)("ins",{parentName:"span",className:"adsbygoogle",style:{display:"block",textAlign:"center"},"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-3487507367729662","data-ad-slot":"1964508460"}),"\n  ",(0,p.kt)("script",{parentName:"span"},"\n     (adsbygoogle = window.adsbygoogle || []).push({});\n  ")),(0,p.kt)("p",null,(0,p.kt)("a",{parentName:"p",href:"https://juejin.cn/post/7062903623470514207"},"\u6765\u505a\u505a\u8fd9 48 \u9053 TypeScript \u7ec3\u4e60\u9898\uff0c\u8bd5\u8bd5\u4f60\u7684 TS \u5b66\u5f97\u600e\u4e48\u6837\u4e86\uff01")))}m.isMDXComponent=!0}}]);