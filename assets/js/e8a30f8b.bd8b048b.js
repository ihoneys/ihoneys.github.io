(self.webpackChunkzxuqian_cn=self.webpackChunkzxuqian_cn||[]).push([[7028],{2122:function(e,t,n){"use strict";function a(){return(a=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var a in n)Object.prototype.hasOwnProperty.call(n,a)&&(e[a]=n[a])}return e}).apply(this,arguments)}n.d(t,{Z:function(){return a}})},9756:function(e,t,n){"use strict";function a(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}n.d(t,{Z:function(){return a}})},3905:function(e,t,n){"use strict";n.d(t,{Zo:function(){return m},kt:function(){return d}});var a=n(7294);function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function r(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function o(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?r(Object(n),!0).forEach((function(t){l(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):r(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,l=function(e,t){if(null==e)return{};var n,a,l={},r=Object.keys(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||(l[n]=e[n]);return l}(e,t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);for(a=0;a<r.length;a++)n=r[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(l[n]=e[n])}return l}var i=a.createContext({}),u=function(e){var t=a.useContext(i),n=t;return e&&(n="function"==typeof e?e(t):o(o({},t),e)),n},m=function(e){var t=u(e.components);return a.createElement(i.Provider,{value:t},e.children)},c={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},p=a.forwardRef((function(e,t){var n=e.components,l=e.mdxType,r=e.originalType,i=e.parentName,m=s(e,["components","mdxType","originalType","parentName"]),p=u(n),d=l,k=p["".concat(i,".").concat(d)]||p[d]||c[d]||r;return n?a.createElement(k,o(o({ref:t},m),{},{components:n})):a.createElement(k,o({ref:t},m))}));function d(e,t){var n=arguments,l=t&&t.mdxType;if("string"==typeof e||l){var r=n.length,o=new Array(r);o[0]=p;var s={};for(var i in t)hasOwnProperty.call(t,i)&&(s[i]=t[i]);s.originalType=e,s.mdxType="string"==typeof e?e:l,o[1]=s;for(var u=2;u<r;u++)o[u]=n[u];return a.createElement.apply(null,o)}return a.createElement.apply(null,n)}p.displayName="MDXCreateElement"},2474:function(e,t,n){"use strict";n.r(t),n.d(t,{frontMatter:function(){return o},contentTitle:function(){return s},metadata:function(){return i},toc:function(){return u},default:function(){return c}});var a=n(2122),l=n(9756),r=(n(7294),n(3905)),o={title:"Vue vuex",date:new Date("2019-03-17T00:00:00.000Z"),sidebar:"auto",tags:["vue"]},s=void 0,i={unversionedId:"skill/vue/vue2/vue12",id:"skill/vue/vue2/vue12",isDocsHomePage:!1,title:"Vue vuex",description:"state",source:"@site/docs/skill/vue/vue2/vue12.md",sourceDirName:"skill/vue/vue2",slug:"/skill/vue/vue2/vue12",permalink:"/docs/skill/vue/vue2/vue12",version:"current",frontMatter:{title:"Vue vuex",date:"2019-03-17T00:00:00.000Z",sidebar:"auto",tags:["vue"]},sidebar:"skill",previous:{title:"Vue \u7f16\u7a0b\u5f0f\u7684\u5bfc\u822a",permalink:"/docs/skill/vue/vue2/vue11"},next:{title:"Vue \u4f7f\u7528Echarts",permalink:"/docs/skill/vue/vue2/vue13"}},u=[{value:"state",id:"state",children:[]},{value:"getters",id:"getters",children:[]},{value:"actions",id:"actions",children:[]},{value:"mutations",id:"mutations",children:[]},{value:"vuex \u4f7f\u7528\u6b65\u9aa4",id:"vuex-\u4f7f\u7528\u6b65\u9aa4",children:[]},{value:"modules",id:"modules",children:[]}],m={toc:u};function c(e){var t=e.components,n=(0,l.Z)(e,["components"]);return(0,r.kt)("wrapper",(0,a.Z)({},m,n,{components:t,mdxType:"MDXLayout"}),(0,r.kt)("h2",{id:"state"},"state"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"state:{\n    count:0,\n    obj:{},\n    arr:[]\n    ...\n}\n")),(0,r.kt)("p",null,"Vuex\u7684state\u72b6\u6001\u662f\u54cd\u5e94\u5f0f\uff0c\u662f\u501f\u52a9vue\u7684data\u662f\u54cd\u5e94\u5f0f\uff0c\u5c06state\u5b58\u5165vue\u5b9e\u4f8b\u7ec4\u4ef6\u7684data\u4e2d\uff1bVuex\u7684getters\u5219\u662f\u501f\u52a9vue\u7684\u8ba1\u7b97\u5c5e\u6027computed\u5b9e\u73b0\u6570\u636e\u5b9e\u65f6\u76d1\u542c\u3002"),(0,r.kt)("h2",{id:"getters"},"getters"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"getters:{\n  fullname(state,getters){\n\n  }\n}\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53c2\u6570",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"state")," \u672c",(0,r.kt)("inlineCode",{parentName:"li"},"vuex"),"\u5bf9\u8c61\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"state")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"getters")," \u672c",(0,r.kt)("inlineCode",{parentName:"li"},"vuex"),"\u5bf9\u8c61\u4e2d\u7684",(0,r.kt)("inlineCode",{parentName:"li"},"getters"))))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// moduleA \u4e2d\u7684 getters\nconst moduleA = {\n  state: {\n    msg: "123456"\n  },\n  getters:{\n  fullname(state,getters,rootState){\n      rootState.count\n    }\n  }\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53c2\u6570",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"rootState"),": \u6307\u6839\u5bf9\u8c61\u4e0a\u7684\u72b6\u6001")))),(0,r.kt)("h2",{id:"actions"},"actions"),(0,r.kt)("span",null,"\n    ",(0,r.kt)("ins",{parentName:"span",className:"adsbygoogle",style:{display:"block",textAlign:"center"},"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-3487507367729662","data-ad-slot":"3539166782"}),"\n  ",(0,r.kt)("script",{parentName:"span"},"\n     (adsbygoogle = window.adsbygoogle || []).push({});\n  ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'  actions: {\n    changesome(context,payload) {\n      context.commit("xxx", payload)\n    }\n  },\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53c2\u6570",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"context"),": \u4e0a\u4e0b\u6587(\u6240\u5728\u5bf9\u8c61\u7684)"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"payload"),": \u63a5\u6536\u7684\u53c2\u6570")))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// moduleA \u4e2d\u7684 actions\nconst moduleA = {\n  state: {\n    msg: "123456"\n  },\n  actions: {\n    changesome(context,payload) {\n      context.commit("xxx", payload)\n    }\n  },\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u53c2\u6570"),(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"context"),": \u4e0a\u4e0b\u6587(\u6307\u7684\u662f",(0,r.kt)("inlineCode",{parentName:"li"},"moduleA"),"\u7684\u4e0a\u4e0b\u6587)",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"commit()"),":\u63d0\u4ea4\u5230\u5f53\u524d\u6a21\u5757"),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"rootGetters"),": \u6839\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"getters")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"rootState")," : \u6839\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"state")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"state"),": \u5f53\u524d\u6a21\u5757\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"state")))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"payload"),": \u63a5\u6536\u7684\u53c2\u6570"))),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("p",{parentName:"li"},"\u53ef\u7ed3\u6784\u51fa\u6765\u4f7f\u7528"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},"  actions: {\n    changesome({state,commit,rootState}) {\n      //...\n    }\n  },\n")),(0,r.kt)("h2",{id:"mutations"},"mutations"),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const store = new Vuex.Store({\n  mutations: {\n    updates(state, item) {\n      state.info.name = "\u5f20" + item\n    },\n\n  },\n})\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u53c2\u6570",(0,r.kt)("ul",{parentName:"li"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"state"),":\u672c ",(0,r.kt)("inlineCode",{parentName:"li"},"vuex")," \u5bf9\u8c61\u7684 ",(0,r.kt)("inlineCode",{parentName:"li"},"state")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"item"),": \u4f20\u9012\u7684\u6570\u636e")))),(0,r.kt)("h2",{id:"vuex-\u4f7f\u7528\u6b65\u9aa4"},"vuex \u4f7f\u7528\u6b65\u9aa4"),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u65b9\u5f0f\u4e00")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u9875\u9762\u4e2d --\x3e\n<button @click="changeone">\u4fee\u6539</button>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u7ec4\u4ef6\u3001\u9875\u9762\u4e2d\u7684 methods\nmethods: {\n  changeone() {\n    let item = "msg";\n    this.$store.dispatch("changeone", item); //\u4f20\u9012\u53c2\u6570\n  },\n},\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// store/index.js\nconst store = new Vuex.Store({\n  state: {  },\n  getters: {  },\n  actions: {\n    changeone(context, payload) { // \u63a5\u53d7\u53c2\u6570 itme\n      setTimeout(() => {\n        context.commit("updates", payload) // \u4f20\u9012\u53c2\u6570\n      }, 1000);\n    },\n  },\n})\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// store/index.js\nconst store = new Vuex.Store({\n  state: {  },\n  getters: {  },\n  mutations: {\n    updates(state, payload) { // \u63a5\u6536\u53c2\u6570\n      state.info.name = "\u5f20" + payload // \u4f7f\u7528\u53c2\u6570\n    },\n  }\n})\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u65b9\u5f0f\u4e8c(\u4e3b\u8981\u662f\u4f20\u53c2\u65b9\u5f0f\u4e0d\u540c)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u9875\u9762\u4e2d --\x3e\n<button @click="changeone">\u4fee\u6539</button>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u7ec4\u4ef6\u3001\u9875\u9762\u4e2d\u7684 methods\nmethods: {\n  changeone() {\n    let item = "msg";\n    this.$store.dispatch("changeone", {\n          msg:"\u6211\u5b8c\u6210\u4e86",\n          success:()=>{\n            console.log("\u72b6\u6001\u662f\u5b8c\u6210\u4e86")\n        }\n    }); //\u4f20\u9012\u53c2\u6570\n  },\n},\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// store/index.js\nconst store = new Vuex.Store({\n  state: {  },\n  getters: {  },\n  actions: {\n    changeone(context, payload) { // \u63a5\u53d7\u53c2\u6570 itme\n      setTimeout(() => {\n        context.commit("updates", payload) // \u4f20\u9012\u53c2\u6570\n        console.log(payload.msg)\n        payload.sccess()\n      }, 1000);\n    },\n  },\n})\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// store/index.js\nconst store = new Vuex.Store({\n  state: {  },\n  getters: {  },\n  mutations: {\n    updates(state, payload) { // \u63a5\u6536\u53c2\u6570\n      state.info.name = "\u5f20" + payload // \u4f7f\u7528\u53c2\u6570\n    },\n  }\n})\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},"\u65b9\u5f0f\u4e09(\u4f18\u96c5promise)")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},'\x3c!-- \u9875\u9762\u4e2d --\x3e\n<button @click="changeone">\u4fee\u6539</button>\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// \u7ec4\u4ef6\u3001\u9875\u9762\u4e2d\u7684 methods\nmethods: {\n  changeone() {\n    let item = "msg";\n    this.$store\n    .dispatch("changeone", "\u72b6\u6001\u662f\u5b8c\u6210\u4e86")//\u4f20\u9012\u53c2\u6570\n    .then((res,rej)=>{\n      console.log("\u72b6\u6001\u662f\u5b8c\u6210\u4e86")\n      console.log(res)\n    })\n  },\n},\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// store/index.js\nconst store = new Vuex.Store({\n  state: {  },\n  getters: {  },\n  actions: {\n    changeone(context, payload) { // \u63a5\u53d7\u53c2\u6570 itme\n      return new Promise((resolve,reject)=>{\n        setTimeout(() => {\n        context.commit("updates", payload) // \u4f20\u9012\u53c2\u6570\n        console.log(payload)\n        resolve("123")\n      }, 1000);\n      })\n    },\n  },\n})\n')),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'// store/index.js\nconst store = new Vuex.Store({\n  state: {  },\n  getters: {  },\n  mutations: {\n    updates(state, payload) { // \u63a5\u6536\u53c2\u6570\n      state.info.name = "\u5f20" + payload // \u4f7f\u7528\u53c2\u6570\n    },\n  }\n})\n')),(0,r.kt)("h2",{id:"modules"},"modules"),(0,r.kt)("ol",null,(0,r.kt)("li",{parentName:"ol"},"\u5b9a\u4e49",(0,r.kt)("inlineCode",{parentName:"li"},"modules"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const moduleA = {\n  state: {\n    msg: "123456"\n  },\n}\nconst moduleB = {\n  state: {\n    msg: "ABC"\n  },\n  actions: {\n\n  }\n}\nconst store = new Vuex.Store({\n  state: {  },\n  getters: {  },\n  actions: {  },\n  mutations: {  },\n  modules: {\n    A: moduleA,\n    B: moduleB\n  }\n})\n')),(0,r.kt)("ol",{start:2},(0,r.kt)("li",{parentName:"ol"},"\u4f7f\u7528")),(0,r.kt)("div",{className:"admonition admonition-warning alert alert--danger"},(0,r.kt)("div",{parentName:"div",className:"admonition-heading"},(0,r.kt)("h5",{parentName:"div"},(0,r.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,r.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"12",height:"16",viewBox:"0 0 12 16"},(0,r.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M5.05.31c.81 2.17.41 3.38-.52 4.31C3.55 5.67 1.98 6.45.9 7.98c-1.45 2.05-1.7 6.53 3.53 7.7-2.2-1.16-2.67-4.52-.3-6.61-.61 2.03.53 3.33 1.94 2.86 1.39-.47 2.3.53 2.27 1.67-.02.78-.31 1.44-1.13 1.81 3.42-.59 4.78-3.42 4.78-5.56 0-2.84-2.53-3.22-1.25-5.61-1.52.13-2.03 1.13-1.89 2.75.09 1.08-1.02 1.8-1.86 1.33-.67-.41-.66-1.19-.06-1.78C8.18 5.31 8.68 2.45 5.05.32L5.03.3l.02.01z"}))),"warning")),(0,r.kt)("div",{parentName:"div",className:"admonition-content"},(0,r.kt)("ul",{parentName:"div"},(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"state")," \u4f7f\u7528\u65f6\u8981\u533a\u522b ",(0,r.kt)("inlineCode",{parentName:"li"},"moduleA")," \u548c",(0,r.kt)("inlineCode",{parentName:"li"},"moduleB")),(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"getters")," ",(0,r.kt)("inlineCode",{parentName:"li"},"actions")," ",(0,r.kt)("inlineCode",{parentName:"li"},"mutations")," \u4e0d\u533a\u5206 \u6a21\u5757,\u53ea\u8981\u540d\u5b57\u5bf9\u5373\u53ef\u3002"),(0,r.kt)("li",{parentName:"ul"},"\u5728\u6a21\u5757\u4e2d\u4f7f\u7528getters \u6709\u7b2c\u4e09\u4e2a\u53c2\u6570")))),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"state")," \u4e2d\u7684\u6570\u636e\u4f7f\u7528")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-html"},"  <div>{{ $store.state.A.msg }}</div>\n")),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"methods"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'methods:{\n   changesome() {\n      this.$store.dispatch("changesome");\n    },\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"actions"))),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'\nconst moduleA = {\n  state: {\n    msg: "123456"\n  },\n  actions: {\n    changesome(context) {\n      context.commit("changesome")\n    }\n  },\n  mutations: {}\n}\n')),(0,r.kt)("ul",null,(0,r.kt)("li",{parentName:"ul"},(0,r.kt)("inlineCode",{parentName:"li"},"motutions"))),(0,r.kt)("span",null,"\n    ",(0,r.kt)("ins",{parentName:"span",className:"adsbygoogle",style:{display:"block",textAlign:"center"},"data-ad-layout":"in-article","data-ad-format":"fluid","data-ad-client":"ca-pub-3487507367729662","data-ad-slot":"1964508460"}),"\n  ",(0,r.kt)("script",{parentName:"span"},"\n     (adsbygoogle = window.adsbygoogle || []).push({});\n  ")),(0,r.kt)("pre",null,(0,r.kt)("code",{parentName:"pre",className:"language-js"},'const moduleA = {\n  state: {\n    msg: "123456"\n  },\n  actions: { },\n  mutations: {\n    changesome(state) {\n      state.msg = "ABC"\n    }\n  }\n}\n')))}c.isMDXComponent=!0}}]);