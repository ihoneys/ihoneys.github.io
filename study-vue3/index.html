<!doctype html>
<html lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="ğŸ‰ä¸€æšå°å‰ç«¯ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="ğŸ‰ä¸€æšå°å‰ç«¯ Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="ğŸ‰ä¸€æšå°å‰ç«¯" href="/opensearch.xml">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="/katex/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<link rel="stylesheet" href="https://fonts.font.im/css?family=Raleway:500,700&amp;display=swap"><title data-react-helmet="true">ä»é¡¹ç›®æ­å»ºåˆ°å­¦ä¹  Vue3 æ–°ç‰¹æ€§ - ğŸ‰ä¸€æšå°å‰ç«¯</title><meta data-react-helmet="true" property="og:title" content="ä»é¡¹ç›®æ­å»ºåˆ°å­¦ä¹  Vue3 æ–°ç‰¹æ€§ - ğŸ‰ä¸€æšå°å‰ç«¯"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="Vue2.x å·²ç»å‘å±•äº†å¾ˆä¹…ï¼Œå‘¨è¾¹çš„ç”Ÿæ€ä¹Ÿéƒ½éå¸¸çš„å®Œå–„äº†ï¼Œä½¿ç”¨ Vue.js å‡ ä¹æ»¡è¶³å¼€å‘æˆ‘ä»¬çš„æ—¥å¸¸æ‰€æœ‰éœ€æ±‚ï¼Œåœ¨æˆ‘ä»¬çœ‹æ¥ Vue.js æ¡†æ¶å·²ç»è¶³å¤Ÿä¼˜ç§€ï¼Œè€Œå°¤å¤§çœ‹æ¥è¿˜ä¸å¤Ÿå®Œç¾ï¼Œä»ç„¶è¿˜æœ‰è®¸å¤šç—›ç‚¹å€¼å¾—è®©ä»–å»ä¼˜åŒ–ï¼Œ æ‰€ä»¥åç»­æœ‰äº† Vue3.0 çš„å‡çº§ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦å¯¹ Vue3 æ–°ç‰¹æ€§çš„ä¸€äº›çŸ¥è¯†ç‚¹ä½¿ç”¨åˆ†äº«ã€‚"><meta data-react-helmet="true" property="og:description" content="Vue2.x å·²ç»å‘å±•äº†å¾ˆä¹…ï¼Œå‘¨è¾¹çš„ç”Ÿæ€ä¹Ÿéƒ½éå¸¸çš„å®Œå–„äº†ï¼Œä½¿ç”¨ Vue.js å‡ ä¹æ»¡è¶³å¼€å‘æˆ‘ä»¬çš„æ—¥å¸¸æ‰€æœ‰éœ€æ±‚ï¼Œåœ¨æˆ‘ä»¬çœ‹æ¥ Vue.js æ¡†æ¶å·²ç»è¶³å¤Ÿä¼˜ç§€ï¼Œè€Œå°¤å¤§çœ‹æ¥è¿˜ä¸å¤Ÿå®Œç¾ï¼Œä»ç„¶è¿˜æœ‰è®¸å¤šç—›ç‚¹å€¼å¾—è®©ä»–å»ä¼˜åŒ–ï¼Œ æ‰€ä»¥åç»­æœ‰äº† Vue3.0 çš„å‡çº§ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦å¯¹ Vue3 æ–°ç‰¹æ€§çš„ä¸€äº›çŸ¥è¯†ç‚¹ä½¿ç”¨åˆ†äº«ã€‚"><meta data-react-helmet="true" property="og:image" content="https://ihoneys.github.io/img/ihoneys.png"><meta data-react-helmet="true" name="twitter:image" content="https://ihoneys.github.io/img/ihoneys.png"><meta data-react-helmet="true" property="og:url" content="https://ihoneys.github.io/study-vue3"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ihoneys.github.io/study-vue3"><link data-react-helmet="true" rel="alternate" href="https://ihoneys.github.io/study-vue3" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://ihoneys.github.io/study-vue3" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://W5C57B27UD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b90b5f9c.css">
<link rel="preload" href="/assets/js/runtime~main.852a1eea.js" as="script">
<link rel="preload" href="/assets/js/main.84c18cd6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Lucasçš„åšå®¢</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/skill/">éšè®°</a><a class="navbar__item navbar__link" href="/docs/interview/">é¢ç»</a><a class="navbar__item navbar__link" href="/docs/tools/">æ—¥å¸¸å¼€å‘å·¥å…·</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Lucasçš„åšå®¢</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/skill/">éšè®°</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/">é¢ç»</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tools/">æ—¥å¸¸å¼€å‘å·¥å…·</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">è¿‘æœŸæ–‡ç« </div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/docusaurus-algolia">åˆ©ç”¨ Algolia å®ç°å†…å®¹æœç´¢</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/react-ts-type">React TS ä¸­çš„ Event Handler åŸæ¥è¿™æ ·çœ‹çš„</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/react-performance">React æ€§èƒ½ä¼˜åŒ–</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/react-use-svg">React ä½¿ç”¨ SVG çš„å§¿åŠ¿</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/ts-types">TypeScript ä¸€äº›é«˜çº§ç±»å‹å·¥å…·å®ç°</a></li></ul></nav></aside><main class="col col--7"><div class="sc-AxirZ ddyydL"><div class="row" style="margin:0"><div class="col col--12 article__details"><article><header><h1 class="margin-bottom--md blogPostTitle_nmLu text--center">ä»é¡¹ç›®æ­å»ºåˆ°å­¦ä¹  Vue3 æ–°ç‰¹æ€§</h1></header><p class="single-post--date text--center">2021å¹´8æœˆ Â· é¢„è®¡é˜…è¯»æ—¶é—´ï¼š 8 åˆ†é’Ÿ</p><div class="text--center margin-bottom--xs padding-bottom--xs"><div class="post__tags-container margin-top--none margin-bottom--md"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 margin-right--md" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" color="#c4d3e0"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><a class="post__tags margin-right--sm" style="font-size:0.75em;font-weight:500" href="/tags/vue-3">vue3</a></div></div><section class="sc-AxjAm bFgQpc markdown"><p>Vue2.x å·²ç»å‘å±•äº†å¾ˆä¹…ï¼Œå‘¨è¾¹çš„ç”Ÿæ€ä¹Ÿéƒ½éå¸¸çš„å®Œå–„äº†ï¼Œä½¿ç”¨ Vue.js å‡ ä¹æ»¡è¶³å¼€å‘æˆ‘ä»¬çš„æ—¥å¸¸æ‰€æœ‰éœ€æ±‚ï¼Œåœ¨æˆ‘ä»¬çœ‹æ¥ Vue.js æ¡†æ¶å·²ç»è¶³å¤Ÿä¼˜ç§€ï¼Œè€Œå°¤å¤§çœ‹æ¥è¿˜ä¸å¤Ÿå®Œç¾ï¼Œä»ç„¶è¿˜æœ‰è®¸å¤šç—›ç‚¹å€¼å¾—è®©ä»–å»ä¼˜åŒ–ï¼Œ æ‰€ä»¥åç»­æœ‰äº† Vue3.0 çš„å‡çº§ï¼Œè¿™ç¯‡æ–‡ç« ä¸»è¦å¯¹ Vue3 æ–°ç‰¹æ€§çš„ä¸€äº›çŸ¥è¯†ç‚¹ä½¿ç”¨åˆ†äº«ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="åˆ›å»º-vue3-é¡¹ç›®"></a>åˆ›å»º Vue3 é¡¹ç›®<a class="hash-link" href="#åˆ›å»º-vue3-é¡¹ç›®" title="Direct link to heading">#</a></h2><p>ä¸‹é¢æˆ‘ä»¬å·¥ç¨‹åŒ–æ–¹å¼åˆ›å»º Vue3 é¡¹ç›®ï¼Œå¯ä»¥ä½¿ç”¨ Vite å·¥å…·åˆ›å»ºé¡¹ç›®æˆ–è€…ä½¿ç”¨å®˜æ–¹æœ€æ–°ç‰ˆ Vue-cli è„šæ‰‹æ¶æ­å»ºã€‚</p><p>Vite æ­å»ºé¡¹ç›®å¦‚ä¸‹ï¼š</p><p>è¿è¡Œå‘½ä»¤ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// </span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> å®‰è£…</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> init vite@latest my-vue3-app --template vue-ts</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// ts å®‰è£…</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">npm</span><span class="token plain"> init vite@latest my-vue3-app --template vue-ts</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// </span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> å®‰è£…</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> create vite my-vue3-app --template vue</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¿™é‡Œæˆ‘é€‰æ‹© yarn å®‰è£…ï¼Œå®‰è£…é€Ÿåº¦æ›´å¿«ä¸€äº›ã€‚</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/ab67260cda5a4943a181b893e46ffcf1~tplv-k3u1fbpfcp-watermark.image" alt="image-20210803213912292.png"></p><p>å®‰è£…å®Œæ¯•ï¼Œä¾æ¬¡è¿è¡Œæç¤ºå‘½ä»¤å³å¯ï¼Œå°±åˆ›å»ºæˆåŠŸäº†ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> my</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">vue3</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">app</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">public</span><span class="token plain">                  </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> å…¬å…±æ–‡ä»¶å¤¹</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> favicon</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ico</span><span class="token plain">         </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> ç½‘ç«™çš„æ˜¾ç¤ºå›¾æ ‡</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> src                     </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> æºæ–‡ä»¶ç›®å½•ï¼Œç¼–å†™çš„ä»£ç åŸºæœ¬éƒ½åœ¨è¿™ä¸ªç›®å½•ä¸‹</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vue</span><span class="token plain">             </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> æ ¹ç»„ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> main</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ts</span><span class="token plain">             </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> å…¥å£é¡µé¢</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> shims</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">vue</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ts</span><span class="token plain">      </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> å®šä¹‰æ–‡ä»¶ï¼Œå› ä¸º</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vueç»“å°¾çš„æ–‡ä»¶åœ¨tsä¸­ä¸è®¤å¯ï¼Œæ‰€ä»¥è¦æœ‰å®šä¹‰æ–‡ä»¶</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> vite</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">d</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ts</span><span class="token plain">       </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> å®¢æˆ·ç«¯ç±»å‹ç­‰è¯´æ˜æ–‡ä»¶ï¼ˆå¯çœ‹å®˜ç½‘https</span><span class="token operator" style="color:#393A34">:</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">cn</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vitejs</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">dev</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">guide</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">features</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">html</span><span class="token plain">#hot</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">module</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">replacementï¼‰</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> assets              </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> é™æ€èµ„æºæ–‡ä»¶ï¼Œæ¯”å¦‚å›¾ç‰‡</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">|</span><span class="token plain">   </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> logo</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">png</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> components          </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token maybe-class-name">Vueçš„ç»„ä»¶æ–‡ä»¶ï¼Œè‡ªå®šçš„ç»„ä»¶å¯ä»¥å†™åœ¨è¿™</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token maybe-class-name">HelloWorld</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">vue</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> index</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">html</span><span class="token plain">              </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> å…¥å£çš„htmlæ–‡ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">package</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">lock</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">json</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">package</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">json</span><span class="token plain">            </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> å‘½ä»¤é…ç½®å’ŒåŒ…ç®¡ç†æ–‡ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">README</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">md</span><span class="token plain">               </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> é¡¹ç›®çš„è¯´æ˜æ–‡ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> tsconfig</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">json</span><span class="token plain">           </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> </span><span class="token maybe-class-name">TypeScript</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">|</span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> vite</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">ts</span><span class="token plain">          </span><span class="token operator" style="color:#393A34">--</span><span class="token plain"> vite ç›¸å…³é…ç½®</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¿™é‡Œé¡¹ç›®ç›®å½•ç»“æ„ç”Ÿæˆ æˆ‘ä»¬ä½¿ç”¨ <code>mddir</code> ç”Ÿæˆã€‚</p><p>å¯åŠ¨æˆåŠŸï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/96267d9c068e4364957df2cf55a9423f~tplv-k3u1fbpfcp-watermark.image" alt="image-20210803221515421.png"></p><p>ä¹Ÿå¯ä»¥ä½¿ç”¨ vue-cli å®˜æ–¹æœ€æ–°ç‰ˆï¼Œå‡çº§ä¹‹ååˆ›å»ºé¡¹ç›®ä¹‹å‰ä¼šè®©ä½ é€‰æ‹© Vue.js çš„æ¡†æ¶ç‰ˆæœ¬ï¼Œé€‰æ‹© Vue3 ç‰ˆæœ¬å³å¯ï¼Œå¦‚å›¾ï¼š</p><p>ä½¿ç”¨ Vue-cli åˆ›å»ºï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly bash"><pre tabindex="0" class="prism-code language-bash codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">yarn</span><span class="token plain"> global </span><span class="token function" style="color:#d73a49">add</span><span class="token plain"> @vue/cli</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åˆ›å»ºé¡¹ç›®ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly shell"><pre tabindex="0" class="prism-code language-shell codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">vue create my-vue3-app</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>é€‰æ‹© Vue3 ç‰ˆæœ¬å³å¯ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/42e23fda80c54a118d96c24d0092fd95~tplv-k3u1fbpfcp-watermark.image" alt="image-20210803214840860.png"></p><p>å®‰è£…å®Œæ¯•åå°±å¯ä»¥ä½¿ç”¨ Vue3 æ¨¡å¼ ç¼–å†™äº†ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setup-å…¥å£å‡½æ•°"></a>setup() å…¥å£å‡½æ•°<a class="hash-link" href="#setup-å…¥å£å‡½æ•°" title="Direct link to heading">#</a></h2><p><strong>setup æ˜¯ä»€ä¹ˆ</strong></p><p>setup å®ƒå°†æ¥å—ä¸¤ä¸ªå‚æ•°ï¼špropsã€contextã€‚å¯ä»¥è¿”å›ä¸€ä¸ªå¯¹è±¡ï¼Œå¯¹è±¡çš„å±æ€§å¦‚æœè¢«å“åº”å¼å®šä¹‰ï¼Œå°†åœ¨æ¨¡æ¿ä¸Šè¿›è¡Œå“åº”å¼æ¸²æŸ“ã€‚å®ƒä¼šåœ¨ Vue2.x ä¸­çš„ beforeCreate ä¹‹å created ä¹‹å‰æ‰§è¡Œï¼Œä¹Ÿå°±æ˜¯åœ¨ beforeMount ä¹‹å‰æ‰§è¡Œã€‚</p><ul><li>props</li></ul><p>props æ˜¯å“åº”å¼çš„ï¼Œå½“ä¼ å…¥æ–°çš„ prop æ—¶ï¼Œå®ƒå°†è¢«æ›´æ–°ã€‚</p><blockquote><p>å®˜ç½‘ï¼šå› ä¸º props æ˜¯å“åº”å¼çš„ï¼Œæˆ‘ä»¬ä¸èƒ½ä½¿ç”¨ ES6 è§£æ„ï¼Œå› ä¸ºå®ƒä¼šæ¶ˆé™¤ prop çš„å“åº”æ€§ã€‚</p></blockquote><p>å¦‚æœéœ€è¦è§£æ„ï¼Œå¯ä»¥ä½¿ç”¨ <code>toRefs</code> å®Œæˆå®‰å…¨æ“ä½œã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// example.vue import { toRefs } from &#x27;vue&#x27; setup(props) { const { number } =</span></span><span class="token-line" style="color:#393A34"><span class="token plain">toRefs(props) console.log(number.value) }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li><p>context</p><p>context ä¼šæš´éœ²ä¸‰ä¸ªç»„ä»¶çš„ property</p><ul><li>attrsï¼šç»„ä»¶å±æ€§</li><li>slotsï¼šæ’æ§½</li><li>emitï¼šå‘ç»„ä»¶å¤–æš´éœ²å±æ€§ï¼ŒåŒ vue2.x çš„ <code>this.$emit</code></li></ul></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">setup(props, context) { const {attrs, slots, emit} = context }</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><blockquote><p>setup ä¸­æ²¡æœ‰ thisï¼Œä¼šè¾“å‡ºä¸º undefined</p></blockquote><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="createapp"></a>createApp<a class="hash-link" href="#createapp" title="Direct link to heading">#</a></h2><p>è°ƒç”¨ createApp ä¼šè¿”å›ä¸€ä¸ªå®ä¾‹</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createApp </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vue&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">App</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./App.vue&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createApp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¿™ä¸ª app å®ä¾‹ä¸ŠæŒ‚è½½å…¨å±€ç›¸å…³æ–¹æ³•</p><ul><li><p>æ³¨å†Œå…¨å±€ç»„ä»¶</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...çœç•¥ createApp å¼•å…¥</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">Header</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@/components/Header/Index.vue&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// æ³¨å†Œä¸€ä¸ªåä¸º Header çš„ç»„ä»¶</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Header&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Header</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>æ³¨å†Œè‡ªå®šä¹‰æŒ‡ä»¤</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">directive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;focus&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">mounted</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">el</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    el</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">focus</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>å…¨å±€ mixin</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">mixin</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">created</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;å…¨å±€mixin&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li><li><p>æŒ‚è½½å…¨å±€å±æ€§å’Œæ–¹æ³•</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">globalProperties</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$filters</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">decrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">sm4Decrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æ¨¡æ¿ä½¿ç”¨ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {{ $filters(value) }}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><ul><li>setup å…¥å£å‡½æ•°ä¸­ä½¿ç”¨ <code>$filters</code></li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> appContext</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> config</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> globalProperties</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> $filters </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getCurrentInstance</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">$filters</span><span class="token punctuation" style="color:#393A34">,</span><span class="token string" style="color:#e3116c">&#x27;filters&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div></li></ul><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/fd22041434994dc08eecee2dbb0fca16~tplv-k3u1fbpfcp-watermark.image" alt="image-20210810164347748.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç”Ÿå‘½å‘¨æœŸ"></a>ç”Ÿå‘½å‘¨æœŸ<a class="hash-link" href="#ç”Ÿå‘½å‘¨æœŸ" title="Direct link to heading">#</a></h2><p>Vue3.x ä¸­å»æ‰äº† <code>beforeCreate</code>å’Œ <code>created</code> æ”¹ä¸º<code>setup</code>ä»£æ›¿ã€‚</p><table><thead><tr><th><strong>Vue2</strong></th><th><strong>Vue3</strong></th></tr></thead><tbody><tr><td>beforeCreate</td><td><strong>setup</strong>ä»£æ›¿</td></tr><tr><td>created</td><td><strong>setup</strong>ä»£æ›¿</td></tr><tr><td>beforeMount</td><td>onBeforeMount</td></tr><tr><td>mounted</td><td>onMounted</td></tr><tr><td>beforeUpdate</td><td>onBeforeUpdate</td></tr><tr><td>updated</td><td>onUpdated</td></tr><tr><td>beforeDestroy</td><td>onBeforeUnmount</td></tr><tr><td>destroyed</td><td>onUnmounted</td></tr><tr><td>activated</td><td>onActivated</td></tr><tr><td>deactivated</td><td>onDeactivated</td></tr><tr><td>errorCaptured</td><td>onErrorCaptured</td></tr><tr><td></td><td>onRenderTracked</td></tr><tr><td></td><td>onRenderTriggered</td></tr></tbody></table><p>æ€»çš„æ¥è¯´ Vue3 çš„å£°æ˜å‘¨æœŸæ²¡æœ‰å¤ªå¤§å˜åŒ–ï¼Œåç§°ç›¸æ¯”è¾ƒ Vue2.x çš„åç§°å¼€å¤´å¤šäº† <code>on</code>ï¼Œä»¥åŠæ–°å¢çš„è°ƒè¯•å‡½æ•°ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="methods"></a>Methods<a class="hash-link" href="#methods" title="Direct link to heading">#</a></h2><p>Vue2 äº‹ä»¶æ–¹æ³• é€šå¸¸å®šä¹‰åœ¨ methods ä¸­ï¼ŒVue3 é€šè¿‡å®šä¹‰æ–¹æ³•åœ¨ <code>setup</code> å…¥å£å‡½æ•°å†…ï¼Œå¹¶è¿”å›å®ƒå³å¯ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;button @click=&quot;handleClick&quot;&gt;+1&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// .. setup(props, ctx) { const handleClick = (e) =&gt; { console.log(&#x27;+1&#x27;) }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">return { handleClick, }; },</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ä»å­ç»„ä»¶è§¦å‘è‡ªå®šä¹‰äº‹ä»¶ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// å­ç»„ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;button @click=&quot;handleClick&quot;&gt;+1&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// .. setup(props, ctx) { const handleClick = (e) =&gt; { ctx.emit(&quot;handleClick&quot;) }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">return { handleClick, }; }, // çˆ¶ç»„ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;Parent @handleClick=&quot;count&quot; /&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>Vue3.x ä¸­è‡ªå®šä¹‰äº‹ä»¶ï¼Œåªéœ€è¦ä» setup çš„ç¬¬äºŒä¸ªå‚æ•°ä¸­ context ä¸­æ‹¿åˆ° emitï¼Œä¸å† <code>this.$emit()</code></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ref-reactivetoreftorefs"></a>ref ,reactive,toRef,toRefs<a class="hash-link" href="#ref-reactivetoreftorefs" title="Direct link to heading">#</a></h2><p><strong>ref</strong></p><p>ref å‡½æ•°æ¥å—ä¸€ä¸ªå†…éƒ¨å€¼ï¼ˆå¯ä»¥æ˜¯åŸºæœ¬ç±»å‹ä¸­çš„ stringã€booleanã€arrayã€objectã€nullã€undefined ç­‰ï¼‰å¹¶è¿”å›ä¸€ä¸ªå“åº”å¼ä¸”å¯å˜çš„ ref å¯¹è±¡ã€‚ref å¯¹è±¡å…·æœ‰æŒ‡å‘å†…éƒ¨å€¼çš„å•ä¸ª <code>property .value</code>ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;{{ number }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import { defineComponent, ref } from &quot;vue&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default defineComponent({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: &quot;example&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  setup(props, ctx) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const number = ref(0); // å“åº”å¼number</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // èµ‹å€¼</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    number.value = 1;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>reactive</strong></p><p>ä¸ reactive åŒ ref ä¸€æ ·è¿”å›ä¸€ä¸ªå“åº”å¼ï¼Œä½†æ˜¯ä¸ä¼šå­˜åœ¨ <code>.value</code> å±æ€§ï¼Œä¸ Vue2 ä¸­çš„ Vue.observable() ä¸€ä¸ªæ¦‚å¿µã€‚åªèƒ½æ¥æ”¶å¼•ç”¨æ•°æ®ç±»å‹ï¼</p><p>å¦‚ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;{{ observable.number }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">setup(props, ctx) { const observable = reactive({ number: 0, }); // number èµ‹å€¼</span></span><span class="token-line" style="color:#393A34"><span class="token plain">observable.number = 1; return { observable, }; },</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>toRefs</strong></p><p>é€šä¿—æ¥è¯´å°±æ˜¯å¸®åŠ©æˆ‘ä»¬è§£æ„å“åº”å¼å¯¹è±¡å±æ€§ã€‚</p><blockquote><p>ä¸Šé¢è¯´åˆ°ï¼Œprops æ˜¯å“åº”å¼çš„ï¼Œæ‰€ä»¥æ— æ³•ä½¿ç”¨ ES6 ç»“æ„ï¼Œå› ä¸ºä¼šæ¶ˆé™¤å“åº”æ€§ã€‚</p></blockquote><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;button @click=&quot;handleClick&quot;&gt;+1&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;{{ number }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// ... props: { number: { type: Number, default: 0, }, }, setup(props, ctx) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">let { number } = props; const handleClick = () =&gt; { console.log(&#x27;number&#x27;:</span></span><span class="token-line" style="color:#393A34"><span class="token plain">number) }; return { handleClick, }; },</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ç‚¹å‡»é¡µé¢å†…å®¹æˆ‘ä»¬è¾“å‡ºçš„æ˜¯ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/f6b9f5c39b57423580a144da72503da3~tplv-k3u1fbpfcp-watermark.image" alt="image-20210803235151962.png"></p><p>æ­¤æ—¶è¾“å‡ºå˜æˆäº†ä¸€ä¸ªæ™®é€šå€¼ã€‚</p><p><strong>æ³¨æ„ï¼šprops ä¸éœ€è¦éœ€é€šè¿‡ setup å‡½æ•° returnï¼Œä¹Ÿå¯ä»¥åœ¨ template è¿›è¡Œç»‘å®šå¯¹åº”çš„å€¼</strong></p><p>ä½¿ç”¨ toRefs</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;button @click=&quot;handleClick&quot;&gt;+1&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;{{ number }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// ... å¯¼å…¥ props: { number: { type: Number, default: 0, }, }, setup(props, ctx)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">{ let { number } = toRefs(props); const handleClick = () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">console.log(&#x27;number&#x27;: number) }; return { handleClick, }; },</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å†æ¬¡è¾“å‡ºï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/7b3b4412639a42d7a71338bffbbf2a27~tplv-k3u1fbpfcp-watermark.image" alt="image-20210803235614177.png"></p><p>è¿™æ ·å¯ä»¥ä¸ç”¨ç ´ååŸæœ¬çš„ props</p><p>é‡è¦ç”¨é€”æ¥äº†ï¼Œä¹‹å‰æˆ‘ä»¬å®šä¹‰ä¸€ä¸ª reactive å“åº”å¼å¯¹è±¡ï¼Œæ¨¡æ¿å–å€¼ä¸­éœ€è¦ observable.number , å¦‚æœæœ‰å¤šä¸ªæ¯ä¸€ä¸ªéƒ½éœ€è¦ observable.x è·å–ï¼Œä¸èƒ½åƒå®šä¹‰ ref ä¸€æ ·ç›´æ¥æ‹¿åˆ°ï¼Œè¿™æ—¶å€™æˆ‘ä»¬å¯ä»¥ä½¿ç”¨ toRefs åœ¨ä¸ä¸¢å¤±å“åº”æ€§çš„æƒ…å†µä¸‹å¯¹è¿”å›çš„å¯¹è±¡è¿›è¡Œåˆ†è§£/æ‰©æ•£ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;{{ number }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// ... setup(props, ctx) { const observable = reactive({ number: 0, }); return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">...toRefs(observable), }; },</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>toRef</strong></p><p>toRef çš„ç”¨æ³•ï¼Œå°±æ˜¯å¤šäº†ä¸€ä¸ªå‚æ•°ï¼Œå…è®¸é’ˆå¯¹æŸä¸ª key è¿›è¡ŒåŒ…è£…</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">toRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">props</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;number&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;number:&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/62927403987347cfb3c9c529091cc233~tplv-k3u1fbpfcp-watermark.image" alt="image-20210803235614177.png"></p><p>ä¹Ÿå¯ä»¥ç”¨æ¥ä¸ºæºå“åº”å¼å¯¹è±¡ä¸Šçš„ property æ€§åˆ›å»ºä¸€ä¸ª <code>ref</code>ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> ctx</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> observable </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reactive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">toRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">observable</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;number&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 0</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="watcheffect--watch-ç›‘å¬å™¨"></a>watchEffect &amp; watch ç›‘å¬å™¨<a class="hash-link" href="#watcheffect--watch-ç›‘å¬å™¨" title="Direct link to heading">#</a></h2><p><strong>watchEffect</strong></p><p>ä»–æ¥æ”¶ä¸€ä¸ªå›è°ƒå‡½æ•°ï¼Œä¸éœ€è¦æŒ‡å®šç›‘å¬è°ï¼Œåªè¦åœ¨å›è°ƒå‡½æ•°ä¸­ä½¿ç”¨äº†å®šä¹‰çš„å“åº”å¼å±æ€§ï¼Œå®ƒä¼šè‡ªåŠ¨æ”¶é›†ä¾èµ–ï¼Œå¹¶åœ¨å…¶ä¾èµ–å˜æ›´æ—¶é‡æ–°è¿è¡Œè¯¥å‡½æ•°ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">watchEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// 0</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// ä¸€ç§’ånumberæ”¹å˜å†æ¬¡æ‰§è¡Œ watchEffect ï¼Œè¾“å‡ºä¸º 2</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9bdb5590420e4c47b79ab734b21c925d~tplv-k3u1fbpfcp-watermark.image" alt="image-20210805114339085.png"></p><p>ç›´ç™½çš„æ„æ€å°±æ˜¯ï¼Œå† <code>watchEffect</code> æ¥æ”¶çš„å‡½æ•°å†…ä½¿ç”¨åˆ°äº†å“åº”å¼å€¼ï¼Œå‘ç”Ÿæ”¹å˜å°±ä¼šé‡æ–°è¿è¡Œè¯¥å‡½æ•°ã€‚</p><p><strong>åœæ­¢ç›‘å¬</strong></p><p>watchEffect ä¼šè¿”å›ä¸€ä¸ªåœæ­¢å‡½æ•°ï¼Œè°ƒç”¨å®ƒä¼šåœæ­¢ç›‘å¬ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">setup</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">props</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> stop </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">watchEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setInterval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">stop</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">2000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åœ¨ä¸¤ç§’åä¼šå¬è§ç›‘å¬ number å€¼çš„å˜åŒ–ã€‚</p><p><strong>æ¸…é™¤å‰¯ä½œç”¨</strong></p><p>ä¼ å…¥çš„å‡½æ•°å¯ä»¥æ¥æ”¶ä¸€ä¸ª <code>onInvalidate</code> å‡½æ•°ä½œå…¥å‚ï¼Œ ç”¨æ¥æ³¨å†Œæ¸…ç†å¤±æ•ˆæ—¶çš„å›è°ƒã€‚</p><p>æ³¨æ„ï¼šonInvalidate() æ‰§è¡Œæ—¶æœºåªæœ‰åœ¨ä¾èµ–äº†å“åº”å¼å±æ€§æ³¨å†Œçš„æ—¶å€™æ‰ä¼šæ‰§è¡Œå›è°ƒã€‚</p><p>æ‰§è¡Œå¤±æ•ˆå›è°ƒæ—¶æœºï¼š</p><ul><li>å‰¯ä½œç”¨å³å°†é‡æ–°æ‰§è¡Œæ—¶ï¼Œä¹Ÿå°±æ˜¯ä¾èµ–å‘ç”Ÿæ”¹å˜æ—¶ï¼Œé»˜è®¤æ³¨å†Œæ—¶å°±ä¼šæ‰§è¡Œã€‚</li><li>ç»„ä»¶å¸è½½æ—¶</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token function" style="color:#d73a49">watchEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">onInvalidate</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token comment" style="color:#999988;font-style:italic">// do something...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">onInvalidate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// æ³¨å†Œ/ç»„ä»¶å¸è½½æ—¶</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>é€šå¸¸æˆ‘ä»¬ç”¨ <code>watchEffect </code>è§£å†³å­ç»„ä»¶ props å±æ€§æ”¹å˜ï¼Œå­ç»„ä»¶ä¸ä¼šé‡æ–°æ¸²æŸ“é—®é¢˜ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// example.vue</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;{{ number }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import { defineComponent, reactive, toRefs, watchEffect } from &quot;vue&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default defineComponent({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  name: &quot;example&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  props: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    number: { type: Number, default: 0 },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  setup(props) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const state = reactive({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number: 0,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    watchEffect(() =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      state.number = props.number;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...toRefs(state),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><strong>watch</strong></p><p>Vue3 çš„ watch ä¸ Vue2 çš„æ¦‚å¿µå·®ä¸å¤šï¼Œç›‘å¬é’ˆå¯¹æŸä¸€ä¸ªå€¼çš„å˜åŒ–ã€‚è€Œä¸”æ³¨å†Œæ—¶å¹¶ä¸ä¼šç«‹å³æ‰§è¡Œï¼Œåªæœ‰æ¥æŒ‡å®šä¾èµ–å‘ç”Ÿæ”¹å˜æ˜¯æ‰ä¼šæ‰§è¡Œå›è°ƒå‡½æ•°ï¼Œçœ‹çœ‹å®ƒçš„åŸºç¡€ç”¨æ³•ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ç›‘å¬å•ä¸ª</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> number </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">watch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">newVal</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> oldVal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newVal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> oldVal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å¯¹è±¡æ·±åº¦ç›‘å¬</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> obj </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> name</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;watch&quot;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">watch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  obj</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">newVal</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> oldVal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newVal</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> oldVal</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    deep</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç›‘å¬å¤šä¸ª</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">watch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">a</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> b</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter punctuation" style="color:#393A34">[</span><span class="token parameter">newValA</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> newValB</span><span class="token parameter punctuation" style="color:#393A34">]</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> </span><span class="token parameter punctuation" style="color:#393A34">[</span><span class="token parameter">oldValA</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> oldValB</span><span class="token parameter punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token console class-name">console</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">log</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">newValA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> newValB</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> oldValA</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> oldValB</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ä½¿ç”¨ reactive å®šä¹‰å“åº”å¼æ•°æ®ï¼Œå¹¶æƒ³ä¾¦å¬å•ä¸ªçš„æ—¶å€™ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ä¾¦å¬ä¸€ä¸ª getter</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reactive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> count</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// ç›´æ¥ state.count ä¼šæŠ¥é”™</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">watch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">count</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">count</span><span class="token parameter punctuation" style="color:#393A34">,</span><span class="token parameter"> prevCount</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">/* ... */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="computed-è®¡ç®—å±æ€§"></a>computed è®¡ç®—å±æ€§<a class="hash-link" href="#computed-è®¡ç®—å±æ€§" title="Direct link to heading">#</a></h2><p>ä¸ Vue2 ç”¨æ³•ç›¸åŒå·®ä¸å¤šï¼ŒVue3 ä¸­åˆ é™¤äº† filters è¿‡æ»¤å™¨ï¼Œæˆ‘ä»¬å¯ä»¥ä½¿ç”¨ computed ä»£æ›¿å®ƒã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;{{ fullName }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;{{ accept(&quot;Foo&quot;) }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import { computed, defineComponent, ref } from &quot;vue&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default defineComponent({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  setup(props) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const firstName = ref(&quot;Foo&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const lastName = ref(&quot;Bar&quot;);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // åŸºç¡€ç”¨æ³•</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const fullName = computed(() =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      return firstName.value + lastName.value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ä¼ é€’å‚æ•°</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const accept = computed(() =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      return (fullName: string) =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        return fullName === &quot;Foo&quot; ? firstName.value : lastName.value;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      fullName,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      accept,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fragmentsï¼ˆç‰‡æ®µï¼‰"></a>fragmentsï¼ˆç‰‡æ®µï¼‰<a class="hash-link" href="#fragmentsï¼ˆç‰‡æ®µï¼‰" title="Direct link to heading">#</a></h2><p>ç‰‡æ®µçš„æ„æ€æ˜¯ Vue2.x ç»„ä»¶ä¸­ï¼Œå¹¶ä¸æ”¯æŒå¤šä¸ªæ ¹èŠ‚ç‚¹ï¼Œåœ¨ Vue3.x ç»„ä»¶ä¸­å¯ä»¥åŒ…å«å¤šä¸ªæ ¹èŠ‚ç‚¹ã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;fragments&quot;&gt;...&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;...&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ä»çˆ¶ç»„ä»¶ä¼ é€’ class ç»™å­ç»„ä»¶ ï¼Œå½“å­ç»„ä»¶çš„å¦‚æœåªæœ‰ä¸€ä¸ªæ ¹ç»„ä»¶çš„æ—¶å€™ï¼Œé»˜è®¤ä¼šå°† class æ”¾å…¥æ ¹çš„èŠ‚ç‚¹ä¸Šï¼Œå¦‚æœæœ‰å¤šä¸ªï¼Œé»˜è®¤ä¸ä¼šæ·»åŠ ï¼Œéœ€è¦ <code>v-bind=&quot;$attrs&quot;</code>æŒ‡å®šæ·»åŠ åˆ°çˆ¶èŠ‚ç‚¹ä¸Š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// å­ç»„ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;children&quot;&gt;children&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div v-bind=&quot;$attrs&quot;&gt;2222&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// çˆ¶ç»„ä»¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;fragments&quot;&gt;&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;Childern class=&quot;parant&quot; /&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æ•ˆæœï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/c144043973514973874143e3c648912d~tplv-k3u1fbpfcp-watermark.image" alt="image-20210806161151729.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç¬é—´ç§»åŠ¨ç»„ä»¶-teleport"></a>ç¬é—´ç§»åŠ¨ç»„ä»¶ Teleport<a class="hash-link" href="#ç¬é—´ç§»åŠ¨ç»„ä»¶-teleport" title="Direct link to heading">#</a></h2><p>teleport ç¿»è¯‘è¿‡æ¥å°±æ˜¯ä¼ é€çš„æ„æ€ï¼Œæ€ä¹ˆç†è§£è¿™ä¸ªç¬é—´ç§»åŠ¨ç»„ä»¶å‘¢ï¼Ÿå°±æ˜¯å°†ç»„ä»¶å†…çš„èŠ‚ç‚¹æ”¾å…¥æŒ‡å®š DOM ä½ç½®ä¸Šã€‚</p><p>åœ¨ <strong>Vue</strong>æˆ–è€… React é¡¹ç›®ä¸­éƒ½ä¼šæœ‰ä¸€ä¸ªæ ¹èŠ‚ç‚¹ï¼Œé¡µé¢å†…å®¹ä¹Ÿæ˜¯æŒ‚è½½åœ¨è¿™ä¸ªæ ¹èŠ‚ç‚¹ä¸‹ <code>&lt;div id=&#x27;app&#x27;&gt;&lt;/div&gt;</code>ï¼Œåœ¨å†™ä¸€äº›å¼¹çª—ç»„ä»¶æˆ–è€…å…¨å±€æç¤ºçŠ¶æ€ç»„ä»¶ï¼Œæˆ‘ä»¬å¸Œæœ›ç‹¬ç«‹ç»„ä»¶å¤–ï¼Œæ”¾åœ¨ä¸æ ¹ç»„ä»¶åŒçº§å…„å¼ŸèŠ‚ç‚¹ä¸‹ï¼Œè¿™æ ·æ›´å®¹æ˜“å—æ§åˆ¶ï¼Œä¸ä¼šè¢«æ ¹èŠ‚ç‚¹ä¸€äº› css å±æ€§å½±å“ã€‚ <code>Teleport</code>çš„ä½œç”¨å°±æ˜¯è®©æˆ‘ä»¬å¯ä»¥å°† Dom ç§»åŠ¨åˆ°ä¸€ä¸ªå“ªä¸ªå¹²å‡€çš„çˆ¶èŠ‚ç‚¹ä¸‹æ¸²æŸ“ HTMLï¼Œæ¥çœ‹çœ‹ç”¨æ³•</p><p>æˆ‘ä»¬åœ¨ <code>index.html</code> å†æ·»åŠ ä¸€ä¸ª <code>&lt;div&gt;id=&quot;app2&quot;&lt;/div&gt;</code>èŠ‚ç‚¹ï¼š</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/9ade9ff1d53443bda2c294a41cacab25~tplv-k3u1fbpfcp-watermark.image" alt="image-20210809213925150.png"></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div class=&quot;example&quot;&gt;example&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;teleport to=&quot;#app2&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      &lt;div class=&quot;teleport&quot;&gt;teleport&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;/teleport&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æ•ˆæœï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1f17e18815934aa2a76c3036c9f6a49b~tplv-k3u1fbpfcp-watermark.image" alt="image-20210809214417172.png"></p><p><code>&lt;div class=&quot;teleport&quot;&gt;teleport&lt;/div&gt;</code>Dom è¢«ç§»åŠ¨åˆ°äº† <code>id=&quot;app2&quot;</code>èŠ‚ç‚¹ä¸‹ï¼Œæ¥çœ‹çœ‹åŸºç¡€è¯­æ³•ï¼š</p><p>é€šè¿‡é€‰æ‹©å™¨ç§»åŠ¨åˆ°çˆ¶èŠ‚ç‚¹ä¸‹ä½ç½®ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// id</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">teleport to</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;#app2&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// class</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">teleport to</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;.teleport-class&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// data selector</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">teleport to</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;[data-app]&quot;</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// data selector çˆ¶èŠ‚ç‚¹</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div data</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">app</span><span class="token operator" style="color:#393A34">/</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// åŠ¨æ€æ›´æ–°</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">teleport </span><span class="token operator" style="color:#393A34">:</span><span class="token plain">to</span><span class="token operator" style="color:#393A34">=</span><span class="token string" style="color:#e3116c">&quot;currentRef&quot;</span><span class="token operator" style="color:#393A34">&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å¼‚æ­¥ç»„ä»¶-suspense"></a>å¼‚æ­¥ç»„ä»¶ Suspense<a class="hash-link" href="#å¼‚æ­¥ç»„ä»¶-suspense" title="Direct link to heading">#</a></h2><p>åœ¨æ¸²æŸ“ç»„ä»¶ä¹‹å‰ä¼šè¿›è¡Œä¸€äº›å¼‚æ­¥è¯·æ±‚ï¼Œåœ¨å¼‚æ­¥è¯·æ±‚æˆåŠŸæ•°æ®å®Œå…¨æ¸²æŸ“ä¹‹å‰æ¯”å¦‚åšä¸€äº› Loadingã€éª¨æ¶å±ï¼ˆSkeletonï¼‰ç­‰ä¸€äº›æ–¹æ¡ˆï¼Œ<code>&lt;Suspense &gt;</code> ç»„ä»¶èƒ½å¤Ÿæ›´å¥½çš„å¸®åŠ©å®ç°è¿™æ ·çš„éœ€æ±‚ã€‚è¯¥ç»„ä»¶æœ‰ä¸¤ä¸ªæ’æ§½ï¼Œä¸€ä¸ªæ˜¯å®Œå…¨è¯·æ±‚æˆåŠŸä¹‹åç­‰å¾…ç»„ä»¶æ ‘å¤„ç†å®Œæ¯•æ˜¾ç¤ºï¼Œä¸€ä¸ªæ˜¯æœªè¯·æ±‚æˆåŠŸè¿”å›æ•°æ®æ—¶å€™æ˜¾ç¤ºè¯¥å†…å®¹ã€‚æˆ‘ä»¬æ¥ç®€å•å†™ä¸ªåˆ—å­ï¼Œçœ‹çœ‹å®é™…æ“ä½œã€‚</p><p>Async.vue</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/1282cf84087d4fd395643efdc58d30ba~tplv-k3u1fbpfcp-watermark.image" alt="image-20210810155716528.png"></p><p>Suspense.vue</p><p>è¯·æ±‚è¿”å›ä¸€å¼ ç­¾åå›¾ç‰‡ï¼š</p><p><img src="https://p6-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/2617d0d8b684499d939a25d61fc50ca0~tplv-k3u1fbpfcp-watermark.image" alt="image-20210810155815161.png"></p><p>æ¥çœ‹çœ‹æ•ˆæœï¼š</p><p>ä¸ºäº†è®©æ•ˆæœæ›´æ˜æ˜¾ å¯ä»¥è‡ªå®šç½‘ç»œåŠ è½½é€Ÿåº¦ <code>Network</code> â†’ <code>No throtting</code> é€‰æ‹© <code>Add</code></p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/19d9c1bddab8405c9f9dccf9ef410b70~tplv-k3u1fbpfcp-watermark.image" alt="GIF 2021-8-10 16-07-58.gif"></p><p>gif ç”Ÿæˆå·¥å…·æˆ‘ä½¿ç”¨çš„æ˜¯ <a href="http://blog.bahraniapps.com/gifcam/#download" target="_blank" rel="noopener noreferrer">gitcam</a> å¾ˆå¥½ç”¨ï¼~</p><blockquote><p>ä½†æ˜¯å®˜æ–¹è¯´æ˜ï¼šSuspense æ˜¯ä¸€ä¸ªè¯•éªŒæ€§çš„æ–°ç‰¹æ€§å¹¶ä¸”å…¶ API å¯èƒ½éšæ—¶æ›´æ”¹ã€‚ç‰¹æ­¤å£°æ˜ä»¥ä¾¿ç¤¾åŒºèƒ½å¤Ÿä¸ºå½“å‰çš„å®ç°æä¾›åé¦ˆã€‚</p><p>å®ƒä¸åº”è¯¥è¢«ç”¨åœ¨ç”Ÿäº§ç¯å¢ƒã€‚</p></blockquote><p>æ§åˆ¶å°ä¹Ÿæœ‰æç¤º</p><p><img src="https://p3-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/5f03efbb1a90496dbdb1d91ff560ff75~tplv-k3u1fbpfcp-watermark.image" alt="image-20210810163905069.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å…³äºæ¨¡å—åŒ–ä½¿ç”¨"></a>å…³äºæ¨¡å—åŒ–ä½¿ç”¨<a class="hash-link" href="#å…³äºæ¨¡å—åŒ–ä½¿ç”¨" title="Direct link to heading">#</a></h2><p>å¯¹äºæ¨¡å—åŒ–çš„ç†è§£ï¼Œé€šä¿—çš„è¯´é€»è¾‘æŠ½ç¦»ï¼Œè®©ä»£ç èƒ½å¤Ÿå¤ç”¨ï¼Œä¼˜åŒ–ä»£ç ç»“æ„ï¼Œå¥½çš„ä»£ç å¯è¯»æ€§ï¼Œæ›´æœ‰åˆ©äºåæœŸçš„ç»´æŠ¤æ€§ã€‚Vue3.x çš„ CompositionAPI è®©æˆ‘ä»¬è¿™æ ·ä½¿ç”¨çš„ç†ç”±ä¹Ÿåœ¨æ­¤ï¼Œä¹Ÿå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç«  <a href="https://juejin.cn/post/6946387745208172558#heading-0" target="_blank" rel="noopener noreferrer">ä¸è¦å†ç”¨ vue2 çš„æ€ç»´å†™ vue3 äº†</a>ã€‚å†™ä¸€ä¸ªç®€å•çš„ä¾‹å­ã€‚</p><p>å°±æ˜¯åŠ  1ï¼Œå‡ 1</p><p>é€šå¸¸æˆ‘ä»¬éƒ½ä¼šè¿™æ ·å†™ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;module&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div&gt;{{ number }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;van-button @click=&quot;increase&quot;&gt;åŠ åŠ &lt;/van-button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;van-button @click=&quot;reduce&quot;&gt;å‡å‡&lt;/van-button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import { defineComponent, ref } from &quot;vue&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default defineComponent({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  setup() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const number = ref(0)</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const increase = () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number.value++</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const reduce = () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number.value--</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      increase,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      reduce</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">})</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æ²¡æœ‰æ¯›ç—…ï¼Œè¿™åªæ˜¯å…¶ä¸­ä¸€ä¸ªä¾‹å­ï¼Œå¦‚æœæœ‰æ›´å¤šæ›´å¤šçš„é€»è¾‘åŠŸèƒ½ï¼Œæˆ‘ä»¬è‚¯å®šä¹Ÿä¼šç»§ç»­å¾€<code>setup</code>å…¥å£å‡½æ•°å†…ç»§ç»­æ·»åŠ é€»è¾‘ï¼Œè¿™æ ·å°±å˜æˆæ‹‰é¢æ¡ï¼Œä»¥å‰é€šå¸¸çš„æ€ç»´å°±æ˜¯èƒ½å¤ç”¨çš„å°±æŠ½ç¦»ï¼Œæ²¡æœ‰å¤ç”¨çš„å°±ä¸€èµ·å†™ï¼Œå‘ç°æ…¢æ…¢ä¸€ä¸ªç»„ä»¶åŠŸèƒ½å¤šèµ·æ¥ï¼Œå˜å¾—éš¾ä»¥æŸ¥æ‰¾å¾ˆæ··ä¹±ã€‚</p><p>æˆ‘ä»¬ä¿®æ”¹ä¸€ä¸‹åˆ©ç”¨ CompositionAPI ç»™æˆ‘ä»¬çš„ç‰¹æ€§ä½¿ç”¨æ¨¡å—åŒ–çš„æ–¹å¼é‡æ–°ä¼˜åŒ–ä¸€ä¸‹ï¼Œä¹Ÿæ˜¯æˆ‘ä»¬å¸¸å¸¸æåˆ°çš„ hooks æ€ä¹ˆå†™ã€‚</p><p>useCount.ts</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly typescript"><pre tabindex="0" class="prism-code language-typescript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> ref </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vue&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token builtin">number</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">ref</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">increase</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">reduce</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">value</span><span class="token operator" style="color:#393A34">--</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token builtin">number</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    increase</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    reduce</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div class=&quot;module&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;div&gt;{{ number }}&lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;van-button @click=&quot;increase&quot;&gt;åŠ åŠ &lt;/van-button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    &lt;van-button @click=&quot;reduce&quot;&gt;å‡å‡&lt;/van-button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import { defineComponent } from &quot;vue&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import useCount from &quot;./useCount&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default defineComponent({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  setup() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è®¡ç®—é€»è¾‘</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const { number, increase, reduce } = useCount();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // å…¶ä»–é€»è¾‘</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      // ...useCount(),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      number,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      increase,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      reduce,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å¯ä»¥çœ‹åˆ°æˆ‘ä»¬åªéœ€è¦å¼•å…¥æ‹¿åˆ°ç›¸å…³çš„å€¼ <code>return</code> å³å¯ï¼Œé‡åˆ°å…¶ä»–é¡µé¢æœ‰ç›¸åŒé€»è¾‘çš„ï¼Œæˆ‘ä»¬åŒæ ·å¼•å…¥è¿”å›å³å¯ä½¿ç”¨ã€‚è¿™æ ·å†™å¯ä»¥è®©ä»£ç å¯è¯»æ€§ä¹Ÿæ›´é«˜ï¼Œæ›´åˆ©äºä»£ç åæœŸç»´æŠ¤ã€‚ä¹Ÿå¯ä»¥çœ‹çœ‹è¿™ç¯‡æ–‡ç« ä¸šåŠ¡ <a href="https://juejin.cn/post/6991441703979171871#heading-11" target="_blank" rel="noopener noreferrer">hooks ä½¿ç”¨</a>ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ€»ç»“"></a>æ€»ç»“<a class="hash-link" href="#æ€»ç»“" title="Direct link to heading">#</a></h2><p>Vue3 çš„ç‰ˆæœ¬å‡çº§æ”¹è¿›ï¼Œåœ¨æ€§èƒ½ä¼˜åŒ–ï¼Œæºç ä¼˜åŒ–ç­‰ç­‰æœ‰äº†å¾ˆå¤§çš„æå‡ï¼ŒCompositionAPI ä»£ç ç¼–å†™ä¹Ÿæ›´åŠ çš„å‡½æ•°å¼ï¼Œä½¿å¾—é€»è¾‘æŠ½ç¦»æ›´åŠ çµæ´»ï¼Œä¸ç”¨è¢« OptionsAPI é™åˆ¶æ€ç»´ã€‚</p><p>é¡¹ç›®ç”¨èµ·æ¥ï¼Œæ„Ÿå— Vue3 çš„å¿«ä¹~</p></section></article><footer class="article__footer padding-top--md margin-top--lg margin-bottom--lg"><div></div></footer></div></div></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/resolve-router4"><div class="pagination-nav__sublabel">ä¸‹ä¸€ç¯‡</div><div class="pagination-nav__label">Â« Vue3+Vue-router4 è§£å†³ history æ¨¡å¼é¡¹ç›®è®¿é—®ä»¥åŠ404é—®é¢˜</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/vite-vue3"><div class="pagination-nav__sublabel">ä¸Šä¸€ç¯‡</div><div class="pagination-nav__label">Vite + Vue3 é¡¹ç›®åŸºæ“ Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#åˆ›å»º-vue3-é¡¹ç›®" class="table-of-contents__link">åˆ›å»º Vue3 é¡¹ç›®</a></li><li><a href="#setup-å…¥å£å‡½æ•°" class="table-of-contents__link">setup() å…¥å£å‡½æ•°</a></li><li><a href="#createapp" class="table-of-contents__link">createApp</a></li><li><a href="#ç”Ÿå‘½å‘¨æœŸ" class="table-of-contents__link">ç”Ÿå‘½å‘¨æœŸ</a></li><li><a href="#methods" class="table-of-contents__link">Methods</a></li><li><a href="#ref-reactivetoreftorefs" class="table-of-contents__link">ref ,reactive,toRef,toRefs</a></li><li><a href="#watcheffect--watch-ç›‘å¬å™¨" class="table-of-contents__link">watchEffect &amp; watch ç›‘å¬å™¨</a></li><li><a href="#computed-è®¡ç®—å±æ€§" class="table-of-contents__link">computed è®¡ç®—å±æ€§</a></li><li><a href="#fragmentsï¼ˆç‰‡æ®µï¼‰" class="table-of-contents__link">fragmentsï¼ˆç‰‡æ®µï¼‰</a></li><li><a href="#ç¬é—´ç§»åŠ¨ç»„ä»¶-teleport" class="table-of-contents__link">ç¬é—´ç§»åŠ¨ç»„ä»¶ Teleport</a></li><li><a href="#å¼‚æ­¥ç»„ä»¶-suspense" class="table-of-contents__link">å¼‚æ­¥ç»„ä»¶ Suspense</a></li><li><a href="#å…³äºæ¨¡å—åŒ–ä½¿ç”¨" class="table-of-contents__link">å…³äºæ¨¡å—åŒ–ä½¿ç”¨</a></li><li><a href="#æ€»ç»“" class="table-of-contents__link">æ€»ç»“</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.852a1eea.js"></script>
<script src="/assets/js/main.84c18cd6.js"></script>
</body>
</html>