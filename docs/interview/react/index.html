<!doctype html>
<html lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="🍉一枚小前端 Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="🍉一枚小前端 Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="🍉一枚小前端" href="/opensearch.xml">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="/katex/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<link rel="stylesheet" href="https://fonts.font.im/css?family=Raleway:500,700&amp;display=swap"><title data-react-helmet="true">React - 🍉一枚小前端</title><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" property="og:url" content="https://ihoneys.github.io/docs/interview/react"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:version" content="current"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="docs-default-current"><meta data-react-helmet="true" property="og:title" content="React - 🍉一枚小前端"><meta data-react-helmet="true" name="description" content="React 解决了什么问题？"><meta data-react-helmet="true" property="og:description" content="React 解决了什么问题？"><meta data-react-helmet="true" property="og:image" content="https://ihoneys.github.io/img/ihoneys.png"><meta data-react-helmet="true" name="twitter:image" content="https://ihoneys.github.io/img/ihoneys.png"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ihoneys.github.io/docs/interview/react"><link data-react-helmet="true" rel="alternate" href="https://ihoneys.github.io/docs/interview/react" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://ihoneys.github.io/docs/interview/react" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://W5C57B27UD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b90b5f9c.css">
<link rel="preload" href="/assets/js/runtime~main.852a1eea.js" as="script">
<link rel="preload" href="/assets/js/main.84c18cd6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Lucas的博客</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/skill/">随记</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/docs/interview/">面经</a><a class="navbar__item navbar__link" href="/docs/tools/">日常开发工具</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">🌜</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">🌞</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="搜索"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">搜索</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Lucas的博客</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/skill/">随记</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/docs/interview/">面经</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tools/">日常开发工具</a></li></ul></div></div></div></nav><div class="main-wrapper docs-wrapper doc-page"><div class="docPage_31aa"><aside class="docSidebarContainer_3Kbt"><div class="sidebar_15mo"><nav class="menu menu--responsive thin-scrollbar menu_Bmed menuWithAnnouncementBar_2WvA" aria-label="Sidebar navigation"><button aria-label="Open menu" aria-haspopup="true" class="button button--secondary button--sm menu__button" type="button"><svg class="sidebarMenuIcon_fgN0" width="24" height="24" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/interview">简介</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link menu__link--active active" href="/docs/interview/react">React</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/vue">Vue</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/ts">TypeScript</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/js">JavaScript</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/css">CSS</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/webpack">Webpack</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/perf">性能优化</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/git">Git</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/http">网络协议</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/mobile">移动端开发问题</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/engineering">前端工程化</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/computer-base">计算机基础知识</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/algorithm">算法</a></li></ul></nav><button type="button" title="Collapse sidebar" aria-label="Collapse sidebar" class="button button--secondary button--outline collapseSidebarButton_1CGd"><svg width="20" height="20" aria-hidden="true" class="collapseSidebarButtonIcon_3E-R"><g fill="#7a7a7a"><path d="M9.992 10.023c0 .2-.062.399-.172.547l-4.996 7.492a.982.982 0 01-.828.454H1c-.55 0-1-.453-1-1 0-.2.059-.403.168-.551l4.629-6.942L.168 3.078A.939.939 0 010 2.528c0-.548.45-.997 1-.997h2.996c.352 0 .649.18.828.45L9.82 9.472c.11.148.172.347.172.55zm0 0"></path><path d="M19.98 10.023c0 .2-.058.399-.168.547l-4.996 7.492a.987.987 0 01-.828.454h-3c-.547 0-.996-.453-.996-1 0-.2.059-.403.168-.551l4.625-6.942-4.625-6.945a.939.939 0 01-.168-.55 1 1 0 01.996-.997h3c.348 0 .649.18.828.45l4.996 7.492c.11.148.168.347.168.55zm0 0"></path></g></svg></button></div></aside><main class="docMainContainer_3ufF"><div class="container padding-top--md padding-bottom--lg"><div class="row"><div class="col docItemCol_3FnS"><div class="docItemContainer_33ec"><article><div class="markdown"><header><h1 class="h1Heading_27L5">React</h1></header><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-解决了什么问题？"></a>React 解决了什么问题？<a class="hash-link" href="#react-解决了什么问题？" title="Direct link to heading">#</a></h2><p><a href="https://www.zhihu.com/question/39825457" target="_blank" rel="noopener noreferrer">参考地址</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="setstate-是同步还是异步？"></a>setState 是同步还是异步？<a class="hash-link" href="#setstate-是同步还是异步？" title="Direct link to heading">#</a></h2><p>同步。以异步的形式呈现是由于react 自身的优化机制导致的。因为每次调用 setState 都会触发更新（调用 disAction 浅比较 state 是否相等），react 会使用批量更新调用 batchedEventUpdates 方法，通过 isBatchingEventUpdates 标志位在 scheduleOnFiber 调和过程中根据这个开关进行批量更新。异步提高性能，多个状态合并到一起，从而减少 re-render 的调用执行。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="immutable"></a>immutable<a class="hash-link" href="#immutable" title="Direct link to heading">#</a></h2><p>react 对 state 中的对象引用未改变，那么react 会认为这个对象前后是没有发生变化的，这里只用了浅比较，引用地址相同，因此就认为 state 没有变化，导致页面不会重新渲染的问题。这就是 mtutale 的方式。</p><p>在setState，比如说 <code>setList([...list, &quot;new item&quot;]);</code>，这样是创建了一个新的对象，引用地址发生改变，这样 state 会发生改变，但是过多的创建新的对象会给 state 带来性能问题。<strong>immutable</strong> <strong>就是用来解决改问题的。</strong></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-组件通信的方式有哪些？"></a>React 组件通信的方式有哪些？<a class="hash-link" href="#react-组件通信的方式有哪些？" title="Direct link to heading">#</a></h2><ul><li>props，callback 回调</li><li>context</li><li>ref 传递</li><li>redux</li><li>event Bus 事件总线</li></ul><span>
    <ins class="adsbygoogle" style="display:block;text-align:center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3487507367729662" data-ad-slot="3539166782"></ins>
  <script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></span><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redux-是如何派发数据的，connect-原理？"></a>redux 是如何派发数据的，connect 原理？<a class="hash-link" href="#redux-是如何派发数据的，connect-原理？" title="Direct link to heading">#</a></h2><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1535745/1645368954776-c935d722-ca45-4480-813a-514f703be219.png" alt="https://cdn.nlark.com/yuque/0/2022/png/1535745/1645368954776-c935d722-ca45-4480-813a-514f703be219.png"></p><p>state 的变化，会导致 View 的变化，用户接触不到state，只能接触得到 View，所以 state 的变化，必须是View 导致的。Action 就是 View（也是我们页面呈现的组件） 发出的通知层由用户操作，会用 dispatch 发起更新动作，然后到了 reducer 层面，函数执行根据 Action 得到了一个新的 state，这个新的 state 存到 Store 里面，react-redux 结合 View 和 Store 自动更新 View（也就是我们的组件）。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="connect-原理"></a>connect 原理<a class="hash-link" href="#connect-原理" title="Direct link to heading">#</a></h2><p>connect 内部会返回一个高阶组件 <code>wrapWithConnect</code>，HOC 给返回的组件的 props 添加上 state dispatch，并且使用 useMemo 控制渲染只有改变的时候才更新渲染子组件。</p><p>参考链接：<a href="https://didiheng.com/front/2019-12-20.html#connect%E5%87%BD%E6%95%B0" target="_blank" rel="noopener noreferrer">https://didiheng.com/front/2019-12-20.html#connect%E5%87%BD%E6%95%B0</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redux-为什么不能异步？为什么需要redux-thunk？"></a>redux 为什么不能异步？为什么需要redux-thunk？<a class="hash-link" href="#redux-为什么不能异步？为什么需要redux-thunk？" title="Direct link to heading">#</a></h2><p>不需要关心异步的细节</p><p>比如写一个触发dispatch 的 action</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">loadTodo 为借口请求返回数据</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// redux-thunk 模式编写异步</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">addTodoAsync</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token parameter">dispatch</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">loadTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function" style="color:#d73a49">dispatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">addFullTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// action</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">addFullTodo</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">todo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    type</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;ADD_TODO&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain">todo</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">//使用 redux-thunk 在组件中写</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">dispatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">addTodoAsync</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// 没有 redux-thunk 编写异步在组件中写</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token function" style="color:#d73a49">loadTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">then</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">todo</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">dispatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">addFullTodo</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">todo</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>区别主要是：在与，我们不需要关心是先 loadTodo 得到todo 以后再 dispatch。<code>dispatch(addTodoAsync()))</code>不用关心 loadTodo ，我们只知道这个 addTodoAsync 可以返回 todo，并dispatch。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="redux-thunk-原理"></a>redux-thunk 原理<a class="hash-link" href="#redux-thunk-原理" title="Direct link to heading">#</a></h2><p>比如说上面传入一个 addTodoAsync，redux-thunk 会判断传入的 action 是否为函数。如果为函数那就是异步了。负责帮忙执行。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-那些场景会触发重新渲染"></a>react 那些场景会触发重新渲染<a class="hash-link" href="#react-那些场景会触发重新渲染" title="Direct link to heading">#</a></h2><p><a href="https://github.com/lgwebdream/FE-Interview/issues/913" target="_blank" rel="noopener noreferrer">https://github.com/lgwebdream/FE-Interview/issues/913</a></p><ul><li>setState 方法被调用</li><li>setState(null) 不会触发 render （更新前会判断新的值是否为 null ，如果为null 直接return）</li><li>父组件重新渲染</li><li>forceUpdate()</li><li>类组件中 通过 this.forceUpdata() 强制调用更新；调用 forceUpdate 会跳过<code>shouldUpdateComponent</code>的限制。全局会开启一个 hasForceUpdate 开关，当组件更新时，会检查这个开关，如果开启 true 那么会直接跳过 shouldUpdate。相当于可以直接打破渲染规则。</li><li>有些变量不在state上，当时你又想达到这个变量更新的时候，刷新render；或者state里的某个变量层次太深，更新的时候没有自动触发render。这些时候都可以手动调用forceUpdate自动触发render。</li><li>函数组件中：</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">ignored</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> forceUpdate</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useReducer</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">x</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> x </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">handleClick</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">forceUpdate</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="重新渲染-render-会做些什么？"></a>重新渲染 render 会做些什么？<a class="hash-link" href="#重新渲染-render-会做些什么？" title="Direct link to heading">#</a></h2><p>diff 算法，对比新旧节点。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="useeffect的使用方法？useeffect的return会在什么时候执行？useeffect原理是什么？"></a>useEffect的使用方法？useEffect的return会在什么时候执行？useEffect原理是什么？<a class="hash-link" href="#useeffect的使用方法？useeffect的return会在什么时候执行？useeffect原理是什么？" title="Direct link to heading">#</a></h2><ul><li>接受一个函数作为参数，函数内部作为一些舒服请求，初始化动作，并且接受一个 deps 依赖数组，如果定义在 deps 里面的变量发生改变，在组件更新的时候，effect 函数参数内部会重新执行，函数参数可以返回一个函数，这个函数的执行时间实在组件卸载执行，或者就是 deps 变量更新，清理执行上一次函数参数执行的内容。</li><li><strong>原理</strong>：所有的函数组件触发都在 renderWithHook 里面，在fiber调和过程中，遇到 FunctionComponent （函数组件）类型的 fiber ，就会用 updateFunctionComponent 更新 fiber，在 updateFunctionComponent 中调用 renderWithHooks 方法。</li><li>在 render 阶段，实际没有进行真正 DOM 元素的增加，删除， React 把想要做的不用操作打成不到的 effectTag。等到 commit 阶段统一处理这些副作用，包括 DOM 的增删改查，执行生命周期等。</li><li>首先初始化会执行 mountEffect 函数，内部 <code>mountWorkInProgressHook()</code>产生一个，hook，与fiber 进行关联；通过 <code>pushEffect</code>创建一个 effect，并且保存在 hook 的 memoizedState 属性下，还有一个重要的作用就是，如果有多个 effect或者 layoutEffect会形成一个副作用链表，绑定在函数组件 fiber 的 updateQueue 上。</li><li><strong>更新阶段：</strong>就是判断 deps 项有没有发生变化，如果没有发生变化，更新副作用链表就可以了；如果发生变化更新链表的同时，打执行副作用的标签：<code>fiber-&gt; fiberEffect , hook -&gt; HookHasEffect</code>,在commit阶段会根据这些标签重新执行副作用。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="useeffect-和-uselayouteffect-的区别"></a>useEffect 和 useLayoutEffect 的区别<a class="hash-link" href="#useeffect-和-uselayouteffect-的区别" title="Direct link to heading">#</a></h2><p>参考地址：<a href="https://zhuanlan.zhihu.com/p/348701319" target="_blank" rel="noopener noreferrer">https://zhuanlan.zhihu.com/p/348701319</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="usememo-和-usecallback的区别，它们的实现原理是什么？"></a>useMemo 和 useCallback的区别，它们的实现原理是什么？<a class="hash-link" href="#usememo-和-usecallback的区别，它们的实现原理是什么？" title="Direct link to heading">#</a></h2><p>useMemo 缓存的是结果，useCallback 相当于缓存的是函数内部逻辑。</p><ul><li>原理：</li><li>useMemo 首先会执行 useMemo 第一个函数参数的想要的返回值，然后将值缓存到 hook 的memoizedState 中。更新的阶段，判断 deps 值是否相等，没有变化，那么直接 return 上次保存在 memoizedState 的值。</li><li>useCallback 原理：也是先进行依赖比较。如果新旧依赖都一直，返回原 callback。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="useeffect、usememo、usecallback是如何做依赖收集的"></a>useEffect、useMemo、useCallback是如何做依赖收集的<a class="hash-link" href="#useeffect、usememo、usecallback是如何做依赖收集的" title="Direct link to heading">#</a></h2><p>pushEffect 进行依赖收集。如果有多个 effect或者 layoutEffect 会形成一个副作用链表，绑定在函数组件 fiber 的 updateQueue 上。</p><p>结构如下：</p><p><img src="https://cdn.nlark.com/yuque/0/2022/png/1535745/1645612486694-e47d4d60-426c-432e-a271-dd582e7f89ec.png" alt="https://cdn.nlark.com/yuque/0/2022/png/1535745/1645612486694-e47d4d60-426c-432e-a271-dd582e7f89ec.png"></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-hook-优劣势（对比component）"></a>React Hook 优劣势（对比Component）<a class="hash-link" href="#react-hook-优劣势（对比component）" title="Direct link to heading">#</a></h2><p><strong>优点：</strong></p><ul><li>更容易复用逻辑</li><li>每调用一次 useHook 都会生成一份独立的状态（因为 hook 写在一个函数模块内），函数每次调用都会生成一份独立的空间（状态和逻辑也更独立）。</li><li>虽然状态 useState 和 useEffect 等这些依赖组件，但他可以在组件外部定义，这一点是 类组件做不到的，类组件声明一些副作用，或者 state，不能在类组件外部定义的。</li><li>上面两点虽然说高阶组件（HOC）能实现。但是高阶组件的缺点是：</li><li>1、来源不清晰：高阶组件是通过增强组件的 props（赋予一个新的属性或方法到组件的props属性上。）实现起来比较隐式，难易区别这个props来着哪个高阶组件。</li><li>2、高阶组件需要实例化一个父组件，不管在代码上还是性能上，都不如 hooks。</li><li>3、命名冲突：多个高阶组件，命名容易发生冲突。</li><li>4、一般无法直接获取原始组件的状态，如果要获取，需要 ref 获取组件实例。</li><li>5、因为本质上产生了一个新的组件，所以需要配合 forwardRef 来转发 Ref。</li><li>6、如果多个高阶组件嵌套在一起，当前状态会覆盖上一个状态，比如说 多个componentDidMount，当前 componentDidMount 会覆盖上一个 componentDidMount，这样副作用串联起来，影响很大。</li><li><strong>下面会说说 HOC 的优点👇🏻。</strong></li><li>Hook 将组件中互相关联的部分拆分成更小的函数。复杂的类组件会变得难以理解，例如 经常在 componentDidMount 和 componentDidUpdate 获取数据，但同一个 componentDidMount 包含很多逻辑，如设置事件监听，而之后需要在 componentWillUnmount 中清除。相互关联且需要对照修改的代码被进行了拆分，而完全不相关的代码却在同一个方法中组合在一起。</li><li>函数组件声明更简洁，类组件声明纯在大量的模板代码。</li><li>不用考虑 this 指向问题。</li></ul><p><strong>缺点：</strong></p><ul><li>响应式的 useEffect</li><li>你必须搞清楚 useEffect 和 useCallback 等依赖项数组改变的动机。有时候，你的useEffect依赖某个函数的不可变性，这个函数的不可变性又依赖于另一个函数的不可变性，这样便形成了一条依赖链。一旦这条依赖链的某个节点意外地被改变了，你的useEffect就被意外地触发了。所以对比 componentDidmMount 和 componentDidUpdate，useEffect 带来的心智负担更大。</li><li>Hook 不擅异步代码，函数的运行是独立的，每个函数都有一份独立的作用域。函数的变量是保存在运行时的作用域里面。当我们有<strong>异步</strong>操作的时候，经常会碰到异步回调的变量引用是之前的，也就是旧的（这里也可以理解成闭包）。比如下面的一个例子(<a href="https://codesandbox.io/s/charming-diffie-tsj8e" target="_blank" rel="noopener noreferrer">codesandbox</a>)：</li></ul><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">Counter</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setCounter</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">onAlertButtonClick</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Value: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> counter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">You</span><span class="token plain"> clicked </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> times</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counter </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Click</span><span class="token plain"> me</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onAlertButtonClick</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Show</span><span class="token plain"> me the value </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> seconds</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">Counter</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>当你点击Show me the value in 3 seconds的后，紧接着点击Click me使得counter的值从0变成1。三秒后，定时器触发，但alert出来的是0（旧值），但我们希望的结果是当前的状态1。</p><p>这个问题在class component不会出现，因为class component的属性和方法都存放在一个instance上，调用方式是：this.state.xxx和this.method()。因为每次都是从一个不变的instance上进行取值，所以不存在引用是旧的问题。</p><p>其实解决这个hooks的问题也可以参照类的instance。用useRef返回的immutable RefObject（把值保存在current属性上）来保存state，然后取值方式从counter变成了： counterRef.current。如下：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">React</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useState</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useRef</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useEffect </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function maybe-class-name" style="color:#d73a49">Counter</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setCounter</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useState</span><span class="token punctuation" style="color:#393A34">(</span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> counterRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">onAlertButtonClick</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">setTimeout</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token function" style="color:#d73a49">alert</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Value: &quot;</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> counterRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3000</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    counterRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> counter</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">You</span><span class="token plain"> clicked </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">counter</span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> times</span><span class="token punctuation" style="color:#393A34">.</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">p</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setCounter</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">counter </span><span class="token operator" style="color:#393A34">+</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">1</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token maybe-class-name">Click</span><span class="token plain"> me</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain">button onClick</span><span class="token operator" style="color:#393A34">=</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain">onAlertButtonClick</span><span class="token punctuation" style="color:#393A34">}</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token maybe-class-name">Show</span><span class="token plain"> me the value </span><span class="token keyword" style="color:#00009f">in</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3</span><span class="token plain"> seconds</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">button</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token operator" style="color:#393A34">/</span><span class="token plain">div</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token maybe-class-name">Counter</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p><a href="https://link.zhihu.com/?target=https%3A//codesandbox.io/s/shy-wood-bxb7f" target="_blank" rel="noopener noreferrer">结果</a>如我们所期待，alert的是当前的值1。</p><p>我们可以把这个过程封装成一个custom hook，如下：</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> useEffect</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useRef</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> useState </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;react&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> useRefState </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  initialValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">T</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">)</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token constant" style="color:#36acaa">T</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">MutableRefObject</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">Dispatch</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token maybe-class-name">React</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access maybe-class-name">SetStateAction</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;&gt;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setState</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> useState</span><span class="token operator" style="color:#393A34">&lt;</span><span class="token constant" style="color:#36acaa">T</span><span class="token operator" style="color:#393A34">&gt;</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">initialValue</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> stateRef </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">useRef</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">useEffect</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    stateRef</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">current</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> state</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> stateRef</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> setState</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> useRefState</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hoc-高阶组件的优点"></a>HOC 高阶组件的优点<a class="hash-link" href="#hoc-高阶组件的优点" title="Direct link to heading">#</a></h2><p><strong>高阶组件在哪些场景使用，实现高阶组件的方式有哪些？</strong></p><ul><li>高阶函数将一个函数作为参数并且返回值也是一个函数。高阶组件是将组件作为参数，返回组件的参数。返回的组件把传进去的组件进行功能强化。</li><li>属性继承</li><li>反向继承（返回组件继承参数组件）</li><li>渲染劫持（继承参数组件之后，通过判断是否渲染 super.render 的内容，否则我渲染其他内容。）</li><li>修改渲染树（通过 react.cloneElelement, 创建新的渲染树，可以使用 react.createElement）</li><li>权限拦截</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="context-原理？如何做依赖收集的？"></a>Context 原理？如何做依赖收集的？<a class="hash-link" href="#context-原理？如何做依赖收集的？" title="Direct link to heading">#</a></h2><p>1、调用 createContext 创建 context 对象，context 对象上的 $$typeof 标记 Provider（REACRT_PROVIDER_TPYE） 和 Context（REACRT_CONTEXT_TPYE），__contextValue 保存 Provider 传递的 value。</p><p>2、会变成 ContextProvider 的 fiber 类型，在 fiber 调和走到 beginwork。这个阶段会发生两件事：</p><p>2.1、如果当前类型的 fiber 不需要更新，那么会 FinishedWork 中止当前节点和子节点的更新。</p><p>2.2、如果当前类型 fiber 需要更新，那么会调用不同类型 fiber 的处理方法。当然 ContextProvider 也有特			  有的 fiber 更新方法 —— updateContextProvider。</p><p>2、updateContextProvider 更新走调用 <strong>propagateContextChange ，</strong>在类组件里面c ontext 更新会强制跳过 PureComponent 和 shouldUpdateComponent，也就是走 forceUpdate 逻辑。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="如何做依赖收集的"></a>如何做依赖收集的<a class="hash-link" href="#如何做依赖收集的" title="Direct link to heading">#</a></h2><p>深度遍历所有的子代 fiber ，然后找到里面具有 dependencies 的属性。对比 dependencies 中的 context 和当前 Provider 的 context 是否是同一个，如果是同一个，那么如果当前 fiber 是类组件，那么会给绑定一个 forceUpdate 标识 。dependencies 属性就是本身是一个链表结构，使用 contextType useContext 组件的 fiber ，和 Consumer 类型的 fiber 会和 dependencies 属性建立联系。会把消费者 context 放到 dependencies 中。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-生命周期"></a>React 生命周期<a class="hash-link" href="#react-生命周期" title="Direct link to heading">#</a></h2><p>生命周期大概可以分为三个流程，分为<strong>组件初始化，组件更新，组件销毁。</strong></p><ul><li><strong>初始化阶段：</strong> constructor执行=&gt;</li><li>执行 static getDerivedStateFromProps（返回值将和之前的 state 合并，作为新的 state）,就是接收到的 props 合并到state 中。</li><li>=&gt; componentWillMount 执行（如果存在 getDerivedStateFromProps 和 getSnapshotBeforeUpdate 就不会执行生命周期componentWillMount。）</li><li>=&gt; render 函数执行（mountClassInstancec 形成children，调用 reconcileChildren 方法深度调和 children）。</li><li>=&gt; componentDidMount 执行（上面都是在render阶段执行，Mount 在commit阶段执行的。）</li><li><strong>更新阶段：</strong></li><li>执行 componentWillReceiveProps(newProps， newContext)生命周期，这个生命周期执行在组件更新阶段，父组件传递给子组件的 props 更新这个生命周期才会执行。</li><li>=&gt; 执行 getDerivedStateFromPorps 返回值用于合并 state，生成新的state</li><li>=&gt; 执行 shouldCcomponentUpdate,传入新的 props ，新的 state，和新的 context，返回值决定是否继续执行 render 函数。</li><li>=&gt; 执行 componentWillUpdate。</li><li>=&gt; 执行 render 函数。</li><li>=&gt; 执行 getSnapshotBeforeUpdate，可以获取DOM更新前的状态。它的返回值，componentDidUpdate(_,__,snapshot),snapshot 第三个参数就是返回值。这个生命周期需要配合 componentDidUpdate 使用，如果没有 声明 componentDidUpdate 生命周期，那么声明 getSnapshotBeforeUpdate 就会报错误。</li><li>=&gt; 执行 componentDidUpdate</li><li><strong>销毁阶段：</strong></li><li>执行 componentWillUnMount 卸载组件，以及 DOM元素。</li><li><strong>当 props 不变的前提下，PureComponent 组件能否阻止 componentWillReceiveProps 执行</strong></li></ul><p>答案是否定的，componentWillReceiveProps 生命周期的执行，和纯组件没有关系，纯组件是在 componentWillReceiveProps 执行之后浅比较 props 是否发生变化。所以 PureComponent 下不会阻止该生命周期的执行。</p><ul><li><strong>在v16版本后，为什么componentWillxxx 钩子前增加了 UNSAFE_ 前缀</strong></li></ul><p>是因为 stack renconciler 重构为 fiber reconciler 后，render 阶段的任务可能中断/重新开始，对应的组件在render 极端的生命周期钩子（即 componentWillXXX）可能会触发多次。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="purecomponent-和-component-有什么区别？"></a>PureComponent 和 Component 有什么区别？<a class="hash-link" href="#purecomponent-和-component-有什么区别？" title="Direct link to heading">#</a></h2><p>PureComponent 会浅比较（shallowEqual）对比 state 和 props 是否相等。Component 需要手动在 shouldComponentUpdate 钩子函数中自己写 render 逻辑。</p><p>extends PureComponent 之后源码 <code>pureComponentPrototype.isPureReactComponent = true;</code> 将 isPureReactComponent 属性设置为 true。isPureReactComponent 这个属性在更新组件 updateClassInstance 方法中使用的。</p><p><code>shallowEqual</code>浅比较流程：</p><ul><li>第一步，首先会直接比较新老 props 或者新老 state 是否相等。如果相等那么不更新组件。</li><li>第二步，判断新老 state 或者 props ，有不是对象或者为 null 的，那么直接返回 false ，更新组件。</li><li>第三步，通过 Object.keys 将新老 props 或者新老 state 的属性名 key 变成数组，判断数组的长度是否相等，如果不相等，证明有属性增加或者减少，那么更新组件。</li><li>第四步，遍历老 props 或者老 state ，判断对应的新 props 或新 state ，有没有与之对应并且相等的（这个相等是浅比较），如果有一个不对应或者不相等，那么直接返回 false ，更新组件。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="如果在map循环中没有设置key值，那么从-a-b-c-d-四个节点变成-b-c-d三个节点，它会以什么样的方式变化？"></a>如果在map循环中没有设置key值，那么从 A B C D 四个节点变成 B C D三个节点，它会以什么样的方式变化？<a class="hash-link" href="#如果在map循环中没有设置key值，那么从-a-b-c-d-四个节点变成-b-c-d三个节点，它会以什么样的方式变化？" title="Direct link to heading">#</a></h2><p>当同一层级的某个节点添加了对于其他同级节点唯一的key属性，当它在当前层级的位置发生了变化后。react diff算法通过新旧节点比较后，如果发现了key值相同的新旧节点，就会执行移动操作（然后依然按原策略深入节点内部的差异对比更新），而不会执行原策略的删除旧节点，创建新节点的操作。这无疑大大提高了React性能和渲染效率。</p><p>第一步就是复用老的 oldFiber；复制完成，新的 newChildren 生成，A 节点以及没有用了就删除节点；第三步创建 newFiber。</p><p>官网地址：<a href="https://zh-hans.reactjs.org/docs/reconciliation.html#recursing-on-children" target="_blank" rel="noopener noreferrer">https://zh-hans.reactjs.org/docs/reconciliation.html#recursing-on-children</a>。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-diff-算法和-vue-diff-算法有什么区别？"></a>React diff 算法和 Vue diff 算法有什么区别？<a class="hash-link" href="#react-diff-算法和-vue-diff-算法有什么区别？" title="Direct link to heading">#</a></h2><p><a href="https://juejin.cn/post/6978370715573714952" target="_blank" rel="noopener noreferrer">参考地址</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="虚拟-dom，虚拟-dom-的好处。"></a>虚拟 DOM，虚拟 DOM 的好处。<a class="hash-link" href="#虚拟-dom，虚拟-dom-的好处。" title="Direct link to heading">#</a></h2><ul><li>参考地址：<a href="https://github.com/mqyqingfeng/frontend-interview-question-and-answer/issues/3" target="_blank" rel="noopener noreferrer">https://github.com/mqyqingfeng/frontend-interview-question-and-answer/issues/3</a></li><li>dom和js 引擎是相互独立的，但是又工作在同一线程（主线程）</li><li>频繁调用 dom api 不会进行批量操作，导致重排重绘，页面卡顿的情况出现（重新计算布局、重新绘制图像会引起更大的性能消耗）。</li></ul><p><strong>虚拟DOM的劣势？</strong></p><ul><li>虚拟DOM不会立马进行重排和重绘</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-dom绑定事件和原生事件有什么区别？"></a>React dom绑定事件和原生事件有什么区别？<a class="hash-link" href="#react-dom绑定事件和原生事件有什么区别？" title="Direct link to heading">#</a></h2><ol><li>当用户在为onClick添加函数时，React并没有将Click绑定到DOM上面</li><li>React 有一种事件插件机制，比如 onClick，onChange ，会有不同的事件插件 SimpleEventPlugin ，ChangeEventPlugin 处理（因此事件和事件源都是 react 自己的。）。</li><li>事件绑定，也是通过 addEventListener 注册的，但是会保存到对应 DOM 元素类型 fiber 对象（hostComponet）的memoizedProps属性上。</li><li>所以当事件触发的时候, 对使用统一的分发函数 dispatchEvent 将指定函数执行。</li><li>绑定的时间和冒泡会形成事件队列。e.stopPropagation() 阻止冒泡，事件源状态里面证明事件停止冒泡，下次遍历的时候 event.isPropagationStopped() 就是 true，所以跳出循环。</li></ol><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">runEventsInBatch</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> dispatchListeners </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">_dispatchListeners</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token known-class-name class-name">Array</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">isArray</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">dispatchListeners</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">for</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i </span><span class="token operator" style="color:#393A34">&lt;</span><span class="token plain"> dispatchListeners</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">length</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"> i</span><span class="token operator" style="color:#393A34">++</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">isPropagationStopped</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* 判断是否已经阻止事件冒泡 */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">break</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      dispatchListeners</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">i</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">event</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">/* 执行真正的处理函数 及handleClick1... */</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hooks-实现原理"></a>Hooks 实现原理<a class="hash-link" href="#hooks-实现原理" title="Direct link to heading">#</a></h2><ul><li>hooks 与 fiber 建立联系。</li><li>创建 hook 对象用memoizedState属性保存 hooks 信息。</li><li>多个hook的话每一个 hook 通过 next 和下一个 hooks 关联。</li><li>hooks 更新也同样使用 <strong>双缓树更新</strong> 技术，更新调用dispatchAction方法。</li><li>副作用保存 updateQueue 中形成副作用列表。commit 阶段统一执行。不同的副作用打上不同的 effectTag。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="给你如何去设计一个-usestate？"></a>给你如何去设计一个 useState？<a class="hash-link" href="#给你如何去设计一个-usestate？" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="fiber-调和？"></a>fiber 调和？<a class="hash-link" href="#fiber-调和？" title="Direct link to heading">#</a></h2><ul><li>fiber 用来解决 大型 react 应用卡顿，fiber 是 react 中最小执行单元。可以把它理解成虚拟 DOM。</li><li>react v15 之前的版本，使用递归遍历节点，无法中断，会阻塞浏览器的渲染，如果随着项目越来越大，越来越复杂，层级也越来越深，导致更新时间越来越长，前端交互上的体验就是卡顿。</li><li>然后说 fiber 和 elelement dom 的三者之间的关系。</li><li>fiber 之前 return 指向父组件，child 指向子组件，sibling</li><li>如何找到更新的 fiber ？</li><li>向上递归父级链表的 childlanes ，接下来向下调和的时候 childlanes 与 updatesLanes 对比是否相等。</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="什么是fiber？"></a><strong>什么是fiber？</strong><a class="hash-link" href="#什么是fiber？" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-router-路由的原理"></a>React Router 路由的原理<a class="hash-link" href="#react-router-路由的原理" title="Direct link to heading">#</a></h2><p><a href="https://juejin.cn/book/6945998773818490884/section/6959721297911742504" target="_blank" rel="noopener noreferrer">参考地址</a></p><p>路由模式分为两种：history 模式，hash 模式。通过 createHistory 创建不同模式的路由。</p><p>history模式： 主要是通过 popstate 监听，pushState 进行前进，使用history.back, history.forword, history.go()，都能被 popState 监听。</p><p>hash模式：主要通过 hashChange 监听路有变化。</p><p>实现原理：setState 定义 location ，context 上下文模式来传递路由信息，告诉切换了路由显示对应组件。<code>Route</code>通过消费，拿到信息，显示，<code>context</code>的value 变化了会更新所有子组件。这就明白了为什么路由变化会切换到对应组件。</p><p>比如 如果定义多个 <code>&lt;Route path=&quot;/child&quot;/&gt;</code>那么不管你匹配到对应组件，那么都会全部加载组件。</p><p>因此我们首屏优化想要更快可以通过 路由懒加载。</p><p>v6 之前需要包裹 <code>Swtich</code>组件来进行路由匹配。</p><p>注意 Switch 包裹的 Redirect 要放在最下面，否则会被 Switch 优先渲染 Redirect ，导致路由页面无法展示。</p><h2></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="比较-react-v5-vs-react-v6-有什么变化。"></a>比较 react v5 VS react v6 有什么变化。<a class="hash-link" href="#比较-react-v5-vs-react-v6-有什么变化。" title="Direct link to heading">#</a></h2><ul><li>从<code>&lt;Swtich&gt;</code>组件 =&gt; 用<code>&lt;Router&gt;</code>代替。</li><li>v5 之前子路由需要写在子组件里面添加 <code>&lt;Route path=&quot;parent/child&quot;/&gt;</code>，现在直接嵌套就可以了<code>&lt;Route path=&quot;parent&quot;&gt;&lt;Route/&gt;</code>，父组件中再需要添加 <code>&lt;Outlet /&gt;</code>即可显示子路由。</li><li>路由跳转提高了新的 <code>useNavigate</code>。</li><li>获取路由参数和设置参数使用 <code>useSearchParams</code></li><li>以前我们需要使用 <code>react-router-config</code>的 renderRoutes 方法配置 options 路由；v6 版本可以直接使用 <code>useRoutes</code>就可以。</li><li>更全面拥抱 hooks。</li></ul><p>原理区别：</p><ul><li>新版本使用 <code>useLayoutEffect</code> 处理监听路由变化</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="手写-react-hook-，hooks-实现原理？"></a>手写 React HOOK ，<strong>hooks 实现原理？</strong><a class="hash-link" href="#手写-react-hook-，hooks-实现原理？" title="Direct link to heading">#</a></h2><p>学习链接：<a href="https://cloud.tencent.com/developer/article/1784501" target="_blank" rel="noopener noreferrer">https://cloud.tencent.com/developer/article/1784501</a></p><p>react技术揭秘：<a href="https://react.iamkasong.com/hooks/create.html#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86" target="_blank" rel="noopener noreferrer">https://react.iamkasong.com/hooks/create.html#%E5%B7%A5%E4%BD%9C%E5%8E%9F%E7%90%86</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-性能优化"></a>React 性能优化<a class="hash-link" href="#react-性能优化" title="Direct link to heading">#</a></h2><p><a href="https://juejin.cn/post/6844903924302888973" target="_blank" rel="noopener noreferrer">参考地址</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="如何设计一个前端通用组件？"></a>如何设计一个前端通用组件？<a class="hash-link" href="#如何设计一个前端通用组件？" title="Direct link to heading">#</a></h2><p><a href="https://juejin.cn/post/6844903847874265101" target="_blank" rel="noopener noreferrer">设计一个通用组件库</a></p><p>最重要的就是组件中的数据和 UI 解耦。</p><ul><li>前端组件设计的原则</li><li>单一职责：一个组件只专注一件事情，这样能够更好的复用组件。</li><li>过度单一职责的组件，可能导致过度抽象，造成组件库碎片化。</li><li>通用性：放弃对 dom 的掌控，只提供最基础的 dom 和交互逻辑。将 dom 结构转移给开发者。</li><li>封装：隐藏内部实现细节和实现意义。并通过 props 控制行为和输出。</li><li>多个功能的组件应该转为多个小组件；</li><li>命名规范：有意义的函数和变量名，让代码更具有可读性。</li><li>适当的注释</li><li>扁平化 state 和 props</li><li>给组件传递 props 建议用更扁平化的 props ，而不是用嵌套的对象或数组。</li><li>react 中，如果修改对象或者数组，必须创建一个副本；可能会因为浅复制而造成页面的渲染。</li></ul><p><a href="https://juejin.cn/post/6844904032700481550" target="_blank" rel="noopener noreferrer">https://juejin.cn/post/6844904032700481550</a></p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-应用卡顿如何排查？"></a>React 应用卡顿如何排查？<a class="hash-link" href="#react-应用卡顿如何排查？" title="Direct link to heading">#</a></h2><p>1、使用 Performance 录制应用快照，查看调用情况</p><p>2、查看network中网络请求情况，是否有资源因过大请求阻塞，导致后续资源无法加载，这种情况一般选择分包或固定资源选择cdn分担（多域名。浏览器设置的http2.0以下同域名仅允许同时最多6个tcp的限制）</p><p>3、可以通过 React Developer Tools 的 Profiler 的 Flamegraph（火焰图）或 Ranked（渲染时长排行榜） 查看各组件的渲染时长，根据对应的组件可以进行排查渲染问题，以下作答：</p><p>a). 通过检查代码中是否有重复触发的 useEffect</p><p>b). 检查是否有多次不同渲染周期中触发的setState导致的渲染（比如在一个事件中导致的state更新，导致依赖于该state的useEffect触发，而该effect中又有其他的setState，导致多个有依赖项的useEffect不同批次连环触发）</p><p>c). 检查是否在某个超大组件中需要渲染的元素过多，可使用子组件可考虑使用 pureComponent，或 React.mome ，或使用useMome来根据依赖项更新子组件，或在父组件中将子组件需要的props通过使用useMome或useCallback缓存， 或在子组件中使用 shouldComponentUpdate 中校验是否需要更新来减少更新</p><p>d). 检查是否存在拖拽业务，这类业务一般会导致大量的diff存在，可以的话可以考虑不使用React的方式去实现，使用第三方非React的JS库去实现。</p><p>e). 同上情况，存在大量增删改查逻辑，会导致大量的的diff可以检查列表元素是否存在唯一的key，通过key可以让React复用Fiber从而避免重复创建 Fiber节点与 Dom 节点</p><p>f). 存在未清除掉的定时器或dom监听事件</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-18-更新的内容？"></a>React 18 更新的内容？<a class="hash-link" href="#react-18-更新的内容？" title="Direct link to heading">#</a></h2><p><a href="https://mp.weixin.qq.com/s/bGf8VQpfPv0rgHxnOo7WUQ" target="_blank" rel="noopener noreferrer">https://mp.weixin.qq.com/s/bGf8VQpfPv0rgHxnOo7WUQ</a></p><p><a href="https://www.youtube.com/watch?v=ytudH8je5ko" target="_blank" rel="noopener noreferrer">https://www.youtube.com/watch?v=ytudH8je5ko</a></p><ul><li>合并更新</li><li>提供了三个新的 API</li><li>startTransition：接受一个回调函数，该作用就是非紧急更新，就是会先执行优先级更新高的。</li><li>useDeferredValue： 设置延迟值。</li><li>useTransition</li><li>Suspense： 服务端 SSR 渲染也可以实现 <code>&lt;Suspense&gt;</code></li><li>render -&gt; createRoot（会返回一个对象，比如返回 root，root.render 才会去渲染）</li><li>useId() -&gt; 生成组件唯一 id</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="高耦合低内聚"></a>高耦合低内聚<a class="hash-link" href="#高耦合低内聚" title="Direct link to heading">#</a></h2><p>组件之间没有关联的，有关联只会是数据之间的相互传递。组件的内部逻辑不会与其他组件关联。</p><p>组件内的方法只暴露一部分，比如回调函数，通信数据。</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="什么是-css-in-js？"></a>什么是 CSS-IN-JS？<a class="hash-link" href="#什么是-css-in-js？" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="函数组件的工作原理？"></a><strong>函数组件的工作原理？</strong><a class="hash-link" href="#函数组件的工作原理？" title="Direct link to heading">#</a></h2><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="除了-redux-你还用过那些？它是为了解决什么的？"></a><strong>除了 redux 你还用过那些？它是为了解决什么的？</strong><a class="hash-link" href="#除了-redux-你还用过那些？它是为了解决什么的？" title="Direct link to heading">#</a></h2><ul><li>mobx</li><li>dva（redux 封装）</li><li>Rxjs</li><li>pullstate （依赖 Immer）</li><li>recoil（atom）</li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-性能优化-1"></a>react 性能优化<a class="hash-link" href="#react-性能优化-1" title="Direct link to heading">#</a></h2><ul><li>profiber 查看组件加载速度</li><li><a href="https://www.zhangshuai.xyz/articles/view/89" target="_blank" rel="noopener noreferrer">https://www.zhangshuai.xyz/articles/view/89</a></li></ul><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="react-和-react-dom-两个库有什么区别-各自是做什么的？"></a>react 和 react-dom 两个库有什么区别 各自是做什么的？<a class="hash-link" href="#react-和-react-dom-两个库有什么区别-各自是做什么的？" title="Direct link to heading">#</a></h2><span>
    <ins class="adsbygoogle" style="display:block;text-align:center" data-ad-layout="in-article" data-ad-format="fluid" data-ad-client="ca-pub-3487507367729662" data-ad-slot="1964508460"></ins>
  <script>(adsbygoogle=window.adsbygoogle||[]).push({})</script></span><ul><li><strong>react</strong> 主要负责描述特性，提供react api</li><li>就是类组件，函数组件 ，context，hook ，refs 这些特性，react 模块只描述特性长什么样，怎么用，并不负责特性具体实现。</li><li>react-dom 主要负责实现特性，比如浏览器上渲染dom，响应点击事件等等。</li><li><a href="https://segmentfault.com/a/1190000037534946" target="_blank" rel="noopener noreferrer">https://segmentfault.com/a/1190000037534946</a></li></ul></div></article><nav class="pagination-nav docusaurus-mt-lg" aria-label="Docs pages navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/docs/interview"><div class="pagination-nav__sublabel">上一页</div><div class="pagination-nav__label">« 简介</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/docs/interview/vue"><div class="pagination-nav__sublabel">下一页</div><div class="pagination-nav__label">Vue »</div></a></div></nav></div></div><div class="col col--3"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#react-解决了什么问题？" class="table-of-contents__link">React 解决了什么问题？</a></li><li><a href="#setstate-是同步还是异步？" class="table-of-contents__link">setState 是同步还是异步？</a></li><li><a href="#immutable" class="table-of-contents__link">immutable</a></li><li><a href="#react-组件通信的方式有哪些？" class="table-of-contents__link">React 组件通信的方式有哪些？</a></li><li><a href="#redux-是如何派发数据的，connect-原理？" class="table-of-contents__link">redux 是如何派发数据的，connect 原理？</a></li><li><a href="#connect-原理" class="table-of-contents__link">connect 原理</a></li><li><a href="#redux-为什么不能异步？为什么需要redux-thunk？" class="table-of-contents__link">redux 为什么不能异步？为什么需要redux-thunk？</a></li><li><a href="#redux-thunk-原理" class="table-of-contents__link">redux-thunk 原理</a></li><li><a href="#react-那些场景会触发重新渲染" class="table-of-contents__link">react 那些场景会触发重新渲染</a></li><li><a href="#重新渲染-render-会做些什么？" class="table-of-contents__link">重新渲染 render 会做些什么？</a></li><li><a href="#useeffect的使用方法？useeffect的return会在什么时候执行？useeffect原理是什么？" class="table-of-contents__link">useEffect的使用方法？useEffect的return会在什么时候执行？useEffect原理是什么？</a></li><li><a href="#useeffect-和-uselayouteffect-的区别" class="table-of-contents__link">useEffect 和 useLayoutEffect 的区别</a></li><li><a href="#usememo-和-usecallback的区别，它们的实现原理是什么？" class="table-of-contents__link">useMemo 和 useCallback的区别，它们的实现原理是什么？</a></li><li><a href="#useeffect、usememo、usecallback是如何做依赖收集的" class="table-of-contents__link">useEffect、useMemo、useCallback是如何做依赖收集的</a></li><li><a href="#react-hook-优劣势（对比component）" class="table-of-contents__link">React Hook 优劣势（对比Component）</a></li><li><a href="#hoc-高阶组件的优点" class="table-of-contents__link">HOC 高阶组件的优点</a></li><li><a href="#context-原理？如何做依赖收集的？" class="table-of-contents__link">Context 原理？如何做依赖收集的？</a></li><li><a href="#如何做依赖收集的" class="table-of-contents__link">如何做依赖收集的</a></li><li><a href="#react-生命周期" class="table-of-contents__link">React 生命周期</a></li><li><a href="#purecomponent-和-component-有什么区别？" class="table-of-contents__link">PureComponent 和 Component 有什么区别？</a></li><li><a href="#如果在map循环中没有设置key值，那么从-a-b-c-d-四个节点变成-b-c-d三个节点，它会以什么样的方式变化？" class="table-of-contents__link">如果在map循环中没有设置key值，那么从 A B C D 四个节点变成 B C D三个节点，它会以什么样的方式变化？</a></li><li><a href="#react-diff-算法和-vue-diff-算法有什么区别？" class="table-of-contents__link">React diff 算法和 Vue diff 算法有什么区别？</a></li><li><a href="#虚拟-dom，虚拟-dom-的好处。" class="table-of-contents__link">虚拟 DOM，虚拟 DOM 的好处。</a></li><li><a href="#react-dom绑定事件和原生事件有什么区别？" class="table-of-contents__link">React dom绑定事件和原生事件有什么区别？</a></li><li><a href="#hooks-实现原理" class="table-of-contents__link">Hooks 实现原理</a></li><li><a href="#给你如何去设计一个-usestate？" class="table-of-contents__link">给你如何去设计一个 useState？</a></li><li><a href="#fiber-调和？" class="table-of-contents__link">fiber 调和？</a></li><li><a href="#什么是fiber？" class="table-of-contents__link"><strong>什么是fiber？</strong></a></li><li><a href="#react-router-路由的原理" class="table-of-contents__link">React Router 路由的原理</a></li><li><a href="#比较-react-v5-vs-react-v6-有什么变化。" class="table-of-contents__link">比较 react v5 VS react v6 有什么变化。</a></li><li><a href="#手写-react-hook-，hooks-实现原理？" class="table-of-contents__link">手写 React HOOK ，<strong>hooks 实现原理？</strong></a></li><li><a href="#react-性能优化" class="table-of-contents__link">React 性能优化</a></li><li><a href="#如何设计一个前端通用组件？" class="table-of-contents__link">如何设计一个前端通用组件？</a></li><li><a href="#react-应用卡顿如何排查？" class="table-of-contents__link">React 应用卡顿如何排查？</a></li><li><a href="#react-18-更新的内容？" class="table-of-contents__link">React 18 更新的内容？</a></li><li><a href="#高耦合低内聚" class="table-of-contents__link">高耦合低内聚</a></li><li><a href="#什么是-css-in-js？" class="table-of-contents__link">什么是 CSS-IN-JS？</a></li><li><a href="#函数组件的工作原理？" class="table-of-contents__link"><strong>函数组件的工作原理？</strong></a></li><li><a href="#除了-redux-你还用过那些？它是为了解决什么的？" class="table-of-contents__link"><strong>除了 redux 你还用过那些？它是为了解决什么的？</strong></a></li><li><a href="#react-性能优化-1" class="table-of-contents__link">react 性能优化</a></li><li><a href="#react-和-react-dom-两个库有什么区别-各自是做什么的？" class="table-of-contents__link">react 和 react-dom 两个库有什么区别 各自是做什么的？</a></li></ul></div></div></div></div></main></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright © 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.852a1eea.js"></script>
<script src="/assets/js/main.84c18cd6.js"></script>
</body>
</html>