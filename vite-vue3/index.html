<!doctype html>
<html lang="zh-CN" dir="ltr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-beta.3">
<link rel="alternate" type="application/rss+xml" href="/rss.xml" title="ğŸ‰ä¸€æšå°å‰ç«¯ Blog RSS Feed">
<link rel="alternate" type="application/atom+xml" href="/atom.xml" title="ğŸ‰ä¸€æšå°å‰ç«¯ Blog Atom Feed">
<link rel="search" type="application/opensearchdescription+xml" title="ğŸ‰ä¸€æšå°å‰ç«¯" href="/opensearch.xml">
<link rel="preconnect" href="https://fonts.gstatic.com">
<link rel="stylesheet" href="/katex/katex.min.css" integrity="sha384-AfEj0r4/OFrOo5t7NnNe46zW/tFgW6x/bCJG8FqQCEo3+Aro6EYUG4+cU+KJWu/X" crossorigin="anonymous">
<link rel="stylesheet" href="https://fonts.font.im/css?family=Raleway:500,700&amp;display=swap"><title data-react-helmet="true">Vite + Vue3 é¡¹ç›®åŸºæ“ - ğŸ‰ä¸€æšå°å‰ç«¯</title><meta data-react-helmet="true" property="og:title" content="Vite + Vue3 é¡¹ç›®åŸºæ“ - ğŸ‰ä¸€æšå°å‰ç«¯"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="description" content="å‰è¨€"><meta data-react-helmet="true" property="og:description" content="å‰è¨€"><meta data-react-helmet="true" property="og:image" content="https://ihoneys.github.io/img/ihoneys.png"><meta data-react-helmet="true" name="twitter:image" content="https://ihoneys.github.io/img/ihoneys.png"><meta data-react-helmet="true" property="og:url" content="https://ihoneys.github.io/vite-vue3"><meta data-react-helmet="true" name="docsearch:language" content="zh-CN"><meta data-react-helmet="true" name="docsearch:docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link data-react-helmet="true" rel="canonical" href="https://ihoneys.github.io/vite-vue3"><link data-react-helmet="true" rel="alternate" href="https://ihoneys.github.io/vite-vue3" hreflang="zh-CN"><link data-react-helmet="true" rel="alternate" href="https://ihoneys.github.io/vite-vue3" hreflang="x-default"><link data-react-helmet="true" rel="preconnect" href="https://W5C57B27UD-dsn.algolia.net" crossorigin="anonymous"><link rel="stylesheet" href="/assets/css/styles.b90b5f9c.css">
<link rel="preload" href="/assets/js/runtime~main.852a1eea.js" as="script">
<link rel="preload" href="/assets/js/main.84c18cd6.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<div><a href="#" class="skipToContent_1oUP">Skip to main content</a></div><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><button aria-label="Navigation bar toggle" class="navbar__toggle clean-btn" type="button" tabindex="0"><svg width="30" height="30" viewBox="0 0 30 30" aria-hidden="true"><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></button><a class="navbar__brand" href="/"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Lucasçš„åšå®¢</b></a></div><div class="navbar__items navbar__items--right"><a class="navbar__item navbar__link" href="/docs/skill/">éšè®°</a><a class="navbar__item navbar__link" href="/docs/interview/">é¢ç»</a><a class="navbar__item navbar__link" href="/docs/tools/">æ—¥å¸¸å¼€å‘å·¥å…·</a><div class="react-toggle displayOnlyInLargeViewport_GrZ2 react-toggle--disabled"><div class="react-toggle-track" role="button" tabindex="-1"><div class="react-toggle-track-check"><span class="toggle_71bT">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_71bT">ğŸŒ</span></div><div class="react-toggle-thumb"></div></div><input type="checkbox" class="react-toggle-screenreader-only" aria-label="Switch between dark and light mode"></div><div class="searchBox_1Doo"><button type="button" class="DocSearch DocSearch-Button" aria-label="æœç´¢"><span class="DocSearch-Button-Container"><svg width="20" height="20" class="DocSearch-Search-Icon" viewBox="0 0 20 20"><path d="M14.386 14.386l4.0877 4.0877-4.0877-4.0877c-2.9418 2.9419-7.7115 2.9419-10.6533 0-2.9419-2.9418-2.9419-7.7115 0-10.6533 2.9418-2.9419 7.7115-2.9419 10.6533 0 2.9419 2.9418 2.9419 7.7115 0 10.6533z" stroke="currentColor" fill="none" fill-rule="evenodd" stroke-linecap="round" stroke-linejoin="round"></path></svg><span class="DocSearch-Button-Placeholder">æœç´¢</span></span></button></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--light_3UqQ navbar__logo"><img src="/img/ihoneys.png" alt="Lucas" class="themedImage_1VuW themedImage--dark_hz6m navbar__logo"><b class="navbar__title">Lucasçš„åšå®¢</b></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/skill/">éšè®°</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/interview/">é¢ç»</a></li><li class="menu__list-item"><a class="menu__link" href="/docs/tools/">æ—¥å¸¸å¼€å‘å·¥å…·</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper blog-post-page"><div class="container margin-vert--lg"><div class="row"><aside class="col col--3"><nav class="sidebar_2ahu thin-scrollbar" aria-label="Blog recent posts navigation"><div class="sidebarItemTitle_2hhb margin-bottom--md">è¿‘æœŸæ–‡ç« </div><ul class="sidebarItemList_2xAf"><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/docusaurus-algolia">åˆ©ç”¨ Algolia å®ç°å†…å®¹æœç´¢</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/react-ts-type">React TS ä¸­çš„ Event Handler åŸæ¥è¿™æ ·çœ‹çš„</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/react-performance">React æ€§èƒ½ä¼˜åŒ–</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/react-use-svg">React ä½¿ç”¨ SVG çš„å§¿åŠ¿</a></li><li class="sidebarItem_2UVv"><a class="sidebarItemLink_1RT6" href="/ts-types">TypeScript ä¸€äº›é«˜çº§ç±»å‹å·¥å…·å®ç°</a></li></ul></nav></aside><main class="col col--7"><div class="sc-AxirZ ddyydL"><div class="row" style="margin:0"><div class="col col--12 article__details"><article><header><h1 class="margin-bottom--md blogPostTitle_nmLu text--center">Vite + Vue3 é¡¹ç›®åŸºæ“</h1></header><p class="single-post--date text--center">2021å¹´8æœˆ Â· é¢„è®¡é˜…è¯»æ—¶é—´ï¼š 6 åˆ†é’Ÿ</p><div class="text--center margin-bottom--xs padding-bottom--xs"><div class="post__tags-container margin-top--none margin-bottom--md"><svg aria-hidden="true" focusable="false" data-prefix="fas" data-icon="tags" class="svg-inline--fa fa-tags fa-w-20 margin-right--md" role="img" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 640 512" color="#c4d3e0"><path fill="currentColor" d="M497.941 225.941L286.059 14.059A48 48 0 0 0 252.118 0H48C21.49 0 0 21.49 0 48v204.118a48 48 0 0 0 14.059 33.941l211.882 211.882c18.744 18.745 49.136 18.746 67.882 0l204.118-204.118c18.745-18.745 18.745-49.137 0-67.882zM112 160c-26.51 0-48-21.49-48-48s21.49-48 48-48 48 21.49 48 48-21.49 48-48 48zm513.941 133.823L421.823 497.941c-18.745 18.745-49.137 18.745-67.882 0l-.36-.36L527.64 323.522c16.999-16.999 26.36-39.6 26.36-63.64s-9.362-46.641-26.36-63.64L331.397 0h48.721a48 48 0 0 1 33.941 14.059l211.882 211.882c18.745 18.745 18.745 49.137 0 67.882z"></path></svg><a class="post__tags margin-right--sm" style="font-size:0.75em;font-weight:500" href="/tags/vite">Vite</a><a class="post__tags margin-horiz--sm" style="font-size:0.75em;font-weight:500" href="/tags/vue-3">Vue3</a></div></div><section class="sc-AxjAm bFgQpc markdown"><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å‰è¨€"></a>å‰è¨€<a class="hash-link" href="#å‰è¨€" title="Direct link to heading">#</a></h2><p>åˆ°ç°åœ¨ Vue3.0 æ­£å¼å‘å¸ƒå¿«æœ‰ä¸€ä¸ªå¹´å¤´äº†ï¼ŒåŒæ—¶åç»­ä¹Ÿå‘å¸ƒçš„æ›´å¿«çš„æ‰“åŒ…å·¥å…· Vite ä¹Ÿæ›´æ–°åˆ°äº† 2.x ç‰ˆæœ¬ï¼Œç›¸ä¿¡æœ‰å¾ˆå¤šå°ä¼™ä¼´ä¹Ÿå·²ç»åœ¨å…¬å¸çš„æ–°é¡¹ç›®ä¸­åº”ç”¨èµ·æ¥ï¼Œä½“éªŒè¿™ä¸€å¿«æ„Ÿï¼Œä¸‹é¢è¿™ç¯‡æ–‡ç« æ€»ç»“ä¸‹é¡¹ç›®ä¸­åŸºäº Vite2.x + Vue3.0 å¸¸ç”¨å°åŸºæ“ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æ³¨å†Œç»„ä»¶"></a>æ³¨å†Œç»„ä»¶<a class="hash-link" href="#æ³¨å†Œç»„ä»¶" title="Direct link to heading">#</a></h2><p>åœ¨å¼€å‘é¡¹ç›®å¤šæ•°æƒ…å†µå°‘ä¸äº†ä½¿ç”¨ UI æ¡†æ¶ç»„ä»¶æ¥å¿«é€Ÿå¼€å‘æ­å»ºæˆ‘ä»¬çš„é¡µé¢ï¼Œä¸€èˆ¬ä½¿ç”¨ç»„ä»¶åº“æ—¶ï¼Œä¸ºäº†å‡å°åŒ…ä½“ç§¯ï¼ˆtree-shshaking æŠ€æœ¯ï¼‰ï¼Œéƒ½é‡‡ç”¨æŒ‰éœ€åŠ è½½çš„æ–¹å¼ã€‚</p><p>ä»¥ Vant ç»„ä»¶ä½¿ç”¨ä¸ºä¾‹ï¼Œé€šå¸¸æˆ‘ä»¬ä¼šï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> createApp </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vue&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports maybe-class-name">App</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./App.vue&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createApp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å¼•å…¥ç»„ä»¶</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"></span></span><span class="token-line" style="color:#393A34"><span class="token imports">  </span><span class="token imports maybe-class-name">Progress</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span></span><span class="token-line" style="color:#393A34"><span class="token imports">  </span><span class="token imports maybe-class-name">Picker</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span></span><span class="token-line" style="color:#393A34"><span class="token imports">  </span><span class="token imports maybe-class-name">Popup</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"></span></span><span class="token-line" style="color:#393A34"><span class="token imports">  </span><span class="token imports spread operator" style="color:#393A34">...</span><span class="token imports punctuation" style="color:#393A34">.</span><span class="token imports"></span></span><span class="token-line" style="color:#393A34"><span class="token imports"></span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vant&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// app.use() æ³¨å†Œ</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Progress</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Picker</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">Popup</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">   </span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">mount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;#app&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ç®€å•çš„å¼•ç”¨å‡ ä¸ªç»„ä»¶è¿˜å¥½ï¼Œçœ‹èµ·æ¥æ²¡æœ‰æ‹‰é¢æ¡ï¼Œæƒ³æƒ³å°±è¿™æ ·å¼•å…¥ç®—äº†ï¼Œå¦‚æœæœ‰äºŒåä¸‰åä¸ªå°±æ˜¾å¾—å¾ˆé•¿ä¹Ÿä¼šè®© <code>main.ts</code> è¶Šæ¥è¶Šå¤§ï¼ŒåŸºäºæ¨¡å—åŒ–å¼€å‘æ€æƒ³ï¼Œæœ€å¥½å•ç‹¬å°è£…åˆ°ä¸€ä¸ªé…ç½®æ–‡ä»¶ä¸­ã€‚</p><p>åˆ›å»ºä¸€ä¸ª config æ–‡ä»¶å¤¹ä¸‹ vant.config.ts æ–‡ä»¶åä¸­</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Progress</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Picker</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Popup</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vant&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> components </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Progress</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Picker</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token maybe-class-name">Popup</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// .use å†…éƒ¨ä¼šè‡ªåŠ¨å¯»æ‰¾ install æ–¹æ³•è¿›è¡Œè°ƒç”¨æ³¨å†ŒæŒ‚è½½</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> componentsInstallHandler </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token function" style="color:#d73a49">install</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">app</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token known-class-name class-name">Object</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">keys</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">components</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">forEach</span><span class="token punctuation" style="color:#393A34">(</span><span class="token parameter">key</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">components</span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain">key</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> componentsInstallHandler</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>main.ts ä¸­</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...çœç•¥ createApp å¼•å…¥</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// å¯¼å…¥</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports">vantComponentsInstall</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./config/vant.config&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">use</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">vantComponentsInstall</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">mount</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;#app&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¿™æ ·æ“ä½œå®Œæ˜¯ä¸æ˜¯èˆ’æœå¤šäº†~</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç»„ä»¶å…¨å±€æ³¨å†Œ"></a>ç»„ä»¶å…¨å±€æ³¨å†Œ<a class="hash-link" href="#ç»„ä»¶å…¨å±€æ³¨å†Œ" title="Direct link to heading">#</a></h2><p>è‡ªå·±ç¼–å†™äº†ä¸€ä¸ªæ¯”å¦‚ <code>&lt;Header/&gt;</code> ç»„ä»¶æƒ³è¦å…¨å±€ä½¿ç”¨ï¼Œè¿™æ—¶å€™å¯ä»¥è°ƒç”¨ createApp() è¿”å›çš„ component å‡½æ•°è¿›è¡Œå…¨å±€æ³¨å†Œ</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...çœç•¥ createApp å¼•å…¥</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token maybe-class-name">Header</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@/components/Header/Index.vue&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">component</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&quot;Header&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token maybe-class-name">Header</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="è¿‡æ»¤å™¨"></a>è¿‡æ»¤å™¨<a class="hash-link" href="#è¿‡æ»¤å™¨" title="Direct link to heading">#</a></h2><p>åœ¨ 3.x ä¸­ï¼Œè¿‡æ»¤å™¨å·²åˆ é™¤ï¼Œä¸å†æ”¯æŒã€‚ç›¸ååœ°ï¼Œå¯ä»¥ç”¨æ–¹æ³•è°ƒç”¨æˆ–è®¡ç®—å±æ€§ä»£æ›¿å®ƒã€‚</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    {{ computedFunc(&quot;computed&quot;) }}</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;/div&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import { computed, defineComponent } from &quot;vue&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default defineComponent({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  setup() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ä½¿ç”¨ é—­åŒ… æ¥å—ä¼ é€’å‚æ•°</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const computedFunc = () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      return (val) =&gt; val;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      computedFunc,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å…¨å±€è¿‡æ»¤å™¨"></a>å…¨å±€è¿‡æ»¤å™¨<a class="hash-link" href="#å…¨å±€è¿‡æ»¤å™¨" title="Direct link to heading">#</a></h3><p>æ¯”å¦‚å¤šä¸ªç»„ä»¶ä¸­æ•°æ®æ¸²æŸ“å€¼éƒ½éœ€è¦è§£å¯†åæ‰èƒ½æ­£ç¡®æ˜¾ç¤ºï¼Œä¸å¯èƒ½æ¯ä¸€ä¸ªç»„ä»¶é‡Œé¢éƒ½å†™ computedï¼Œè¿™æ—¶å€™å¯ä»¥é€šè¿‡ <a href="https://vue3js.cn/docs/zh/api/application-config.html#globalproperties" target="_blank" rel="noopener noreferrer">å…¨å±€å±æ€§ </a>åœ¨æ‰€æœ‰ç»„ä»¶ä¸­ä½¿ç”¨å®ƒï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// main.ts</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> app </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">createApp</span><span class="token punctuation" style="color:#393A34">(</span><span class="token maybe-class-name">App</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">app</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">config</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">globalProperties</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">$filters</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token function" style="color:#d73a49">decrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">return</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">mdDecrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">value</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ç„¶åï¼Œå°±å¯ä»¥é€šè¿‡ <code>$filters</code> å¯¹è±¡ä¿®æ”¹æ‰€æœ‰çš„æ¨¡æ¿ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;p&gt;{{ $filters.decrypt(encryptVal) }}&lt;/p&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="è‡ªå®šä¹‰-ui-æ¡†æ¶ä¸»é¢˜è‰²"></a>è‡ªå®šä¹‰ UI æ¡†æ¶ä¸»é¢˜è‰²<a class="hash-link" href="#è‡ªå®šä¹‰-ui-æ¡†æ¶ä¸»é¢˜è‰²" title="Direct link to heading">#</a></h2><p>æ¯ä¸ªè®¾è®¡å¸ˆé‡‡ç”¨çš„ä¸»é¢˜è‰²ä¸ä¸€æ ·ï¼ŒUI æ¡†æ¶é»˜è®¤çš„ä¸»é¢˜è‰²ä¸æ˜¯æˆ‘ä»¬æƒ³è¦çš„ï¼Œæƒ³å¿…æˆ‘ä»¬éœ€è¦è‡ªå®šä¹‰é…ç½®ä¸€ä¸‹ã€‚ä¸‹é¢ä»¥ Vant ä¸ºä¾‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> defineConfig </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;vite&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">defineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  css</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    preprocessorOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      less</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        javascriptEnabled</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token comment" style="color:#999988;font-style:italic">// éœ€è¦è‡ªå®šä¹‰æ ·å¼å˜é‡åç§°</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        modifyVars</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&#x27;blue&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;#00C6B8&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&#x27;gray-7&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;#333333&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token string" style="color:#e3116c">&#x27;gray-4&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;#00C6B8&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">           </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="æœåŠ¡ä»£ç†-server"></a>æœåŠ¡ä»£ç† server<a class="hash-link" href="#æœåŠ¡ä»£ç†-server" title="Direct link to heading">#</a></h2><p>åœ¨å¼€å‘æµ‹è¯•è°ƒç”¨åç«¯æœåŠ¡åœ°å€ï¼Œå°‘ä¸äº†éœ€è¦ server ä»£ç†ï¼ŒVue2.x é…åˆ Vue-CLI å¯ä»¥åœ¨ config/index.js æ·»åŠ  <code>proxyTable</code> ä¿®æ”¹æ·»åŠ ï¼Œ Vite ä¸­åˆæ˜¯æ€ä¹ˆæ·»åŠ çš„å‘¢ï¼ŒVite å®˜ç½‘ä¹Ÿæœ‰è¯´æ˜ï¼Œä¸‹é¢çœ‹çœ‹å¦‚ä½•é…ç½®ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> defineConfig </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;vite&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">defineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  server</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    port</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">3006</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// è®¾ç½®ç«¯å£ï¼Œé»˜è®¤ 3000</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    open</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// è®¾ç½®å¯åŠ¨æ—¶ï¼Œè‡ªåŠ¨æ‰“å¼€æµè§ˆå™¨</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    cors</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// å…è®¸è·¨åŸŸ</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    host</span><span class="token operator" style="color:#393A34">:</span><span class="token string" style="color:#e3116c">&#x27;10.x.x.x&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æœ¬åœ° IP è®¿é—®ï¼Œå¦‚ä½•ç§»åŠ¨ç«¯æ‰‹æœºè°ƒè¯•å°±éœ€è¦å¡«å†™æœ¬åœ° IP äº†</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    proxy</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;/api&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        target</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;http://10.x.x.x.x&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        changeOrigin</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        secure</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token function-variable function" style="color:#d73a49">rewrite</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token parameter">path</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=&gt;</span><span class="token plain"> path</span><span class="token punctuation" style="color:#393A34">.</span><span class="token function" style="color:#d73a49">replace</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;/api/&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;/&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token comment" style="color:#999988;font-style:italic">// é…ç½®å¤šä¸ªç»§ç»­æ·»åŠ </span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token string" style="color:#e3116c">&#x27;/api2&#x27;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token operator" style="color:#393A34">...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="é…ç½®åˆ«å"></a>é…ç½®åˆ«å<a class="hash-link" href="#é…ç½®åˆ«å" title="Direct link to heading">#</a></h2><p>å†™æ³•æœ‰å¾ˆå¤šç§ï¼Œå¯ä»¥æ˜¯ä¸€ä¸ªå¯¹è±¡ï¼Œæˆ–ä¸€ä¸ª <code>{ find, replacement } </code> å…·ä½“å¯ä»¥çœ‹ <a href="https://cn.vitejs.dev/config/#resolve-alias" target="_blank" rel="noopener noreferrer">options</a></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly tsx"><pre tabindex="0" class="prism-code language-tsx codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> vue </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;@vitejs/plugin-vue&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> defineConfig </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;vite&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">defineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  resolve</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    alias</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        find</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        replacement</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;src&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        find</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;@ASS&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        replacement</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">resolve</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">__dirname</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;src/assets&quot;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  server</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token operator" style="color:#393A34">...</span><span class="token punctuation" style="color:#393A34">.</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç§»åŠ¨ç«¯-rem-è‡ªé€‚åº”"></a>ç§»åŠ¨ç«¯ rem è‡ªé€‚åº”<a class="hash-link" href="#ç§»åŠ¨ç«¯-rem-è‡ªé€‚åº”" title="Direct link to heading">#</a></h2><p>ç»“åˆä½¿ç”¨ <code>amfe-flexible</code> å’Œ <code>postcss-pxtorem</code> å®ç°ç§»åŠ¨ç«¯é€‚é…ã€‚</p><p><strong>amfe-flexible</strong></p><p><code>amfe-flexible</code> æ˜¯é…ç½®å…‹ä¼¸ç¼©å¸ƒå±€æ–¹æ¡ˆï¼Œä¸»è¦å°† 1rem è®¾ä¸º viewWidth/10ã€‚</p><p><strong>postcss-pxtorem</strong></p><p>postcss-pxtorem æ˜¯ postcss çš„æ’ä»¶ï¼Œç”¨äºå°†åƒç´ å•ä½ç”Ÿæˆ rem å•ä½ã€‚</p><p><strong>npm å®‰è£…</strong></p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly javascript"><pre tabindex="0" class="prism-code language-javascript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">npm i amfe</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">flexible </span><span class="token operator" style="color:#393A34">-</span><span class="token constant" style="color:#36acaa">D</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">npm i postcss</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pxtorem </span><span class="token operator" style="color:#393A34">-</span><span class="token constant" style="color:#36acaa">D</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å®‰è£…å®Œæ¯•åï¼Œåœ¨ main.ts ä¸­å¯¼å…¥ amfe-flexible æ’ä»¶</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// ...</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;amfe-flexible/index.js&quot;</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>postcss-pxtorem é…ç½®</p><p>é…ç½® postcss-pxtorem æ–¹å¼æœ‰ä¸‰ç§ï¼Œå¯ä»¥åœ¨ vite.config.tsã€.postcssrc.tsã€postcss.copnfig.ts å…¶ä¸­ä¹‹ä¸€é…ç½®å³å¯ã€‚</p><p>vite.config.ts ä¸­é…ç½®å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> defineConfig </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;vite&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">defineConfig</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  css</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token spread operator" style="color:#393A34">...</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    loaderOptions</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      postcss</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token function" style="color:#d73a49">require</span><span class="token punctuation" style="color:#393A34">(</span><span class="token string" style="color:#e3116c">&#x27;postcss-pxtorem&#x27;</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            rootValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">37.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ ¹æ®è®¾è®¡ç¨¿å®½åº¦é™¤ä»¥10è¿›è¡Œè®¾ç½®ï¼Œè¿™è¾¹å‡è®¾è®¾è®¡ç¨¿ä¸º375ï¼Œå³rootValueè®¾ä¸º37.5,æˆ‘è¿™é‡Œè®¾ç½®</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            propList</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// // propListæ˜¯è®¾ç½®éœ€è¦è½¬æ¢çš„å±æ€§ï¼Œè¿™è¾¹*ä¸ºæ‰€æœ‰éƒ½è¿›è¡Œè½¬æ¢ã€‚</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">          </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">]</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>æ ¹ç›®å½•åˆ›å»º .postcssrc.ts æˆ–è€… postcss.copnfig.ts é…ç½®å¦‚ä¸‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">module</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">exports</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  plugins</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    autoprefixer</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      overrideBrowserslist</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;Android 4.1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;iOS 7.1&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;Chrome &gt; 31&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;ff &gt; 31&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;ie &gt;= 8&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token string" style="color:#e3116c">&#x27;last 10 versions&#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token comment" style="color:#999988;font-style:italic">// æ‰€æœ‰ä¸»æµæµè§ˆå™¨æœ€è¿‘10ç‰ˆæœ¬ç”¨</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      </span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    postcss</span><span class="token operator" style="color:#393A34">-</span><span class="token plain">pxtorem</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      rootValue</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">37.5</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">      propList</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">[</span><span class="token string" style="color:#e3116c">&#x27;*&#x27;</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>é…ç½®å®Œæ¯•é‡å¯çœ‹çœ‹æ•ˆæœï¼š</p><p><img src="https://p1-juejin.byteimg.com/tos-cn-i-k3u1fbpfcp/4abf2943f48047fd8a91eb1554f9ddaa~tplv-k3u1fbpfcp-watermark.image" alt="image.png"></p><p>è¿˜å¯ä»¥ å¼•å…¥ rem.js æ–¹å¼ï¼Œä¸è¿‡éœ€è¦ç¼–å†™æ ·å¼çš„æ—¶å€™è‡ªå·± px è½¬ rem ï¼Œå¥½åœ¨ vscode æ‰©å±•å•†åº—ä¸­æœ‰ px to rem æ’ä»¶ä¸€ä»¶è½¬æ¢ï¼Œè¿™é‡Œå±•å¼€äº†ï¼Œå¯ä»¥è‡ªè¡Œ google ä¸€ä¸‹å°±æœ‰äº†ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="ç¯å¢ƒå˜é‡"></a>ç¯å¢ƒå˜é‡<a class="hash-link" href="#ç¯å¢ƒå˜é‡" title="Direct link to heading">#</a></h2><p>æœ‰æ—¶å€™é¡¹ç›®å¼€å‘ä¸­éœ€è¦éƒ¨ç½²æœ‰ä¸‰ç§è¿è¡Œç¯å¢ƒä¸­æ¯”å¦‚ æµ‹è¯•ç¯å¢ƒï¼ˆtestï¼‰ã€å¼€å‘ç¯å¢ƒï¼ˆdevï¼‰ã€ç”Ÿæˆç¯å¢ƒï¼ˆprodï¼‰ï¼Œè¯·æ±‚çš„æ¥å£åœ°å€ä¹Ÿéœ€è¦æ›´æ¢ï¼Œå¦‚ä½•åŠ¨æ€çš„æ›´æ¢å‘¢ï¼Ÿ Vite åœ¨ä¸€ä¸ªç‰¹æ®Šçš„ <strong><code>import.meta.env</code></strong> å¯¹è±¡ä¸Šæš´éœ²ç¯å¢ƒå˜é‡ï¼Œå¯ä»¥é€šè¿‡æš´éœ²çš„ç¯å¢ƒå˜é‡æ¥åˆ¤æ–­æ˜¯è¿è¡Œåœ¨å“ªä¸€ä¸ªç¯å¢ƒä¸­ã€‚</p><p>npm run dev è¿è¡Œ <strong><code>import.meta.env</code></strong> æš´éœ²çš„å˜é‡å€¼ä¸º development</p><p>npm run build <strong><code>import.meta.env</code></strong> æš´éœ²çš„å˜é‡å€¼ä¸º production</p><p>è¿˜æœ‰ä¸€ç§ æµ‹è¯•ç¯å¢ƒï¼ˆtestï¼‰å¦‚ä½•æ‹¿åˆ°å‘¢ï¼Ÿ</p><p>å¯ä»¥é€šè¿‡ package.json é…ç½® scripts run å‘½ä»¤</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly json"><pre tabindex="0" class="prism-code language-json codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token property" style="color:#36acaa">&quot;scripts&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;dev&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vite&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;build&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vite build&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token property" style="color:#36acaa">&quot;test:build&quot;</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vite build --mode test&quot;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">,</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¿è¡Œ npm run test:build <strong><code>import.meta.env</code></strong> æš´éœ²å˜é‡å€¼ä¸º test äº† --mode xxx åç§°å¯ä»¥è‡ªå®šä¹‰</p><p>è¯·æ±‚ URL ç»Ÿä¸€ç®¡ç† config.tsï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly ts"><pre tabindex="0" class="prism-code language-ts codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DEV_BASE_URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://xxx&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TEST_BASE_URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://xxx&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PRO_BASE_URL</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;https://xxx&quot;</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ä»¥å°è£… <code>axios</code> è®¾ç½® baseURL ä¸ºä¾‹ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DEV_BASE_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PRO_BASE_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TEST_BASE_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TIMEOUT</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;./config&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> envMap </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  development</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">DEV_BASE_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  production</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">PRO_BASE_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  test</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token constant" style="color:#36acaa">TEST_BASE_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> base_URL </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> envMap</span><span class="token punctuation" style="color:#393A34">[</span><span class="token keyword module" style="color:#00009f">import</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">meta</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">env</span><span class="token punctuation" style="color:#393A34">.</span><span class="token constant" style="color:#36acaa">MODE</span><span class="token punctuation" style="color:#393A34">]</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token comment" style="color:#999988;font-style:italic">// axios</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> instance </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> axios</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">create</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  baseURL</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> base_URL</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">  timeout</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">30000</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="å»é™¤-consolelog-å’Œ-vconsole-è°ƒè¯•"></a>å»é™¤ console.log å’Œ vconsole è°ƒè¯•<a class="hash-link" href="#å»é™¤-consolelog-å’Œ-vconsole-è°ƒè¯•" title="Direct link to heading">#</a></h2><p>åœ¨ vue-cli ä¸­æˆ‘ä»¬å¯ä»¥é…ç½® <code>configureWebpack</code>å»é™¤ï¼Œæ¥çœ‹ vite å¦‚ä½•æ ¹æ®åœ¨ç”Ÿæˆç¯å¢ƒå»é™¤çš„ï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly TypeScript"><pre tabindex="0" class="prism-code language-TypeScript codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">//...import</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import { defineConfig, loadEnv, ConfigEnv, UserConfigExport } from &quot;vite&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default ({ command, mode }): UserConfigExport =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  const isEnvProduction = mode === &quot;production&quot;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  return defineConfig({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    //...å…¶ä»–é…ç½®</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    build: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      terserOptions: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        compress: {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          drop_console: isEnvProduction, // true ä¸ºå…³é—­</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          drop_debugger: isEnvProduction,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  });</span></span><span class="token-line" style="color:#393A34"><span class="token plain">};</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>åœ¨é…ç½®æ–‡ä»¶ä¸­æˆ‘ä»¬æ— æ³•é€šè¿‡ <code>import.meta.env</code> è·å–åˆ°è¿è¡Œç¯å¢ƒå˜é‡ï¼Œå› ä¸ºå®ƒæ˜¯æš´éœ²å†å®¢æˆ·ç«¯æºç ä¸­çš„ï¼Œæ‰€ä»¥æˆ‘ä»¬å¯ä»¥é€šè¿‡è¿”å›ä¸€ä¸ªå‡½æ•°çš„æ–¹å¼ï¼Œåœ¨å‡½æ•°æ¥æ”¶çš„ <code>mode</code> å‚æ•°ä¸­è·å–åˆ°ç¯å¢ƒå˜é‡ã€‚</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2LWZ" id="hooks-ä½¿ç”¨"></a>hooks ä½¿ç”¨<a class="hash-link" href="#hooks-ä½¿ç”¨" title="Direct link to heading">#</a></h2><p>å‡çº§ Vue3 åï¼Œè®©äººæœ€è„‘å£³ç—›åº”è¯¥ä¸æ˜¯ Compostion API è¯­æ³•ï¼Œè€Œæ˜¯æä¾›äº†ç»™æˆ‘ä»¬å…¨æ–°çš„ç»„ç»‡ä»£ç çš„æ€ç»´æ–¹å¼ã€‚</p><p>åˆšå¼€å§‹ Vue3.0 æ­£å¼å‘å¸ƒå­¦ä¹ å®Œä¹‹åï¼Œä»£ç ä¹Ÿæ˜¯éµå¾ª Compostion API æ­£ç¡®ç”¨æ³•ï¼Œå¯æ˜¯å½“ç»„ä»¶åºå¤§ï¼Œé€»è¾‘å¤æ‚ï¼Œä»£ç é‡ä¹Ÿæ˜¯å¾ˆå¤šï¼Œå‘ç°æ¯” Options API å†™æ³•ç»´æŠ¤æ€§æ›´å·®ï¼Œä¹Ÿæ˜¯æ…¢æ…¢å†™æˆäº† æ‹‰é¢æ¡...</p><p>ä¸‹é¢ç»“åˆçœŸå®ä¸šåŠ¡éœ€æ±‚è®²è§£ä¸€ä¸‹</p><p>æ¯”å¦‚æœ‰ä¸€ä¸ªè·å–éªŒè¯ç æ–¹æ³•ï¼Œç‚¹å‡»è·å–å®Œæ¯• 60s å€’è®¡æ—¶åæ‰èƒ½é‡æ–°è·å–ï¼Œæ­£å¸¸éœ¹é›³å·´æ‹‰æˆ‘ä»¬ä¼šè¿™ä¹ˆå†™ï¼š</p><p>example.vue</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;button @click=&quot;onGetCode&quot;&gt;{{ codeText }}&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import { defineComponent, reactive, toRefs } from &quot;vue&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default defineComponent({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  setup(props, ctx) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const state = reactive({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      isGetCode: false,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      codeText: &quot;è·å–éªŒè¯ç &quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      countDown: 60,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      phone: &quot;&quot;,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    });</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ç‚¹å‡»åå€’è®¡æ—¶</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const countTime = () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      state.isGetCode = true;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      let timer;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      timer = setInterval(</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        (function setIntervalFunc() {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          if (countDown !== 0) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            state.codeText = `é‡æ–°å‘é€${countDown.value--}`;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          } else {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            state.isGetCode = false;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            state.codeText = &quot;è·å–éªŒè¯ç &quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            state.countDown = 60;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            clearInterval(timer);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">          return setIntervalFunc;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        })(),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        1000</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      );</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è·å–éªŒè¯ç è¯·æ±‚</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const onGetCode = async () =&gt; {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      const { success, message } = await getPhoneCode(encrypt(state.phone));</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      if (success) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        countTime();</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        Toast.success(message);</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      }</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      ...toRefs(state),</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      onGetCode,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>ä»æ–°ä¸Šé¢ä»£ç çœ‹æ²¡æœ‰é—®é¢˜å•Šï¼ŒCompostion API ä¸å°±æ˜¯è¿™ä¹ˆç”¨å•Šï¼Œæ¢­å“ˆå®Œæ¯•ï¼Œå¯æ˜¯å†æƒ³æƒ³ï¼Œå¦‚ä½•è¿™ä¸ªé¡µé¢åªæ˜¯å…¶ä¸­ä¸€ä¸ªé€»è¾‘ï¼Œè¿˜æœ‰åä¸ªé€»è¾‘ï¼Œéƒ½å†…èšåœ¨ä¸€èµ·ï¼Œä¾æ¬¡ç»§ç»­å†™åœ¨åé¢ï¼Œå†™åˆ°åé¢ä¸å°±æ˜¯æˆ‘ä»¬æ‰€è¯´çš„æ‹‰é¢æ¡äº†å—ï¼Ÿ</p><p>æ‰€ä»¥å¯ä»¥å•ç‹¬å°†é€»è¾‘æ‹†åˆ†åˆ°ä¸€ä¸ªæ–‡ä»¶ä¸­</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly js"><pre tabindex="0" class="prism-code language-js codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token comment" style="color:#999988;font-style:italic">// useVerificationCode.js</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">import</span><span class="token plain"> </span><span class="token imports punctuation" style="color:#393A34">{</span><span class="token imports"> reactive</span><span class="token imports punctuation" style="color:#393A34">,</span><span class="token imports"> toRefs </span><span class="token imports punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">from</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&quot;vue&quot;</span><span class="token punctuation" style="color:#393A34">;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token keyword module" style="color:#00009f">export</span><span class="token plain"> </span><span class="token keyword module" style="color:#00009f">default</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">useVerificationCode</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> state </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">reactive</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        isGetCode</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        codeText</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;è·å–éªŒè¯ç &#x27;</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        countDown</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        phone</span><span class="token operator" style="color:#393A34">:</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;&#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// ç‚¹å‡»åå€’è®¡æ—¶</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">countTime</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isGetCode</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">true</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">let</span><span class="token plain"> timer</span></span><span class="token-line" style="color:#393A34"><span class="token plain">        timer </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setInterval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">(</span><span class="token keyword" style="color:#00009f">function</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">setIntervalFunc</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">countDown </span><span class="token operator" style="color:#393A34">!==</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">0</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">codeText</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token template-string string" style="color:#e3116c">é‡æ–°å‘é€</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">${</span><span class="token template-string interpolation">countDown</span><span class="token template-string interpolation punctuation" style="color:#393A34">.</span><span class="token template-string interpolation">value</span><span class="token template-string interpolation operator" style="color:#393A34">--</span><span class="token template-string interpolation interpolation-punctuation punctuation" style="color:#393A34">}</span><span class="token template-string template-punctuation string" style="color:#e3116c">`</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">else</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">isGetCode</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token boolean" style="color:#36acaa">false</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">codeText</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token string" style="color:#e3116c">&#x27;è·å–éªŒè¯ç &#x27;</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">countDown</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token number" style="color:#36acaa">60</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                    </span><span class="token function" style="color:#d73a49">clearInterval</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">timer</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">                </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> setIntervalFunc</span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token punctuation" style="color:#393A34">}</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token number" style="color:#36acaa">1000</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token comment" style="color:#999988;font-style:italic">// è·å–éªŒè¯ç è¯·æ±‚</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token function-variable function" style="color:#d73a49">onGetCode</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword" style="color:#00009f">async</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token arrow operator" style="color:#393A34">=&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword" style="color:#00009f">const</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"> success</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"> message </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"> </span><span class="token operator" style="color:#393A34">=</span><span class="token plain"> </span><span class="token keyword control-flow" style="color:#00009f">await</span><span class="token plain"> </span><span class="token function" style="color:#d73a49">getPhoneCode</span><span class="token punctuation" style="color:#393A34">(</span><span class="token function" style="color:#d73a49">encrypt</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">.</span><span class="token property-access">phone</span><span class="token punctuation" style="color:#393A34">)</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token keyword control-flow" style="color:#00009f">if</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">success</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token function" style="color:#d73a49">countTime</span><span class="token punctuation" style="color:#393A34">(</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">            </span><span class="token maybe-class-name">Toast</span><span class="token punctuation" style="color:#393A34">.</span><span class="token method function property-access" style="color:#d73a49">success</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">message</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token keyword control-flow" style="color:#00009f">return</span><span class="token plain"> </span><span class="token punctuation" style="color:#393A34">{</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        </span><span class="token spread operator" style="color:#393A34">...</span><span class="token method function property-access" style="color:#d73a49">toRefs</span><span class="token punctuation" style="color:#393A34">(</span><span class="token plain">state</span><span class="token punctuation" style="color:#393A34">)</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">        onGetCode</span><span class="token punctuation" style="color:#393A34">,</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain">    </span><span class="token punctuation" style="color:#393A34">}</span><span class="token plain"></span></span><span class="token-line" style="color:#393A34"><span class="token plain"></span><span class="token punctuation" style="color:#393A34">}</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>å†çœ‹çœ‹æ”¹é€ åï¼š</p><div class="codeBlockContainer_K1bP"><div class="codeBlockContent_hGly vue"><pre tabindex="0" class="prism-code language-vue codeBlock_23N8 thin-scrollbar" style="color:#393A34;background-color:#f6f8fa"><code class="codeBlockLines_39YC"><span class="token-line" style="color:#393A34"><span class="token plain">// example.vue</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  &lt;button @click=&quot;onGetCode&quot;&gt;{{ codeText }}&lt;/button&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/template&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;script lang=&quot;ts&quot;&gt;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import { defineComponent } from &quot;vue&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">// å¼•å…¥ useVerificationCode.js</span></span><span class="token-line" style="color:#393A34"><span class="token plain">import useVerificationCode from &quot;./useVerificationCode.js&quot;;</span></span><span class="token-line" style="color:#393A34"><span class="token plain">export default defineComponent({</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  setup(props, ctx) {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // è·å–éªŒè¯ç </span></span><span class="token-line" style="color:#393A34"><span class="token plain">    const { onGetCode, isGetCode, codeText, countDown, phone } =</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      useVerificationCode();</span></span><span class="token-line" style="color:#393A34"><span class="token plain" style="display:inline-block">
</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    // ...</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    return {</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      onGetCode,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      isGetCode,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      codeText,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      countDown,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">      phone,</span></span><span class="token-line" style="color:#393A34"><span class="token plain">    };</span></span><span class="token-line" style="color:#393A34"><span class="token plain">  },</span></span><span class="token-line" style="color:#393A34"><span class="token plain">});</span></span><span class="token-line" style="color:#393A34"><span class="token plain">&lt;/script&gt;</span></span></code></pre><button type="button" aria-label="Copy code to clipboard" class="copyButton_Ue-o clean-btn">Copy</button></div></div><p>è¿™æ ·æ˜¯ä¸æ˜¯æ¸…çˆ½è®¸å¤šäº†ï¼Œä»¥å‰é”™è¯¯çš„è§‚ç‚¹ï¼Œå°±æ˜¯åªæœ‰å¤ç”¨çš„é€»è¾‘æ‰åº”è¯¥å°è£…åˆ° hook ä¸­ï¼Œåœ¨ <a href="https://v3.cn.vuejs.org/guide/composition-api-introduction.html#%E7%8B%AC%E7%AB%8B%E7%9A%84-computed-%E5%B1%9E%E6%80%A7" target="_blank" rel="noopener noreferrer">å®˜æ–¹çš„ç»™ä¾‹å­</a> ä¸­ï¼Œå¹¶ä¸æ˜¯å¼ºè°ƒé€»è¾‘å¤ç”¨ï¼Œè€Œæ˜¯é€»è¾‘å…³æ³¨ç‚¹åˆ†ç¦»ï¼Œåˆ°è¿™é‡Œç›¸ä¿¡å¤§å®¶éƒ½æ˜ç™½è¯¥æ€ä¹ˆå†™äº†ã€‚ä½†æ˜¯åœ¨ç®€å•é€»è¾‘çš„ç»„ä»¶ä¸­ï¼Œè¿‡åº¦æŠ½ç¦»å°±æ²¡å¿…è¦äº†ã€‚</p><header><h1 class="h1Heading_27L5">æ€»ç»“</h1></header><p>ç›®å‰è‡ªå·±åº”ç”¨ Vue3.0 å¼€å‘ä¸­çš„å°é¡¹ç›®ä¸­è¿˜æ²¡æœ‰é‡åˆ°è¿‡å¤§å‘ï¼Œé¢å‘ç™¾åº¦ã€æ–‡æ¡£éƒ½èƒ½è½»æ¾è§£å†³ï¼Œèµ¶ç´§ç”¨èµ·æ¥å§ï¼Œä¸¤ä¸ªå­— å¥½ä½¿ï¼ŒVite ç¼–è¯‘æ˜¯çœŸçš„å¿«~ï¼Œå°¤å¤§ç»™åŠ›(ï¿£ â–½ ï¿£)ã€‚</p></section></article><footer class="article__footer padding-top--md margin-top--lg margin-bottom--lg"><div></div></footer></div></div></div><nav class="pagination-nav docusaurus-mt-lg" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/study-vue3"><div class="pagination-nav__sublabel">ä¸‹ä¸€ç¯‡</div><div class="pagination-nav__label">Â« ä»é¡¹ç›®æ­å»ºåˆ°å­¦ä¹  Vue3 æ–°ç‰¹æ€§</div></a></div><div class="pagination-nav__item pagination-nav__item--next"><a class="pagination-nav__link" href="/react-api"><div class="pagination-nav__sublabel">ä¸Šä¸€ç¯‡</div><div class="pagination-nav__label">React ä¸­ createElement å’Œ cloneElement ä¸¤ä¸ª API çš„ç”¨æ³•å’ŒåŒºåˆ« Â»</div></a></div></nav></main><div class="col col--2"><div class="tableOfContents_35-E thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#å‰è¨€" class="table-of-contents__link">å‰è¨€</a></li><li><a href="#æ³¨å†Œç»„ä»¶" class="table-of-contents__link">æ³¨å†Œç»„ä»¶</a></li><li><a href="#ç»„ä»¶å…¨å±€æ³¨å†Œ" class="table-of-contents__link">ç»„ä»¶å…¨å±€æ³¨å†Œ</a></li><li><a href="#è¿‡æ»¤å™¨" class="table-of-contents__link">è¿‡æ»¤å™¨</a><ul><li><a href="#å…¨å±€è¿‡æ»¤å™¨" class="table-of-contents__link">å…¨å±€è¿‡æ»¤å™¨</a></li></ul></li><li><a href="#è‡ªå®šä¹‰-ui-æ¡†æ¶ä¸»é¢˜è‰²" class="table-of-contents__link">è‡ªå®šä¹‰ UI æ¡†æ¶ä¸»é¢˜è‰²</a></li><li><a href="#æœåŠ¡ä»£ç†-server" class="table-of-contents__link">æœåŠ¡ä»£ç† server</a></li><li><a href="#é…ç½®åˆ«å" class="table-of-contents__link">é…ç½®åˆ«å</a></li><li><a href="#ç§»åŠ¨ç«¯-rem-è‡ªé€‚åº”" class="table-of-contents__link">ç§»åŠ¨ç«¯ rem è‡ªé€‚åº”</a></li><li><a href="#ç¯å¢ƒå˜é‡" class="table-of-contents__link">ç¯å¢ƒå˜é‡</a></li><li><a href="#å»é™¤-consolelog-å’Œ-vconsole-è°ƒè¯•" class="table-of-contents__link">å»é™¤ console.log å’Œ vconsole è°ƒè¯•</a></li><li><a href="#hooks-ä½¿ç”¨" class="table-of-contents__link">hooks ä½¿ç”¨</a></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="footer__bottom text--center"><div class="footer__copyright">Copyright Â© 2023 My Project, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/assets/js/runtime~main.852a1eea.js"></script>
<script src="/assets/js/main.84c18cd6.js"></script>
</body>
</html>